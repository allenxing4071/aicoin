# AIcoin v2.0 Dockeréƒ¨ç½²æŒ‡å—

## ğŸ“‹ ç›®å½•

1. [ç³»ç»Ÿè¦æ±‚](#ç³»ç»Ÿè¦æ±‚)
2. [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
3. [æµ‹è¯•ç½‘éƒ¨ç½²](#æµ‹è¯•ç½‘éƒ¨ç½²)
4. [ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²](#ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²)
5. [é…ç½®è¯´æ˜](#é…ç½®è¯´æ˜)
6. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)
7. [ç›‘æ§å’Œç»´æŠ¤](#ç›‘æ§å’Œç»´æŠ¤)

---

## ç³»ç»Ÿè¦æ±‚

### ç¡¬ä»¶è¦æ±‚
- **CPU**: 4æ ¸å¿ƒæˆ–ä»¥ä¸Š
- **å†…å­˜**: 8GB RAMæˆ–ä»¥ä¸Š
- **å­˜å‚¨**: 50GBå¯ç”¨ç©ºé—´
- **ç½‘ç»œ**: ç¨³å®šçš„äº’è”ç½‘è¿æ¥

### è½¯ä»¶è¦æ±‚
- **Docker**: 20.10æˆ–ä»¥ä¸Š
- **Docker Compose**: 2.0æˆ–ä»¥ä¸Š
- **æ“ä½œç³»ç»Ÿ**: Linux (æ¨è Ubuntu 20.04+) / macOS / Windows with WSL2

### æ£€æŸ¥Dockerå®‰è£…
```bash
docker --version
docker-compose --version
```

---

## å¿«é€Ÿå¼€å§‹

### 1. å…‹éš†é¡¹ç›®
```bash
git clone <repository-url>
cd AIcoin
```

### 2. æ„å»ºDockeré•œåƒ
```bash
./build_docker.sh
```

### 3. é€‰æ‹©éƒ¨ç½²ç¯å¢ƒ
- **æµ‹è¯•ç½‘**: `./start_testnet.sh`
- **ç”Ÿäº§ç¯å¢ƒ**: `./deploy_prod.sh`

---

## æµ‹è¯•ç½‘éƒ¨ç½²

### æ­¥éª¤1: é…ç½®ç¯å¢ƒå˜é‡
```bash
# å¤åˆ¶ç¤ºä¾‹é…ç½®
cp .env.testnet.example .env.testnet

# ç¼–è¾‘é…ç½®æ–‡ä»¶
nano .env.testnet
```

### æ­¥éª¤2: å¡«å†™å¿…éœ€é…ç½®
```bash
# AI APIå¯†é’¥
DEEPSEEK_API_KEY=sk-your-deepseek-api-key

# Hyperliquidæµ‹è¯•ç½‘é…ç½®
HYPERLIQUID_WALLET_ADDRESS=0xYourTestnetWalletAddress
HYPERLIQUID_PRIVATE_KEY=0xYourTestnetPrivateKey
HYPERLIQUID_TESTNET=true

# äº¤æ˜“é…ç½®ï¼ˆå»ºè®®å…ˆè®¾ä¸ºfalseè§‚å¯Ÿï¼‰
TRADING_ENABLED=false
```

### æ­¥éª¤3: å¯åŠ¨æœåŠ¡
```bash
./start_testnet.sh
```

### æ­¥éª¤4: éªŒè¯éƒ¨ç½²
```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
docker-compose -f docker-compose.testnet.yml ps

# æ£€æŸ¥åç«¯å¥åº·
curl http://localhost:8000/health

# æ£€æŸ¥å‰ç«¯
curl http://localhost:3000
```

### æ­¥éª¤5: è®¿é—®ç³»ç»Ÿ
- **å‰ç«¯ç•Œé¢**: http://localhost:3000
- **APIæ–‡æ¡£**: http://localhost:8000/docs
- **Qdrantæ§åˆ¶å°**: http://localhost:6333/dashboard

---

## ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

### âš ï¸ é‡è¦æé†’
ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å‰ï¼Œè¯·ç¡®ä¿ï¼š
1. å·²åœ¨æµ‹è¯•ç½‘å……åˆ†æµ‹è¯•
2. ç†è§£æ‰€æœ‰é£é™©å‚æ•°
3. é…ç½®äº†ç›‘æ§å’Œå‘Šè­¦
4. å‡†å¤‡å¥½åº”æ€¥é¢„æ¡ˆ

### æ­¥éª¤1: é…ç½®ç¯å¢ƒå˜é‡
```bash
# å¤åˆ¶ç¤ºä¾‹é…ç½®
cp .env.prod.example .env.prod

# ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼ˆä½¿ç”¨å¼ºå¯†ç ï¼ï¼‰
nano .env.prod
```

### æ­¥éª¤2: å¡«å†™ç”Ÿäº§é…ç½®
```bash
# å¼ºå¯†ç é…ç½®
SECRET_KEY=your-super-secret-key-change-this-in-production
POSTGRES_PASSWORD=your-strong-postgres-password
REDIS_PASSWORD=your-strong-redis-password

# AI APIå¯†é’¥
DEEPSEEK_API_KEY=sk-your-deepseek-api-key

# Hyperliquidä¸»ç½‘é…ç½®
HYPERLIQUID_WALLET_ADDRESS=0xYourMainnetWalletAddress
HYPERLIQUID_PRIVATE_KEY=0xYourMainnetPrivateKey
HYPERLIQUID_TESTNET=false
HYPERLIQUID_API_URL=https://api.hyperliquid.xyz

# äº¤æ˜“é…ç½®ï¼ˆå»ºè®®å…ˆè®¾ä¸ºfalseè§‚å¯Ÿï¼‰
TRADING_ENABLED=false
DECISION_INTERVAL=300
INITIAL_PERMISSION_LEVEL=L1

# é£æ§å‚æ•°
MAX_POSITION_SIZE=10000
MAX_DAILY_LOSS=1000
MAX_DRAWDOWN=0.15
```

### æ­¥éª¤3: é…ç½®SSLè¯ä¹¦ï¼ˆå¯é€‰ï¼‰
```bash
# åˆ›å»ºSSLç›®å½•
mkdir -p nginx/ssl

# æ”¾ç½®è¯ä¹¦æ–‡ä»¶
cp your-cert.pem nginx/ssl/cert.pem
cp your-key.pem nginx/ssl/key.pem

# ç¼–è¾‘nginxé…ç½®å¯ç”¨HTTPS
nano nginx/nginx.conf
```

### æ­¥éª¤4: éƒ¨ç½²
```bash
./deploy_prod.sh
```

### æ­¥éª¤5: éªŒè¯éƒ¨ç½²
```bash
# æ£€æŸ¥æ‰€æœ‰æœåŠ¡
docker-compose -f docker-compose.prod.yml ps

# æ£€æŸ¥å¥åº·çŠ¶æ€
curl http://localhost/health
curl http://localhost/api/v1/status
```

---

## é…ç½®è¯´æ˜

### æ ¸å¿ƒé…ç½®é¡¹

#### æ•°æ®åº“é…ç½®
```bash
POSTGRES_USER=aicoin
POSTGRES_PASSWORD=your-strong-password
DATABASE_URL=postgresql://aicoin:password@postgres:5432/aicoin
```

#### Redisé…ç½®
```bash
REDIS_PASSWORD=your-redis-password
REDIS_URL=redis://:password@redis:6379
```

#### AIæ¨¡å‹é…ç½®
```bash
DEEPSEEK_API_KEY=sk-xxx        # å¿…éœ€
QWEN_API_KEY=sk-xxx            # å¯é€‰
GROK_API_KEY=xai-xxx           # å¯é€‰
CLAUDE_API_KEY=sk-ant-xxx      # å¯é€‰
OPENAI_API_KEY=sk-xxx          # å¯é€‰
```

#### äº¤æ˜“é…ç½®
```bash
TRADING_ENABLED=false          # æ˜¯å¦å¯ç”¨çœŸå®äº¤æ˜“
DECISION_INTERVAL=300          # å†³ç­–é—´éš”ï¼ˆç§’ï¼‰
INITIAL_PERMISSION_LEVEL=L1    # åˆå§‹æƒé™ç­‰çº§ï¼ˆL0-L5ï¼‰
```

#### é£æ§é…ç½®
```bash
MAX_POSITION_SIZE=10000        # æœ€å¤§æŒä»“é‡‘é¢ï¼ˆUSDï¼‰
MAX_DAILY_LOSS=1000            # æœ€å¤§æ—¥äºæŸï¼ˆUSDï¼‰
MAX_DRAWDOWN=0.15              # æœ€å¤§å›æ’¤æ¯”ä¾‹ï¼ˆ15%ï¼‰
```

---

## å¸¸è§é—®é¢˜

### Q1: ç«¯å£å†²çª
**é—®é¢˜**: å¯åŠ¨æ—¶æç¤ºç«¯å£å·²è¢«å ç”¨

**è§£å†³**:
```bash
# æ£€æŸ¥ç«¯å£å ç”¨
lsof -i :8000
lsof -i :3000

# ä¿®æ”¹docker-compose.ymlä¸­çš„ç«¯å£æ˜ å°„
ports:
  - "8001:8000"  # æ”¹ä¸ºå…¶ä»–ç«¯å£
```

### Q2: æ•°æ®åº“è¿æ¥å¤±è´¥
**é—®é¢˜**: Backendæ— æ³•è¿æ¥åˆ°PostgreSQL

**è§£å†³**:
```bash
# æ£€æŸ¥PostgreSQLå®¹å™¨çŠ¶æ€
docker-compose ps postgres

# æŸ¥çœ‹PostgreSQLæ—¥å¿—
docker-compose logs postgres

# é‡å¯PostgreSQL
docker-compose restart postgres
```

### Q3: å†…å­˜ä¸è¶³
**é—®é¢˜**: å®¹å™¨é¢‘ç¹é‡å¯æˆ–OOM

**è§£å†³**:
```bash
# é™åˆ¶å®¹å™¨å†…å­˜ä½¿ç”¨
# åœ¨docker-compose.ymlä¸­æ·»åŠ :
services:
  backend:
    deploy:
      resources:
        limits:
          memory: 2G
```

### Q4: XRPä»·æ ¼æ˜¾ç¤º$0.00
**é—®é¢˜**: æµ‹è¯•ç½‘ä¸ŠXRPä»·æ ¼æ— æ³•è·å–

**è§£å†³**: å·²è‡ªåŠ¨ä¿®å¤ï¼Œç³»ç»Ÿä¼šä½¿ç”¨mainnet APIè·å–å¸‚åœºæ•°æ®

---

## ç›‘æ§å’Œç»´æŠ¤

### æ—¥å¿—æŸ¥çœ‹
```bash
# æŸ¥çœ‹æ‰€æœ‰æœåŠ¡æ—¥å¿—
docker-compose -f docker-compose.prod.yml logs -f

# æŸ¥çœ‹ç‰¹å®šæœåŠ¡æ—¥å¿—
docker-compose -f docker-compose.prod.yml logs -f backend

# æŸ¥çœ‹æœ€è¿‘100è¡Œæ—¥å¿—
docker-compose -f docker-compose.prod.yml logs --tail=100 backend

# è¿‡æ»¤å…³é”®æ—¥å¿—
docker-compose -f docker-compose.prod.yml logs backend | grep -E '(ğŸ”„|âœ…|âŒ|âš ï¸)'
```

### æ€§èƒ½ç›‘æ§
```bash
# æŸ¥çœ‹å®¹å™¨èµ„æºä½¿ç”¨
docker stats

# æŸ¥çœ‹ç‰¹å®šå®¹å™¨èµ„æº
docker stats aicoin-backend-prod-v2
```

### æ•°æ®å¤‡ä»½
```bash
# å¤‡ä»½PostgreSQLæ•°æ®
docker exec aicoin-postgres-prod pg_dump -U aicoin aicoin > backup_$(date +%Y%m%d).sql

# å¤‡ä»½Redisæ•°æ®
docker exec aicoin-redis-prod redis-cli BGSAVE

# å¤‡ä»½Qdrantæ•°æ®
docker cp aicoin-qdrant-prod:/qdrant/storage ./qdrant_backup_$(date +%Y%m%d)
```

### æ•°æ®æ¢å¤
```bash
# æ¢å¤PostgreSQLæ•°æ®
cat backup_20250101.sql | docker exec -i aicoin-postgres-prod psql -U aicoin aicoin

# æ¢å¤Qdrantæ•°æ®
docker cp ./qdrant_backup_20250101 aicoin-qdrant-prod:/qdrant/storage
docker-compose restart qdrant
```

### æ›´æ–°éƒ¨ç½²
```bash
# æ‹‰å–æœ€æ–°ä»£ç 
git pull

# é‡æ–°æ„å»ºé•œåƒ
./build_docker.sh

# é‡å¯æœåŠ¡
docker-compose -f docker-compose.prod.yml up -d --build
```

### åœæ­¢æœåŠ¡
```bash
# åœæ­¢æ‰€æœ‰æœåŠ¡
docker-compose -f docker-compose.prod.yml down

# åœæ­¢å¹¶åˆ é™¤æ•°æ®å·ï¼ˆè°¨æ…ï¼ï¼‰
docker-compose -f docker-compose.prod.yml down -v
```

---

## å®‰å…¨å»ºè®®

1. **ä½¿ç”¨å¼ºå¯†ç **: æ‰€æœ‰å¯†ç å¿…é¡»å¤æ‚ä¸”å”¯ä¸€
2. **å®šæœŸå¤‡ä»½**: æ¯å¤©è‡ªåŠ¨å¤‡ä»½æ•°æ®åº“
3. **ç›‘æ§æ—¥å¿—**: è®¾ç½®å‘Šè­¦ç›‘æ§å¼‚å¸¸è¡Œä¸º
4. **é™åˆ¶è®¿é—®**: ä½¿ç”¨é˜²ç«å¢™é™åˆ¶ç«¯å£è®¿é—®
5. **æ›´æ–°åŠæ—¶**: å®šæœŸæ›´æ–°Dockeré•œåƒå’Œä¾èµ–
6. **æµ‹è¯•å…ˆè¡Œ**: æ‰€æœ‰æ›´æ”¹å…ˆåœ¨æµ‹è¯•ç½‘éªŒè¯

---

## æŠ€æœ¯æ”¯æŒ

- **æ–‡æ¡£**: `docs/`ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡æ¡£
- **æ—¥å¿—**: æŸ¥çœ‹å®¹å™¨æ—¥å¿—æ’æŸ¥é—®é¢˜
- **å¥åº·æ£€æŸ¥**: `/health` å’Œ `/api/v1/status` ç«¯ç‚¹

---

## ç‰ˆæœ¬å†å²

- **v2.0.0** (2025-11-01)
  - âœ… å®Œæ•´DockeråŒ–éƒ¨ç½²
  - âœ… å‰åç«¯åˆ†ç¦»æ¶æ„
  - âœ… å®æ—¶ä»·æ ¼æ›´æ–°
  - âœ… XRPä»·æ ¼ä¿®å¤ï¼ˆä½¿ç”¨mainnetæ•°æ®ï¼‰
  - âœ… ç”Ÿäº§ç¯å¢ƒæ”¯æŒ

---

**ç¥æ‚¨äº¤æ˜“é¡ºåˆ©ï¼ğŸš€**

