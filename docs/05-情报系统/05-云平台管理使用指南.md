# 云平台管理使用指南

## 📌 功能概述

云平台管理是情报系统的核心组件,用于配置和管理多个AI服务提供商的API端点。Qwen情报员可以通过这些平台进行市场情报收集。

## 🌐 支持的服务商

### 1. Qwen (阿里云)
- **Qwen Search**: 搜索增强型推理,适合需要实时信息的场景
- **Qwen Deep**: 深度推理模型,适合复杂分析任务

### 2. 百度千帆
- 提供多种AI模型API
- 支持免费和付费版本

### 3. 腾讯混元
- 腾讯云的AI模型服务

### 4. 火山引擎
- 字节跳动的AI平台

### 5. AWS Bedrock
- Amazon的托管AI服务

## 📝 添加新平台

### 必填字段
- **平台名称**: 用于识别该平台的名称(例如: "Qwen主平台")
- **Base URL**: API的基础URL地址

### 可选字段
- **服务商**: 选择平台提供商
- **平台类型**: 选择API类型(搜索增强/深度推理/免费)
- **API Key**: 如果平台需要认证,填写API密钥
- **启用状态**: 是否在添加后立即启用

### 添加步骤
1. 点击"添加平台"按钮
2. 填写必填字段(平台名称、Base URL)
3. 选择服务商和平台类型
4. 如需认证,填写API Key
5. 选择是否立即启用
6. 点击"✅ 添加平台"按钮

## 🎛️ 平台管理

### 启用/禁用平台
- 点击平台卡片中的开关按钮
- 禁用的平台不会被情报系统调用
- 可以随时重新启用

### 查看平台状态
每个平台卡片显示以下信息:
- **服务商图标**: 快速识别平台类型
- **平台名称和类型**
- **Base URL**: API端点地址
- **启用状态**: 绿色=启用,灰色=禁用
- **性能统计**: 
  - 总调用次数
  - 成功率
  - 平均响应时间
  - 总成本

### 性能统计区域
页面底部显示所有平台的汇总统计:
- 每个平台的调用次数
- 成功率百分比

## 🔧 配置示例

### Qwen Search (阿里云)
```json
{
  "name": "Qwen主平台",
  "provider": "qwen",
  "platform_type": "qwen_search",
  "api_key": "your_api_key_here",
  "base_url": "https://dashscope.aliyuncs.com/api/v1",
  "enabled": true
}
```

### 百度千帆免费版
```json
{
  "name": "百度千帆-免费版",
  "provider": "baidu",
  "platform_type": "free",
  "base_url": "https://aip.baidubce.com/rpc/2.0/ai_custom/v1",
  "enabled": true
}
```

## ⚠️ 注意事项

1. **API密钥安全**
   - API Key会加密存储在数据库中
   - 不要在公共场合分享您的API密钥
   - 定期更换密钥以确保安全

2. **费用管理**
   - 付费平台会产生API调用费用
   - 建议先使用免费平台测试
   - 定期检查"总成本"统计

3. **性能优化**
   - 优先使用响应速度快的平台
   - 根据成功率调整平台优先级
   - 可以配置多个备用平台

## 🚀 最佳实践

1. **多平台配置**
   - 配置至少2个以上的平台作为备份
   - 主平台故障时自动切换到备用平台

2. **合理分配**
   - 简单任务使用免费或低成本平台
   - 复杂分析使用深度推理平台
   - 需要实时信息使用搜索增强平台

3. **监控和维护**
   - 定期查看平台健康状态
   - 及时禁用异常平台
   - 关注成功率,低于80%需要检查

## 📊 API端点

所有云平台管理功能都通过以下API实现:

- `GET /api/v1/intelligence/platforms` - 获取平台列表
- `POST /api/v1/intelligence/platforms` - 添加新平台
- `PATCH /api/v1/intelligence/platforms/{id}` - 更新平台配置
- `DELETE /api/v1/intelligence/platforms/{id}` - 删除平台
- `GET /api/v1/intelligence/platforms/{id}/health` - 健康检查
- `GET /api/v1/intelligence/platforms/stats` - 获取统计信息

## 🔗 相关文档

- [情报系统架构](./01-情报系统架构.md)
- [Qwen集成指南](./02-Qwen集成指南.md)
- [数据源配置](./03-数据源配置.md)

