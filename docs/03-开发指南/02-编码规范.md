# 编码规范

**文档编号**: AICOIN-DEV-002  
**文档版本**: v1.0.0  
**创建日期**: 2025-10-22

---

## 1. Python代码规范

### 1.1 PEP 8
```python
# Good
def get_user_balance(user_id: int) -> Decimal:
    """获取用户余额"""
    return db.query(User).filter_by(id=user_id).first().balance

# Bad
def getUserBalance(userId):
    return db.query(User).filter_by(id=userId).first().balance
```

### 1.2 类型注解
```python
from typing import Optional, List

async def fetch_trades(
    symbol: str,
    limit: int = 20
) -> List[Trade]:
    pass
```

### 1.3 文档字符串
```python
def calculate_sharpe_ratio(returns: pd.Series, risk_free_rate: float = 0.02) -> float:
    """
    计算夏普比率
    
    Args:
        returns: 收益率序列
        risk_free_rate: 无风险利率，默认2%
        
    Returns:
        夏普比率
    """
    pass
```

---

## 2. TypeScript代码规范

### 2.1 Airbnb Style Guide
```typescript
// Good
interface Trade {
  id: number;
  symbol: string;
  price: number;
}

const fetchTrades = async (symbol: string): Promise<Trade[]> => {
  // ...
};

// Bad
var fetchTrades = function(symbol) {
  // ...
}
```

---

## 3. Git提交规范

### 3.1 Commit Message
```
<type>(<scope>): <subject>

<body>

<footer>
```

### 3.2 Type类型
- `feat`: 新功能
- `fix`: Bug修复
- `docs`: 文档更新
- `style`: 代码格式
- `refactor`: 重构
- `test`: 测试
- `chore`: 构建/工具

### 3.3 示例
```
feat(trading): 实现AI决策引擎

- 集成DeepSeek API
- 实现Prompt模板
- 添加决策解析器

Closes #123
```

---

## 4. 代码审查清单

- [ ] 代码符合规范
- [ ] 添加单元测试
- [ ] 更新文档
- [ ] 无安全漏洞
- [ ] 性能无明显下降

---

**文档结束**

