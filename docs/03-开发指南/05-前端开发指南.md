# 前端开发指南

**文档编号**: AICOIN-DEV-005  
**文档版本**: v1.0.0  
**创建日期**: 2025-10-22

---

## 1. 项目结构

```
frontend/
├── app/                    # Next.js 14 App Router
│   ├── (dashboard)/       # 路由组
│   │   ├── layout.tsx
│   │   └── page.tsx
│   └── api/
├── components/
│   ├── ui/               # shadcn/ui组件
│   └── charts/           # 图表组件
├── lib/
│   ├── api-client.ts     # API封装
│   └── utils.ts
└── hooks/
    └── useWebSocket.ts
```

---

## 2. 关键技术

### 2.1 状态管理 (TanStack Query)
```typescript
import { useQuery } from '@tanstack/react-query';

export function useTrades() {
  return useQuery({
    queryKey: ['trades'],
    queryFn: () => fetch('/api/v1/trading/trades').then(r => r.json()),
    refetchInterval: 5000,
  });
}
```

### 2.2 WebSocket
```typescript
import { useEffect, useState } from 'react';

export function useWebSocket() {
  const [data, setData] = useState(null);
  
  useEffect(() => {
    const ws = new WebSocket('ws://localhost:8000/ws');
    
    ws.onmessage = (event) => {
      setData(JSON.parse(event.data));
    };
    
    return () => ws.close();
  }, []);
  
  return data;
}
```

### 2.3 K线图 (Lightweight Charts)
```typescript
import { createChart } from 'lightweight-charts';

export function TradingChart({ data }) {
  const chartRef = useRef(null);
  
  useEffect(() => {
    const chart = createChart(chartRef.current, {
      width: 800,
      height: 400,
    });
    
    const candlestickSeries = chart.addCandlestickSeries();
    candlestickSeries.setData(data);
  }, [data]);
  
  return <div ref={chartRef} />;
}
```

---

## 3. UI组件库

使用 shadcn/ui:
```bash
npx shadcn-ui@latest add button card table
```

---

**文档结束**

