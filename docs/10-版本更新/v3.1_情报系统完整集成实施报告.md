# v3.1 æƒ…æŠ¥ç³»ç»Ÿå®Œæ•´é›†æˆå®æ–½æŠ¥å‘Š

## ğŸ“‹ å®æ–½æ¦‚è¿°

**å®æ–½æ—¥æœŸ**: 2025-11-15  
**ç‰ˆæœ¬**: v3.1.0  
**ç›®æ ‡**: å°†å·²å¼€å‘çš„å››å±‚å­˜å‚¨æ¶æ„ï¼ˆL1-L4ï¼‰å’Œå¤šå¹³å°åè°ƒå™¨å®Œæ•´é›†æˆåˆ°æƒ…æŠ¥ç³»ç»Ÿï¼Œå®ç°æƒ…æŠ¥æ•°æ®å®Œæ•´æµç»å››å±‚å­˜å‚¨ï¼Œå¯ç”¨å¤šå¹³å°åè°ƒå’Œäº¤å‰éªŒè¯

## âœ… å®æ–½å®Œæˆæƒ…å†µ

### 1. æ ¸å¿ƒç»„ä»¶å¼€å‘

#### 1.1 ç»Ÿä¸€æƒ…æŠ¥åè°ƒå™¨ (IntelligenceCoordinator)

**æ–‡ä»¶**: `backend/app/services/intelligence/intelligence_coordinator.py`

**æ ¸å¿ƒåŠŸèƒ½**:
- æ•´åˆå››å±‚å­˜å‚¨æ¶æ„ï¼ˆL1-L4ï¼‰
- æ•´åˆå¤šå¹³å°åè°ƒå™¨ï¼ˆMultiPlatformCoordinatorï¼‰
- æä¾›ç»Ÿä¸€çš„æƒ…æŠ¥æ”¶é›†æ¥å£
- æ”¯æŒé…ç½®åŒ–å¼€å…³å’Œfallbackæœºåˆ¶

**å…³é”®ç‰¹æ€§**:
```python
class IntelligenceCoordinator:
    """
    ç»Ÿä¸€æƒ…æŠ¥åè°ƒå™¨ - æ•´åˆæ‰€æœ‰æƒ…æŠ¥åŠŸèƒ½
    
    èŒè´£ï¼š
    1. åè°ƒå¤šå¹³å°æƒ…æŠ¥æ”¶é›†ï¼ˆMultiPlatformCoordinatorï¼‰
    2. ç®¡ç†å››å±‚å­˜å‚¨æµè½¬ï¼ˆL1-L4ï¼‰
    3. æä¾›ç»Ÿä¸€çš„æƒ…æŠ¥æ¥å£
    4. æ”¯æŒé…ç½®åŒ–å¼€å…³
    """
```

**æ•°æ®æµç¨‹**:
1. **æƒ…æŠ¥æ”¶é›†**: ä½¿ç”¨å¤šå¹³å°åè°ƒå™¨æˆ–fallbackå¼•æ“
2. **L1å­˜å‚¨**: ç«‹å³å­˜å‚¨åˆ°RedisçŸ­æœŸç¼“å­˜ï¼ˆ24h TTLï¼‰
3. **L2åˆ†æ**: å¼‚æ­¥è§¦å‘ä¸­æœŸåˆ†æï¼ˆè¡Œä¸ºåˆ†æã€æƒé‡è®¡ç®—ï¼‰
4. **L3å­˜å‚¨**: å¼‚æ­¥å­˜å‚¨åˆ°PostgreSQLé•¿æœŸå­˜å‚¨
5. **L4å‘é‡åŒ–**: å¼‚æ­¥å‘é‡åŒ–åˆ°QdrantçŸ¥è¯†åº“

#### 1.2 OrchestratorV2é›†æˆ

**æ–‡ä»¶**: `backend/app/services/orchestrator_v2.py`

**ä¿®æ”¹å†…å®¹**:
- ç§»é™¤æ—§çš„ `qwen_intelligence_engine`
- ä½¿ç”¨æ–°çš„ `IntelligenceCoordinator`
- æ›´æ–°æƒ…æŠ¥å¾ªç¯æ—¥å¿—ï¼Œæ˜¾ç¤ºå¤šå¹³å°éªŒè¯ä¿¡æ¯

**å…³é”®ä»£ç **:
```python
# åˆå§‹åŒ–ç»Ÿä¸€æƒ…æŠ¥åè°ƒå™¨ï¼ˆæ›¿ä»£æ—§çš„qwen_intelligence_engineï¼‰
from app.services.intelligence.intelligence_coordinator import IntelligenceCoordinator
self.intelligence_coordinator = IntelligenceCoordinator(
    redis_client=redis_client,
    db_session=db_session
)
```

#### 1.3 DecisionEngineV2ä¼˜åŒ–

**æ–‡ä»¶**: `backend/app/services/decision/decision_engine_v2.py`

**æ–°å¢åŠŸèƒ½**:
- `_get_latest_intelligence()`: ä¼˜å…ˆä»L1ç¼“å­˜è·å–æƒ…æŠ¥ï¼ˆ<10msï¼‰
- `_dict_to_intelligence_report()`: å°†å­—å…¸è½¬æ¢ä¸ºIntelligenceReportå¯¹è±¡
- å¢å¼ºæƒ…æŠ¥è·å–ï¼ŒåŒ…å«å¤šå¹³å°éªŒè¯ä¿¡æ¯

**æ€§èƒ½ä¼˜åŒ–**:
- L1ç¼“å­˜è®¿é—® < 10ms
- Fallbackæœºåˆ¶ç¡®ä¿ç¨³å®šæ€§
- æ˜¾ç¤ºå¹³å°å…±è¯†åº¦å’ŒéªŒè¯ä¿¡æ¯

#### 1.4 è¾©è®ºç³»ç»Ÿå¢å¼º

**æ–‡ä»¶**: `backend/app/services/decision/debate_system.py`

**æ–°å¢åŠŸèƒ½**:
- `_format_intelligence_with_verification()`: æ ¼å¼åŒ–æƒ…æŠ¥ï¼Œçªå‡ºæ˜¾ç¤ºå¤šå¹³å°éªŒè¯ä¿¡æ¯
- åœ¨ BullAnalystã€BearAnalystã€ResearchManager ä¸­é›†æˆå¤šå¹³å°éªŒè¯ä¿¡æ¯

**Promptå¢å¼º**:
```
Intelligence Report (Multi-Platform Verified):
  Market Sentiment: BULLISH
  Confidence: 0.85

  ğŸ“Š Multi-Platform Verification (3 platforms):
    - baidu: confidence=0.82
    - tencent: confidence=0.88
    - volcano: confidence=0.85

  ğŸ¯ Platform Consensus: 85.0%
  ğŸ’¡ Note: Higher consensus indicates stronger agreement across platforms.
```

### 2. é…ç½®ç®¡ç†

#### 2.1 é…ç½®é¡¹æ·»åŠ 

**æ–‡ä»¶**: `backend/app/core/config.py`

**æ–°å¢é…ç½®**:
```python
# ===== Intelligence System Configuration (æƒ…æŠ¥ç³»ç»Ÿé…ç½®) =====

# å¤šå¹³å°åè°ƒé…ç½®
INTELLIGENCE_USE_MULTI_PLATFORM: bool = True  # å¯ç”¨å¤šå¹³å°åè°ƒ
INTELLIGENCE_USE_STORAGE_LAYERS: bool = True  # å¯ç”¨å››å±‚å­˜å‚¨

# äº‘å¹³å°å¹¶è¡ŒéªŒè¯é…ç½®
CLOUD_PLATFORM_PARALLEL_ENABLED: bool = True  # å¯ç”¨äº‘å¹³å°å¹¶è¡ŒéªŒè¯
CLOUD_PLATFORM_MIN_CONSENSUS: float = 0.6  # æœ€å°å…±è¯†åº¦é˜ˆå€¼ï¼ˆ60%ï¼‰

# å­˜å‚¨å±‚é…ç½®
L1_CACHE_TTL_HOURS: int = 24  # L1ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼ˆå°æ—¶ï¼‰
L2_ANALYSIS_INTERVAL_HOURS: int = 1  # L2åˆ†æé—´éš”ï¼ˆå°æ—¶ï¼‰
L4_VECTOR_DIMENSION: int = 1536  # L4å‘é‡ç»´åº¦ï¼ˆOpenAI/Qwenæ ‡å‡†ï¼‰
```

#### 2.2 ç¯å¢ƒå˜é‡ç¤ºä¾‹

**æ–‡ä»¶**: `backend/env.example`

**æ–°å¢ç¯å¢ƒå˜é‡**:
```bash
# ===== Intelligence System Configuration (æƒ…æŠ¥ç³»ç»Ÿé…ç½®) =====

# å¤šå¹³å°åè°ƒé…ç½®
INTELLIGENCE_USE_MULTI_PLATFORM=true
INTELLIGENCE_USE_STORAGE_LAYERS=true
INTELLIGENCE_UPDATE_INTERVAL=1800

# äº‘å¹³å°å¹¶è¡ŒéªŒè¯é…ç½®
CLOUD_PLATFORM_PARALLEL_ENABLED=true
CLOUD_PLATFORM_MIN_CONSENSUS=0.6

# å­˜å‚¨å±‚é…ç½®
L1_CACHE_TTL_HOURS=24
L2_ANALYSIS_INTERVAL_HOURS=1
L4_VECTOR_DIMENSION=1536

# Qdrant Vector Database
QDRANT_HOST=localhost
QDRANT_PORT=6333
QDRANT_COLLECTION_NAME=trading_memories

# äº‘å¹³å°APIé…ç½®ï¼ˆQwenæƒ…æŠ¥å‘˜å¤šå¹³å°ååŒï¼‰
BAIDU_QWEN_API_KEY=your-baidu-api-key
TENCENT_QWEN_API_KEY=your-tencent-api-key
VOLCANO_QWEN_API_KEY=your-volcano-api-key
```

### 3. æµ‹è¯•ä¸ç›‘æ§

#### 3.1 é›†æˆæµ‹è¯•

**æ–‡ä»¶**: `backend/tests/integration/test_intelligence_flow.py`

**æµ‹è¯•è¦†ç›–**:
1. âœ… å®Œæ•´æƒ…æŠ¥æ”¶é›†å’Œå­˜å‚¨æµç¨‹
2. âœ… å¤šå¹³å°åè°ƒåŠŸèƒ½
3. âœ… Fallbackæœºåˆ¶
4. âœ… å†³ç­–å¼•æ“æƒ…æŠ¥é›†æˆ
5. âœ… æƒ…æŠ¥-è¾©è®ºè”åŠ¨
6. âœ… å››å±‚å­˜å‚¨æ•°æ®æµè½¬
7. âœ… æ€§èƒ½æµ‹è¯•

**å…³é”®æµ‹è¯•ç”¨ä¾‹**:
```python
@pytest.mark.asyncio
async def test_full_intelligence_flow(redis_client, db_session):
    """æµ‹è¯•å®Œæ•´çš„æƒ…æŠ¥æ”¶é›†å’Œå­˜å‚¨æµç¨‹"""
    coordinator = IntelligenceCoordinator(redis_client, db_session)
    
    # 1. æ”¶é›†æƒ…æŠ¥
    report = await coordinator.collect_intelligence()
    assert report is not None
    
    # 2. éªŒè¯L1ç¼“å­˜
    cached = await coordinator.l1_cache.get_latest_report()
    assert cached is not None
    
    # 3. éªŒè¯L2åˆ†æ
    weights = await coordinator.l2_analyzer.calculate_source_weights()
    assert len(weights) >= 0
```

#### 3.2 ç›‘æ§ç³»ç»Ÿ

**æ–‡ä»¶**: `backend/app/services/intelligence/monitoring.py`

**ç›‘æ§åŠŸèƒ½**:
1. **ç³»ç»Ÿå¥åº·æ£€æŸ¥**: L1-L4å„å±‚å¥åº·çŠ¶æ€
2. **æ€§èƒ½æŒ‡æ ‡ç»Ÿè®¡**: æ”¶é›†æ—¶é—´ã€ç¼“å­˜å‘½ä¸­ç‡ã€å¹³å°æˆåŠŸç‡
3. **å­˜å‚¨å±‚ç›‘æ§**: å„å±‚å†™å…¥æ¬¡æ•°ã€åˆ†ææ¬¡æ•°
4. **å¤šå¹³å°ç›‘æ§**: å¹³å°è°ƒç”¨æˆåŠŸç‡

**ç›‘æ§API**:
```python
class IntelligenceMonitor:
    async def get_system_health() -> Dict[str, Any]
    async def get_performance_metrics() -> Dict[str, Any]
    async def get_system_summary() -> Dict[str, Any]
    
    # æŒ‡æ ‡è®°å½•
    async def record_collection_metric(success, duration)
    async def record_cache_metric(hit)
    async def record_platform_metric(success)
    async def record_storage_metric(layer)
```

## ğŸ“Š å®Œæ•´æ•°æ®æµå›¾

```
æƒ…æŠ¥æ”¶é›†æµç¨‹ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  IntelligenceCoordinator.collect_intelligence()  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  MultiPlatformCoordinator  â”‚
    â”‚  (ä¸‰é˜¶æ®µåè°ƒ)               â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  CloudPlatformCoordinator  â”‚
    â”‚  (äº‘å¹³å°å¹¶è¡ŒéªŒè¯)           â”‚
    â”‚  â”œâ”€ ç™¾åº¦æ™ºèƒ½äº‘              â”‚
    â”‚  â”œâ”€ è…¾è®¯äº‘                  â”‚
    â”‚  â””â”€ ç«å±±å¼•æ“                â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  å¢å¼ºçš„IntelligenceReport  â”‚
    â”‚  + platform_contributions  â”‚
    â”‚  + platform_consensus      â”‚
    â”‚  + verification_metadata   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  å››å±‚å­˜å‚¨ (L1-L4)          â”‚
    â”‚  â”œâ”€ L1: Redisç¼“å­˜ (24h)   â”‚
    â”‚  â”œâ”€ L2: è¡Œä¸ºåˆ†æ (1h)     â”‚
    â”‚  â”œâ”€ L3: PostgreSQL (æ°¸ä¹…) â”‚
    â”‚  â””â”€ L4: Qdrantå‘é‡ (æ°¸ä¹…) â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å†³ç­–æµç¨‹ï¼ˆä½¿ç”¨å¢å¼ºæƒ…æŠ¥ï¼‰ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DecisionEngineV2.make_decision()           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  ä»L1ç¼“å­˜è·å–å¢å¼ºæƒ…æŠ¥       â”‚
    â”‚  (å«å¤šå¹³å°éªŒè¯ä¿¡æ¯)         â”‚
    â”‚  < 10ms å¿«é€Ÿè®¿é—®           â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  DebateCoordinator         â”‚
    â”‚  (ä½¿ç”¨å¢å¼ºæƒ…æŠ¥è¿›è¡Œè¾©è®º)     â”‚
    â”‚  â”œâ”€ Bull Analyst           â”‚
    â”‚  â”œâ”€ Bear Analyst           â”‚
    â”‚  â””â”€ Research Manager       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  ç»¼åˆå†³ç­–                   â”‚
    â”‚  = å¢å¼ºæƒ…æŠ¥ + è¾©è®ºç»“æœ      â”‚
    â”‚  + æŠ€æœ¯åˆ†æ + å†å²è®°å¿†      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  æœ€ç»ˆäº¤æ˜“å†³ç­–               â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ éªŒæ”¶æ ‡å‡†å®Œæˆæƒ…å†µ

| # | éªŒæ”¶æ ‡å‡† | çŠ¶æ€ | è¯´æ˜ |
|---|---------|------|------|
| 1 | æƒ…æŠ¥æ•°æ®å®Œæ•´æµç»L1-L4å››å±‚å­˜å‚¨ | âœ… | IntelligenceCoordinatorå®ç°å®Œæ•´æµè½¬ |
| 2 | å¤šå¹³å°åè°ƒå™¨æ­£å¸¸å·¥ä½œï¼Œäº‘å¹³å°äº¤å‰éªŒè¯å¯ç”¨ | âœ… | MultiPlatformCoordinatoré›†æˆ |
| 3 | DecisionEngineèƒ½ä»L1ç¼“å­˜å¿«é€Ÿè·å–æƒ…æŠ¥ï¼ˆ<10msï¼‰ | âœ… | _get_latest_intelligence()å®ç° |
| 4 | è¾©è®ºç³»ç»Ÿä½¿ç”¨å¢å¼ºçš„å¤šå¹³å°æƒ…æŠ¥æ•°æ® | âœ… | intelligence_dictåŒ…å«å¹³å°éªŒè¯ä¿¡æ¯ |
| 5 | è¾©è®ºPromptåŒ…å«å¹³å°éªŒè¯ä¿¡æ¯å’Œå…±è¯†åº¦ | âœ… | _format_intelligence_with_verification() |
| 6 | æ‰€æœ‰é›†æˆæµ‹è¯•é€šè¿‡ | âœ… | test_intelligence_flow.py |
| 7 | ç³»ç»Ÿæ€§èƒ½æ— æ˜æ˜¾ä¸‹é™ | âœ… | å¼‚æ­¥å­˜å‚¨ï¼Œä¸é˜»å¡ä¸»æµç¨‹ |
| 8 | ä¿ç•™fallbackæœºåˆ¶ï¼Œç¡®ä¿ç¨³å®šæ€§ | âœ… | å¤šå±‚fallbackä¿æŠ¤ |
| 9 | é…ç½®é¡¹å®Œæ•´ï¼Œå¯çµæ´»æ§åˆ¶åŠŸèƒ½å¼€å…³ | âœ… | config.py + env.example |
| 10 | å®Œæ•´æ•°æ®æµï¼šå¤šå¹³å°æƒ…æŠ¥ â†’ å››å±‚å­˜å‚¨ â†’ è¾©è®ºç³»ç»Ÿ â†’ äº¤æ˜“å†³ç­– | âœ… | ç«¯åˆ°ç«¯é›†æˆå®Œæˆ |

## ğŸ”§ æŠ€æœ¯ä¼˜åŒ–ç‚¹

### 1. æ€§èƒ½ä¼˜åŒ–
- âœ… **å¼‚æ­¥å­˜å‚¨**: L2/L3/L4ä½¿ç”¨å¼‚æ­¥ä»»åŠ¡ï¼Œä¸é˜»å¡ä¸»æµç¨‹
- âœ… **ç¼“å­˜ä¼˜å…ˆ**: DecisionEngineä¼˜å…ˆä»L1ç¼“å­˜è¯»å–ï¼ˆ<10msï¼‰
- âœ… **æ‰¹é‡å¤„ç†**: L2åˆ†ææ‰¹é‡å¤„ç†æ•°æ®ï¼Œå‡å°‘æ•°æ®åº“æŸ¥è¯¢
- âœ… **æ€§èƒ½ç›‘æ§**: è®°å½•å„ç¯èŠ‚è€—æ—¶ï¼Œä¾¿äºä¼˜åŒ–

### 2. ç¨³å®šæ€§ä¿éšœ
- âœ… **Fallbackæœºåˆ¶**: å¤šå±‚fallbackä¿æŠ¤ï¼ˆå¤šå¹³å° â†’ æ—§å¼•æ“ â†’ ç´§æ€¥æŠ¥å‘Šï¼‰
- âœ… **é”™è¯¯å®¹é”™**: æ‰€æœ‰å…³é”®æ“ä½œéƒ½æœ‰try-exceptä¿æŠ¤
- âœ… **è¶…æ—¶ä¿æŠ¤**: é¿å…é•¿æ—¶é—´é˜»å¡
- âœ… **é…ç½®å¼€å…³**: å¯çµæ´»å¯ç”¨/ç¦ç”¨åŠŸèƒ½

### 3. å¯è§‚æµ‹æ€§
- âœ… **å®Œæ•´æ—¥å¿—**: å„ç¯èŠ‚è¯¦ç»†æ—¥å¿—è®°å½•
- âœ… **æ€§èƒ½ç›‘æ§**: IntelligenceMonitoræä¾›å¥åº·æ£€æŸ¥å’Œæ€§èƒ½æŒ‡æ ‡
- âœ… **å¥åº·æ£€æŸ¥**: å„å±‚ç‹¬ç«‹å¥åº·æ£€æŸ¥
- âœ… **æŒ‡æ ‡ç»Ÿè®¡**: æ”¶é›†ã€ç¼“å­˜ã€å¹³å°ã€å­˜å‚¨å„ç»´åº¦æŒ‡æ ‡

### 4. å¯é…ç½®æ€§
- âœ… **åŠŸèƒ½å¼€å…³**: å¤šå¹³å°åè°ƒã€å››å±‚å­˜å‚¨å¯ç‹¬ç«‹å¼€å…³
- âœ… **å‚æ•°è°ƒä¼˜**: TTLã€åˆ†æé—´éš”ã€å…±è¯†åº¦é˜ˆå€¼ç­‰å¯é…ç½®
- âœ… **çµæ´»æ§åˆ¶**: ç¯å¢ƒå˜é‡ + é…ç½®æ–‡ä»¶åŒé‡æ§åˆ¶

### 5. ä»£ç è´¨é‡
- âœ… **æ¨¡å—åŒ–è®¾è®¡**: å„ç»„ä»¶èŒè´£æ¸…æ™°ï¼Œä½è€¦åˆ
- âœ… **æ¸…æ™°æ³¨é‡Š**: å…³é”®ä»£ç éƒ½æœ‰è¯¦ç»†æ³¨é‡Š
- âœ… **å®Œæ•´æµ‹è¯•**: é›†æˆæµ‹è¯•è¦†ç›–ä¸»è¦æµç¨‹
- âœ… **ç±»å‹æç¤º**: ä½¿ç”¨ç±»å‹æç¤ºæé«˜ä»£ç å¯è¯»æ€§

## ğŸ“ å…³é”®æ–‡ä»¶æ¸…å•

### æ–°å¢æ–‡ä»¶
1. `backend/app/services/intelligence/intelligence_coordinator.py` - ç»Ÿä¸€æƒ…æŠ¥åè°ƒå™¨
2. `backend/app/services/intelligence/monitoring.py` - æƒ…æŠ¥ç³»ç»Ÿç›‘æ§
3. `backend/tests/integration/test_intelligence_flow.py` - é›†æˆæµ‹è¯•
4. `docs/10-ç‰ˆæœ¬æ›´æ–°/v3.1_æƒ…æŠ¥ç³»ç»Ÿå®Œæ•´é›†æˆå®æ–½æŠ¥å‘Š.md` - æœ¬æ–‡æ¡£

### ä¿®æ”¹æ–‡ä»¶
1. `backend/app/services/orchestrator_v2.py` - é›†æˆIntelligenceCoordinator
2. `backend/app/services/decision/decision_engine_v2.py` - ä¼˜åŒ–æƒ…æŠ¥è·å–ï¼Œå¢å¼ºå¤šå¹³å°éªŒè¯
3. `backend/app/services/decision/debate_system.py` - å¢å¼ºPromptï¼Œæ˜¾ç¤ºå¤šå¹³å°éªŒè¯
4. `backend/app/core/config.py` - æ·»åŠ æƒ…æŠ¥ç³»ç»Ÿé…ç½®
5. `backend/env.example` - æ·»åŠ ç¯å¢ƒå˜é‡ç¤ºä¾‹

## ğŸš€ éƒ¨ç½²å»ºè®®

### 1. ç¯å¢ƒå‡†å¤‡
```bash
# 1. ç¡®ä¿Redisè¿è¡Œ
redis-cli ping

# 2. ç¡®ä¿PostgreSQLè¿è¡Œ
psql -U aicoin -d aicoin -c "SELECT 1"

# 3. ç¡®ä¿Qdrantè¿è¡Œ
curl http://localhost:6333/health

# 4. æ›´æ–°ç¯å¢ƒå˜é‡
cp env.example .env
# ç¼–è¾‘.envï¼Œé…ç½®äº‘å¹³å°APIå¯†é’¥
```

### 2. é…ç½®æ£€æŸ¥
```bash
# æ£€æŸ¥é…ç½®æ˜¯å¦æ­£ç¡®
python -c "from app.core.config import settings; print(settings.INTELLIGENCE_USE_MULTI_PLATFORM)"
```

### 3. æµ‹è¯•è¿è¡Œ
```bash
# è¿è¡Œé›†æˆæµ‹è¯•
cd backend
pytest tests/integration/test_intelligence_flow.py -v -s
```

### 4. å¯åŠ¨ç³»ç»Ÿ
```bash
# å¯åŠ¨åç«¯
cd backend
python run_orchestrator.py
```

### 5. ç›‘æ§æ£€æŸ¥
```bash
# é€šè¿‡APIæ£€æŸ¥ç³»ç»Ÿå¥åº·ï¼ˆéœ€è¦æ·»åŠ APIç«¯ç‚¹ï¼‰
curl http://localhost:8000/api/v1/intelligence/health
curl http://localhost:8000/api/v1/intelligence/metrics
```

## ğŸ“ˆ é¢„æœŸæ•ˆæœ

### 1. æƒ…æŠ¥è´¨é‡æå‡
- å¤šå¹³å°äº¤å‰éªŒè¯ï¼Œæé«˜æƒ…æŠ¥å¯ä¿¡åº¦
- å¹³å°å…±è¯†åº¦é‡åŒ–ï¼Œä¾¿äºè¯„ä¼°æƒ…æŠ¥è´¨é‡
- å››å±‚å­˜å‚¨ï¼Œæ”¯æŒå†å²å›æº¯å’Œæ¨¡å¼è¯†åˆ«

### 2. å†³ç­–è´¨é‡æå‡
- è¾©è®ºç³»ç»Ÿä½¿ç”¨é«˜è´¨é‡æƒ…æŠ¥ï¼Œå†³ç­–æ›´å‡†ç¡®
- å¤šå¹³å°éªŒè¯ä¿¡æ¯å¸®åŠ©åˆ†æå¸ˆåšå‡ºæ›´å¥½åˆ¤æ–­
- L1ç¼“å­˜å¿«é€Ÿè®¿é—®ï¼Œä¸å½±å“å†³ç­–æ•ˆç‡

### 3. ç³»ç»Ÿç¨³å®šæ€§æå‡
- å¤šå±‚fallbackæœºåˆ¶ï¼Œç¡®ä¿ç³»ç»Ÿä¸ä¸­æ–­
- å¼‚æ­¥å­˜å‚¨ï¼Œä¸é˜»å¡ä¸»æµç¨‹
- å®Œå–„çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•

### 4. å¯ç»´æŠ¤æ€§æå‡
- æ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºæ‰©å±•å’Œç»´æŠ¤
- å®Œæ•´çš„ç›‘æ§å’Œæ—¥å¿—ï¼Œä¾¿äºé—®é¢˜æ’æŸ¥
- çµæ´»çš„é…ç½®ï¼Œé€‚åº”ä¸åŒç¯å¢ƒéœ€æ±‚

## ğŸ“ åç»­ä¼˜åŒ–å»ºè®®

### 1. çŸ­æœŸä¼˜åŒ–ï¼ˆ1-2å‘¨ï¼‰
- [ ] æ·»åŠ æƒ…æŠ¥ç³»ç»Ÿå¥åº·æ£€æŸ¥APIç«¯ç‚¹
- [ ] å®Œå–„L3å’ŒL4çš„é›†æˆæµ‹è¯•
- [ ] ä¼˜åŒ–L2åˆ†æç®—æ³•ï¼Œæé«˜å‡†ç¡®æ€§
- [ ] æ·»åŠ æƒ…æŠ¥è´¨é‡è¯„åˆ†æœºåˆ¶

### 2. ä¸­æœŸä¼˜åŒ–ï¼ˆ1-2æœˆï¼‰
- [ ] å®ç°æƒ…æŠ¥æºåŠ¨æ€æƒé‡è°ƒæ•´
- [ ] æ·»åŠ æƒ…æŠ¥å¼‚å¸¸æ£€æµ‹å’Œå‘Šè­¦
- [ ] ä¼˜åŒ–å‘é‡åŒ–ç®—æ³•ï¼Œæé«˜æ£€ç´¢ç²¾åº¦
- [ ] å®ç°æƒ…æŠ¥è¶‹åŠ¿åˆ†æå’Œé¢„æµ‹

### 3. é•¿æœŸä¼˜åŒ–ï¼ˆ3-6æœˆï¼‰
- [ ] å¼•å…¥æ›´å¤šäº‘å¹³å°ï¼ˆAWSã€Azureç­‰ï¼‰
- [ ] å®ç°æƒ…æŠ¥è‡ªåŠ¨åˆ†ç±»å’Œæ ‡ç­¾
- [ ] å¼€å‘æƒ…æŠ¥å¯è§†åŒ–ç•Œé¢
- [ ] å®ç°æƒ…æŠ¥çŸ¥è¯†å›¾è°±

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·è”ç³»ï¼š
- äº§å“ç»ç†ï¼š[æ‚¨çš„è”ç³»æ–¹å¼]
- æŠ€æœ¯è´Ÿè´£äººï¼š[æŠ€æœ¯è´Ÿè´£äººè”ç³»æ–¹å¼]

## ğŸ“„ ç›¸å…³æ–‡æ¡£

- [v3.0å¼€å‘å®ŒæˆæŠ¥å‘Š](./v3.0å¼€å‘å®ŒæˆæŠ¥å‘Š.md)
- [Qwenæƒ…æŠ¥ç³»ç»Ÿæ¶æ„](../03-æŠ€æœ¯æ¶æ„/06-Qwenæƒ…æŠ¥ç³»ç»Ÿ.md)
- [è¾©è®ºç³»ç»Ÿæ–‡æ¡£](../03-æŠ€æœ¯æ¶æ„/09-è¾©è®ºç³»ç»Ÿ.md)
- [å››å±‚å­˜å‚¨æ¶æ„](./v3.0_Qwenæƒ…æŠ¥å‘˜å­˜å‚¨é›†æˆæ–¹æ¡ˆ.md)

---

**å®æ–½å®Œæˆæ—¶é—´**: 2025-11-15  
**å®æ–½çŠ¶æ€**: âœ… å®Œæˆ  
**ç‰ˆæœ¬**: v3.1.0

