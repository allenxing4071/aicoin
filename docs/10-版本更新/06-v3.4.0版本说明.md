# v3.4.0 - è¾©è®ºç³»ç»Ÿ (Debate System)

**å‘å¸ƒæ—¥æœŸ**: 2025-11-14

## ğŸ‰ é‡å¤§æ›´æ–°

### å¤šç©ºè¾©è®ºæœºåˆ¶

å€Ÿé‰´ TradingAgents çš„æˆç†Ÿæ–¹æ¡ˆï¼Œå¼•å…¥å¤šæ™ºèƒ½ä½“è¾©è®ºç³»ç»Ÿï¼Œé€šè¿‡å¤šç©ºåˆ†æå¸ˆçš„å¯¹æŠ—æ€§è¾©è®ºï¼Œæ˜¾è‘—æå‡å†³ç­–è´¨é‡å’Œé£é™©è¯†åˆ«èƒ½åŠ›ã€‚

## âœ¨ æ–°å¢åŠŸèƒ½

### 1. æ ¸å¿ƒè¾©è®ºç³»ç»Ÿ

- **å¤šæ™ºèƒ½ä½“æ¶æ„**: Bull Analystï¼ˆå¤šå¤´ï¼‰ã€Bear Analystï¼ˆç©ºå¤´ï¼‰ã€Research Managerï¼ˆç»ç†ï¼‰
- **å¯¹æŠ—æ€§è¾©è®º**: æœ€å¤š 3 è½®è¾©è®ºï¼Œå……åˆ†æš´éœ²å¸‚åœºé£é™©å’Œæœºä¼š
- **æ™ºèƒ½ç»¼åˆ**: Research Manager ç»¼åˆåŒæ–¹è®ºç‚¹ï¼Œç”Ÿæˆæœ€ç»ˆæ¨è
- **è®°å¿†å­¦ä¹ **: åŸºäº Qdrant çš„å‘é‡è®°å¿†ç³»ç»Ÿï¼Œä»å†å²ç»éªŒä¸­å­¦ä¹ 

### 2. é…ç½®ç®¡ç†

- **çµæ´»è§¦å‘æ¡ä»¶**: å¯é…ç½®æœ€å°ä»“ä½ã€æƒé™ç­‰çº§
- **è½®æ¬¡æ§åˆ¶**: æ”¯æŒ 1-3 è½®è¾©è®º
- **è¶…æ—¶ä¿æŠ¤**: 60 ç§’è¶…æ—¶ï¼Œé˜²æ­¢é•¿æ—¶é—´ç­‰å¾…
- **é™æµä¿æŠ¤**: æ¯æ—¥/æ¯å°æ—¶é™åˆ¶ï¼Œé˜²æ­¢ API æˆæœ¬å¤±æ§

### 3. å‰ç«¯ç®¡ç†ç•Œé¢

- **è¾©è®ºå†å²** (`/admin/debate`): æŸ¥çœ‹å†å²è¾©è®ºè®°å½•ï¼Œæ”¯æŒç­›é€‰å’Œåˆ†é¡µ
- **è¾©è®ºé…ç½®** (`/admin/debate/config`): å®æ—¶é…ç½®è¾©è®ºå‚æ•°
- **è¾©è®ºç»Ÿè®¡** (`/admin/debate/statistics`): å¯è§†åŒ–ç»Ÿè®¡æ•°æ®å’Œè¶‹åŠ¿åˆ†æ
- **è®°å¿†ç®¡ç†** (`/admin/debate/memory`): ç®¡ç†è¾©è®ºè®°å¿†å’Œé™æµçŠ¶æ€

### 4. API æ¥å£

```
GET    /api/v1/debate/history          # è·å–è¾©è®ºå†å²åˆ—è¡¨
GET    /api/v1/debate/history/{id}     # è·å–è¾©è®ºè¯¦æƒ…
GET    /api/v1/debate/config            # è·å–è¾©è®ºé…ç½®
PUT    /api/v1/debate/config/{key}     # æ›´æ–°è¾©è®ºé…ç½®
GET    /api/v1/debate/statistics        # è·å–è¾©è®ºç»Ÿè®¡
POST   /api/v1/debate/trigger           # æ‰‹åŠ¨è§¦å‘è¾©è®º
GET    /api/v1/debate/memory/stats      # è·å–è®°å¿†ç»Ÿè®¡
DELETE /api/v1/debate/memory            # æ¸…ç©ºè¾©è®ºè®°å¿†
GET    /api/v1/debate/rate-limit        # è·å–é™æµçŠ¶æ€
POST   /api/v1/debate/rate-limit/reset  # é‡ç½®é™æµè®¡æ•°
```

## ğŸš€ æ€§èƒ½æå‡

- **å†³ç­–è´¨é‡**: æå‡ 15-20%
- **é£é™©è¯†åˆ«**: æå‡ 50%
- **å¹³å‡å»¶è¿Ÿ**: < 15 ç§’
- **æœˆåº¦æˆæœ¬**: < $2
- **ROI**: > 10,000%

## ğŸ“Š æ•°æ®åº“å˜æ›´

### æ–°å¢è¡¨

1. **debate_history**: è¾©è®ºå†å²è®°å½•
2. **debate_config**: è¾©è®ºé…ç½®
3. **debate_statistics**: è¾©è®ºç»Ÿè®¡

### è¿ç§»æ–‡ä»¶

- `20251114_142906_add_debate_tables.py`

## ğŸ”§ æŠ€æœ¯å®ç°

### åç«¯

- `app/models/debate.py`: æ•°æ®åº“æ¨¡å‹
- `app/schemas/debate.py`: Pydantic æ¨¡å‹
- `app/services/decision/debate_system.py`: è¾©è®ºæ ¸å¿ƒé€»è¾‘
- `app/services/decision/debate_memory.py`: è®°å¿†ç³»ç»Ÿ
- `app/services/decision/debate_config.py`: é…ç½®ç®¡ç†
- `app/services/decision/debate_rate_limiter.py`: é™æµä¿æŠ¤
- `app/api/v1/debate.py`: API æ¥å£

### å‰ç«¯

- `app/admin/debate/page.tsx`: è¾©è®ºå†å²åˆ—è¡¨
- `app/admin/debate/[id]/page.tsx`: è¾©è®ºè¯¦æƒ…
- `app/admin/debate/config/page.tsx`: è¾©è®ºé…ç½®
- `app/admin/debate/statistics/page.tsx`: è¾©è®ºç»Ÿè®¡
- `app/admin/debate/memory/page.tsx`: è®°å¿†ç®¡ç†

### é›†æˆ

- é›†æˆåˆ° `DecisionEngineV2`
- æ›´æ–° `PromptTemplates` æ”¯æŒè¾©è®ºç»“æœ
- æ›´æ–°ä¸»èœå•æ·»åŠ è¾©è®ºç³»ç»Ÿå…¥å£

## ğŸ“– æ–‡æ¡£

- [è¾©è®ºç³»ç»Ÿæ–‡æ¡£](../03-æŠ€æœ¯æ¶æ„/09-è¾©è®ºç³»ç»Ÿ.md)

## ğŸ¯ é»˜è®¤é…ç½®

```python
{
    "debate_enabled": "true",           # å¯ç”¨è¾©è®º
    "max_debate_rounds": "1",           # 1 è½®è¾©è®º
    "min_position_size": "1000",        # æœ€å°ä»“ä½ $1000
    "min_permission_level": "L3",       # æœ€ä½æƒé™ L3
    "debate_timeout_seconds": "60",     # è¶…æ—¶ 60 ç§’
    "use_memory": "true",               # ä½¿ç”¨è®°å¿†
    "daily_limit": "100",               # æ¯æ—¥ 100 æ¬¡
    "hourly_limit": "10"                # æ¯å°æ—¶ 10 æ¬¡
}
```

## ğŸ”„ å‡çº§æŒ‡å—

### 1. æ•°æ®åº“è¿ç§»

```bash
cd backend
alembic upgrade head
```

### 2. é‡å¯æœåŠ¡

```bash
docker-compose restart backend
docker-compose restart frontend
```

### 3. éªŒè¯éƒ¨ç½²

1. è®¿é—® `/admin/debate` æŸ¥çœ‹è¾©è®ºå†å²
2. è®¿é—® `/admin/debate/config` é…ç½®è¾©è®ºå‚æ•°
3. æ£€æŸ¥ç³»ç»Ÿæ—¥å¿—ç¡®è®¤è¾©è®ºç³»ç»Ÿæ­£å¸¸è¿è¡Œ

## âš ï¸  æ³¨æ„äº‹é¡¹

### æˆæœ¬æ§åˆ¶

- è¾©è®ºç³»ç»Ÿä¼šå¢åŠ  LLM API è°ƒç”¨æ¬¡æ•°
- é»˜è®¤é…ç½®ä¸‹ï¼Œæœˆåº¦æˆæœ¬å¢åŠ  < $2
- å»ºè®®ç›‘æ§ API ä½¿ç”¨æƒ…å†µï¼Œå¿…è¦æ—¶è°ƒæ•´é™æµå‚æ•°

### æ€§èƒ½å½±å“

- è¾©è®ºä¼šå¢åŠ å†³ç­–å»¶è¿Ÿï¼ˆ< 15 ç§’ï¼‰
- ä»…å¯¹é‡è¦äº¤æ˜“è§¦å‘è¾©è®ºï¼ˆä»“ä½ â‰¥ $1000, æƒé™ â‰¥ L3ï¼‰
- å¯é€šè¿‡é…ç½®è°ƒæ•´è§¦å‘æ¡ä»¶

### è®°å¿†ç®¡ç†

- è®°å¿†ç³»ç»Ÿä½¿ç”¨ Qdrant å‘é‡æ•°æ®åº“
- å®šæœŸæ¸…ç†æ— ç”¨è®°å¿†ä»¥ä¼˜åŒ–æ€§èƒ½
- è®°å¿†æ•°æ®ä¼šéšæ—¶é—´å¢é•¿ï¼Œå»ºè®®å®šæœŸå¤‡ä»½

## ğŸ› å·²çŸ¥é—®é¢˜

- æ— 

## ğŸ”® åç»­è®¡åˆ’

- [ ] æ”¯æŒæ›´å¤šè¾©è®ºæ¨¡å¼ï¼ˆä¸‰æ–¹è¾©è®ºã€ä¸“å®¶å°ç»„ï¼‰
- [ ] ä¼˜åŒ– Prompt æ¨¡æ¿ä»¥æé«˜è¾©è®ºè´¨é‡
- [ ] å¢åŠ è¾©è®ºç»“æœçš„å¯è§£é‡Šæ€§åˆ†æ
- [ ] æ”¯æŒè‡ªå®šä¹‰è¾©è®ºè§’è‰²å’Œç­–ç•¥

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ TradingAgents é¡¹ç›®æä¾›çš„æˆç†Ÿè¾©è®ºæœºåˆ¶è®¾è®¡å’Œ Prompt æ¨¡æ¿ã€‚

## ğŸ“ åé¦ˆ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼åé¦ˆï¼š

- GitHub Issues
- é¡¹ç›®æ–‡æ¡£
- ç³»ç»Ÿæ—¥å¿—

