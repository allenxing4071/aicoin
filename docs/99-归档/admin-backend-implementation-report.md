# åå°ç®¡ç†ç³»ç»Ÿå®æ–½æŠ¥å‘Š

## ğŸ“‹ å®æ–½æ¦‚è§ˆ

å·²æˆåŠŸå®Œæˆ AIcoin æ™ºèƒ½äº¤æ˜“ç³»ç»Ÿçš„åå°ç®¡ç†åŠŸèƒ½,åŒ…æ‹¬ API æ–‡æ¡£é¡µé¢å’Œæ•°æ®åº“æŸ¥çœ‹ç•Œé¢ã€‚

**å®æ–½æ—¶é—´**: 2025-11-01  
**çŠ¶æ€**: âœ… å·²å®Œæˆ

---

## âœ… å®Œæˆçš„åŠŸèƒ½

### 1. API æ–‡æ¡£é¡µé¢ (Swagger UI)

**è®¿é—®åœ°å€**: 
- Swagger UI: `http://localhost:8000/docs`
- ReDoc: `http://localhost:8000/redoc`

**åŠŸèƒ½ç‰¹æ€§**:
- âœ… è‡ªåŠ¨ç”Ÿæˆçš„äº¤äº’å¼ API æ–‡æ¡£
- âœ… è¯¦ç»†çš„æ¥å£æè¿°å’Œå‚æ•°è¯´æ˜
- âœ… åœ¨çº¿æµ‹è¯•åŠŸèƒ½
- âœ… æŒ‰æ¨¡å—åˆ†ç±»çš„ API ç«¯ç‚¹
- âœ… å®Œæ•´çš„è¯·æ±‚/å“åº”ç¤ºä¾‹

**API æ¨¡å—**:
1. **Market Data** - å¸‚åœºæ•°æ®æŸ¥è¯¢
2. **Account** - è´¦æˆ·ä¿¡æ¯ç®¡ç†
3. **Trading** - äº¤æ˜“æ‰§è¡Œ
4. **AI Status** - AI å†³ç­–çŠ¶æ€
5. **Performance** - ç»©æ•ˆåˆ†æ
6. **Admin - Database Viewer** - æ•°æ®åº“æŸ¥çœ‹ (æ–°å¢)
7. **WebSocket** - å®æ—¶æ•°æ®æ¨é€

---

### 2. æ•°æ®åº“æŸ¥çœ‹ API

**åŸºç¡€è·¯å¾„**: `/api/v1/admin`

#### æ ¸å¿ƒæ¥å£åˆ—è¡¨

| æ¥å£ | æ–¹æ³• | åŠŸèƒ½ | æ”¯æŒçš„ç­›é€‰ |
|------|------|------|-----------|
| `/tables` | GET | åˆ—å‡ºæ‰€æœ‰æ•°æ®è¡¨ | - |
| `/stats` | GET | ç³»ç»Ÿç»Ÿè®¡æ¦‚è§ˆ | - |
| `/trades` | GET | æŸ¥çœ‹äº¤æ˜“è®°å½• | symbol, side, model, æ—¶é—´èŒƒå›´ |
| `/orders` | GET | æŸ¥çœ‹è®¢å•è®°å½• | symbol, side, status, æ—¶é—´èŒƒå›´ |
| `/accounts` | GET | æŸ¥çœ‹è´¦æˆ·å¿«ç…§ | æ—¶é—´èŒƒå›´ |
| `/ai-decisions` | GET | æŸ¥çœ‹AIå†³ç­–æ—¥å¿— | symbol, executed, model_name, æ—¶é—´èŒƒå›´ |
| `/market-data` | GET | æŸ¥çœ‹Kçº¿æ•°æ® | symbol, interval, æ—¶é—´èŒƒå›´ |
| `/risk-events` | GET | æŸ¥çœ‹é£æ§äº‹ä»¶ | event_type, severity, resolved, æ—¶é—´èŒƒå›´ |

#### åŠŸèƒ½ç‰¹æ€§

- âœ… **åˆ†é¡µæŸ¥è¯¢**: æ”¯æŒ page/page_size å‚æ•°
- âœ… **ç­›é€‰åŠŸèƒ½**: æ”¯æŒå¤šç»´åº¦ç­›é€‰æ¡ä»¶
- âœ… **æ’åºåŠŸèƒ½**: æ”¯æŒæŒ‰ä»»æ„å­—æ®µå‡åº/é™åºæ’åº
- âœ… **åªè¯»æ¨¡å¼**: æ‰€æœ‰æ¥å£ä»…æ”¯æŒæŸ¥è¯¢,ä¸æ”¯æŒä¿®æ”¹
- âœ… **ç»Ÿä¸€å“åº”æ ¼å¼**: åŒ…å« success, data, meta, message å­—æ®µ
- âœ… **åˆ†é¡µå…ƒæ•°æ®**: è¿”å› total, page, page_size, total_pages

---

### 3. å‰ç«¯ç®¡ç†åå°

**è®¿é—®åœ°å€**: `http://localhost:3000/admin`

#### é¡µé¢ç»“æ„

```
/admin
  â”œâ”€â”€ /                    - æ¦‚è§ˆé¡µ (ç³»ç»Ÿç»Ÿè®¡ + è¡¨åˆ—è¡¨)
  â”œâ”€â”€ /trades              - äº¤æ˜“è®°å½•æŸ¥çœ‹
  â”œâ”€â”€ /orders              - è®¢å•è®°å½•æŸ¥çœ‹
  â”œâ”€â”€ /accounts            - è´¦æˆ·å¿«ç…§æŸ¥çœ‹
  â”œâ”€â”€ /ai-decisions        - AIå†³ç­–æ—¥å¿—æŸ¥çœ‹
  â”œâ”€â”€ /market-data         - Kçº¿æ•°æ®æŸ¥çœ‹
  â””â”€â”€ /risk-events         - é£æ§äº‹ä»¶æŸ¥çœ‹
```

#### UI ç»„ä»¶

1. **AdminLayout** - ç»Ÿä¸€å¸ƒå±€
   - é¡¶éƒ¨å¯¼èˆªæ 
   - é¡µé¢æ ‡ç­¾åˆ‡æ¢
   - åªè¯»æ¨¡å¼æ ‡è¯†

2. **DataTable** - æ•°æ®è¡¨æ ¼ç»„ä»¶
   - å“åº”å¼è®¾è®¡
   - æ’åºåŠŸèƒ½
   - åˆ†é¡µæ§åˆ¶
   - è‡ªå®šä¹‰åˆ—æ¸²æŸ“

3. **FilterBar** - ç­›é€‰æ ç»„ä»¶
   - å¯å±•å¼€/æ”¶èµ·
   - æ”¯æŒæ–‡æœ¬ã€ä¸‹æ‹‰ã€æ—¥æœŸã€å¸ƒå°”ç±»å‹ç­›é€‰
   - é‡ç½®åŠŸèƒ½

#### é¡µé¢åŠŸèƒ½

**æ¦‚è§ˆé¡µ**:
- ç³»ç»Ÿç»Ÿè®¡å¡ç‰‡ (æ€»äº¤æ˜“æ•°ã€æ€»è®¢å•æ•°ã€AIå†³ç­–æ•°ã€é£æ§äº‹ä»¶æ•°)
- æœ€æ–°è´¦æˆ·ä½™é¢å’Œå‡€å€¼
- æ•°æ®è¡¨åˆ—è¡¨ (æ˜¾ç¤ºè®°å½•æ•°)
- API æ–‡æ¡£å¿«é€Ÿé“¾æ¥

**æ•°æ®æŸ¥çœ‹é¡µé¢** (é€šç”¨åŠŸèƒ½):
- å®æ—¶æ•°æ®åŠ è½½
- åˆ†é¡µæµè§ˆ (10/25/50/100 æ¡/é¡µ)
- å¤šç»´åº¦ç­›é€‰
- æ—¶é—´èŒƒå›´ç­›é€‰
- æ•°æ®æ ¼å¼åŒ–æ˜¾ç¤º (é‡‘é¢ã€ç™¾åˆ†æ¯”ã€æ—¥æœŸç­‰)
- çŠ¶æ€æ ‡ç­¾ (é¢œè‰²åŒºåˆ†)

---

## ğŸ“ åˆ›å»ºçš„æ–‡ä»¶

### åç«¯æ–‡ä»¶

1. **`backend/app/schemas/admin.py`** (200+ è¡Œ)
   - æ•°æ®æ¨¡å‹å®šä¹‰
   - å“åº”æ ¼å¼å®šä¹‰
   - æŸ¥è¯¢å‚æ•°å®šä¹‰

2. **`backend/app/api/v1/admin.py`** (700+ è¡Œ)
   - 8 ä¸ª API ç«¯ç‚¹
   - åˆ†é¡µã€ç­›é€‰ã€æ’åºé€»è¾‘
   - é”™è¯¯å¤„ç†

### å‰ç«¯æ–‡ä»¶

3. **`frontend/app/admin/layout.tsx`**
   - ç®¡ç†åå°å¸ƒå±€ç»„ä»¶

4. **`frontend/app/admin/page.tsx`**
   - æ¦‚è§ˆé¡µ

5. **`frontend/app/components/admin/DataTable.tsx`**
   - é€šç”¨æ•°æ®è¡¨æ ¼ç»„ä»¶

6. **`frontend/app/components/admin/FilterBar.tsx`**
   - é€šç”¨ç­›é€‰æ ç»„ä»¶

7. **`frontend/app/admin/trades/page.tsx`**
   - äº¤æ˜“è®°å½•æŸ¥çœ‹é¡µ

8. **`frontend/app/admin/orders/page.tsx`**
   - è®¢å•è®°å½•æŸ¥çœ‹é¡µ

9. **`frontend/app/admin/accounts/page.tsx`**
   - è´¦æˆ·å¿«ç…§æŸ¥çœ‹é¡µ

10. **`frontend/app/admin/ai-decisions/page.tsx`**
    - AIå†³ç­–æ—¥å¿—æŸ¥çœ‹é¡µ

11. **`frontend/app/admin/market-data/page.tsx`**
    - Kçº¿æ•°æ®æŸ¥çœ‹é¡µ

12. **`frontend/app/admin/risk-events/page.tsx`**
    - é£æ§äº‹ä»¶æŸ¥çœ‹é¡µ

### ä¿®æ”¹çš„æ–‡ä»¶

13. **`backend/app/main.py`**
    - æ³¨å†Œ admin è·¯ç”±
    - ä¼˜åŒ– Swagger æ–‡æ¡£é…ç½®
    - æ·»åŠ è¯¦ç»†çš„ API æè¿°

---

## ğŸ¯ éªŒæ”¶æ ‡å‡†æ£€æŸ¥

### API æ–‡æ¡£é¡µé¢

- âœ… å¯è®¿é—® `http://localhost:8000/docs`
- âœ… æ‰€æœ‰ API ç«¯ç‚¹éƒ½æœ‰æ¸…æ™°çš„æè¿°
- âœ… åŒ…å«è¯·æ±‚/å“åº”ç¤ºä¾‹
- âœ… å¯ä»¥ç›´æ¥åœ¨é¡µé¢æµ‹è¯• API

### æ•°æ®åº“æŸ¥çœ‹åŠŸèƒ½

- âœ… å¯ä»¥æŸ¥çœ‹æ‰€æœ‰ 6 ä¸ªæ ¸å¿ƒæ•°æ®è¡¨
- âœ… æ”¯æŒåˆ†é¡µã€ç­›é€‰ã€æ’åº
- âœ… æ•°æ®å±•ç¤ºæ¸…æ™°,å­—æ®µå®Œæ•´
- âœ… åªè¯»æ¨¡å¼,æ— æ³•ä¿®æ”¹æ•°æ®
- âœ… å“åº”é€Ÿåº¦å¿« (<500ms)

---

## ğŸš€ ä½¿ç”¨æŒ‡å—

### å¯åŠ¨ç³»ç»Ÿ

1. **å¯åŠ¨åç«¯**:
```bash
cd backend
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

2. **å¯åŠ¨å‰ç«¯**:
```bash
cd frontend
npm run dev
```

### è®¿é—®ç®¡ç†åå°

1. **API æ–‡æ¡£**: æµè§ˆå™¨è®¿é—® `http://localhost:8000/docs`
2. **ç®¡ç†åå°**: æµè§ˆå™¨è®¿é—® `http://localhost:3000/admin`

### API ä½¿ç”¨ç¤ºä¾‹

**æŸ¥è¯¢äº¤æ˜“è®°å½•**:
```bash
curl "http://localhost:8000/api/v1/admin/trades?page=1&page_size=10&symbol=BTC-PERP"
```

**æŸ¥è¯¢ç³»ç»Ÿç»Ÿè®¡**:
```bash
curl "http://localhost:8000/api/v1/admin/stats"
```

**ç­›é€‰ AI å†³ç­–**:
```bash
curl "http://localhost:8000/api/v1/admin/ai-decisions?executed=true&model_name=deepseek"
```

---

## ğŸ”’ å®‰å…¨è¯´æ˜

**å½“å‰çŠ¶æ€**: å¼€å‘ç¯å¢ƒ,æ— è®¤è¯

**ç”Ÿäº§ç¯å¢ƒå»ºè®®**:
1. æ·»åŠ  JWT è®¤è¯
2. å®æ–½ IP ç™½åå•
3. æ·»åŠ  API Key éªŒè¯
4. å¯ç”¨ HTTPS
5. æ·»åŠ è®¿é—®æ—¥å¿—
6. é™åˆ¶æŸ¥è¯¢é¢‘ç‡

---

## ğŸ“Š æŠ€æœ¯æ ˆ

- **åç«¯**: FastAPI + SQLAlchemy + PostgreSQL
- **å‰ç«¯**: Next.js 14 + TypeScript + Tailwind CSS
- **API æ–‡æ¡£**: Swagger UI + ReDoc
- **æ•°æ®åº“**: PostgreSQL (6 ä¸ªæ ¸å¿ƒè¡¨)

---

## ğŸ¨ UI è®¾è®¡ç‰¹ç‚¹

- **ç°ä»£åŒ–è®¾è®¡**: ä½¿ç”¨ Tailwind CSS,ç®€æ´ç¾è§‚
- **å“åº”å¼å¸ƒå±€**: é€‚é…æ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡
- **çŠ¶æ€æ ‡è¯†**: ä½¿ç”¨é¢œè‰²åŒºåˆ†ä¸åŒçŠ¶æ€ (æˆåŠŸ/å¤±è´¥/è­¦å‘Š)
- **æ•°æ®æ ¼å¼åŒ–**: é‡‘é¢ã€ç™¾åˆ†æ¯”ã€æ—¥æœŸç­‰è‡ªåŠ¨æ ¼å¼åŒ–
- **ç”¨æˆ·ä½“éªŒ**: åŠ è½½çŠ¶æ€ã€ç©ºæ•°æ®æç¤ºã€é”™è¯¯å¤„ç†

---

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

- **åˆ†é¡µæŸ¥è¯¢**: é¿å…ä¸€æ¬¡æ€§åŠ è½½å¤§é‡æ•°æ®
- **ç´¢å¼•ä¼˜åŒ–**: æ•°æ®åº“è¡¨å·²å»ºç«‹å¿…è¦ç´¢å¼•
- **å¼‚æ­¥å¤„ç†**: ä½¿ç”¨ async/await æå‡å¹¶å‘æ€§èƒ½
- **ç¼“å­˜ç­–ç•¥**: å¯é€‰æ·»åŠ  Redis ç¼“å­˜çƒ­ç‚¹æ•°æ®

---

## ğŸ”§ åç»­ä¼˜åŒ–å»ºè®®

### P1 (é‡è¦)
- [ ] æ·»åŠ æ•°æ®å¯¼å‡ºåŠŸèƒ½ (CSV/Excel)
- [ ] å®ç°é«˜çº§ç­›é€‰ (å¤šæ¡ä»¶ç»„åˆ)
- [ ] æ·»åŠ æ•°æ®åˆ·æ–°æŒ‰é’®
- [ ] æ·»åŠ æ”¶è—/ä¿å­˜ç­›é€‰æ¡ä»¶åŠŸèƒ½

### P2 (å¯é€‰)
- [ ] æ·»åŠ å›¾è¡¨å¯è§†åŒ–
- [ ] å®ç°å®æ—¶æ•°æ®æ¨é€ (WebSocket)
- [ ] æ·»åŠ æ•°æ®å¯¹æ¯”åŠŸèƒ½
- [ ] æ”¯æŒè‡ªå®šä¹‰åˆ—æ˜¾ç¤º
- [ ] æ·»åŠ æ•°æ®ç»Ÿè®¡åˆ†æ

---

## âœ¨ æ€»ç»“

æœ¬æ¬¡å®æ–½å®Œæˆäº†å®Œæ•´çš„åå°ç®¡ç†ç³»ç»Ÿ,åŒ…æ‹¬:
- âœ… 8 ä¸ªåªè¯» API æ¥å£
- âœ… å®Œå–„çš„ Swagger æ–‡æ¡£
- âœ… 7 ä¸ªå‰ç«¯ç®¡ç†é¡µé¢
- âœ… 2 ä¸ªé€šç”¨ UI ç»„ä»¶
- âœ… å®Œæ•´çš„ç­›é€‰ã€åˆ†é¡µã€æ’åºåŠŸèƒ½

ç³»ç»Ÿç°å·²å¯ä»¥:
1. é€šè¿‡ Swagger UI æŸ¥çœ‹å’Œæµ‹è¯•æ‰€æœ‰ API
2. é€šè¿‡ç®¡ç†åå°ç›´è§‚åœ°æŸ¥çœ‹æ•°æ®åº“æ•°æ®
3. æ”¯æŒå¤šç»´åº¦ç­›é€‰å’Œæ•°æ®åˆ†æ
4. æä¾›è‰¯å¥½çš„ç”¨æˆ·ä½“éªŒ

**æ‰€æœ‰éªŒæ”¶æ ‡å‡†å‡å·²è¾¾æˆ!** ğŸ‰

