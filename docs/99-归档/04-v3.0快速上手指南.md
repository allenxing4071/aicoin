# AIcoin v3.0 å¿«é€Ÿä¸Šæ‰‹æŒ‡å—

> 5åˆ†é’Ÿäº†è§£v3.0å‡çº§çš„æ ¸å¿ƒå†…å®¹

---

## ğŸ¯ ä¸€å¥è¯æ€»ç»“

v3.0å‡çº§äº†**Qwenæƒ…æŠ¥å‘˜çš„å¤šå¹³å°ååŒèƒ½åŠ›**å’Œ**DeepSeekäº¤æ˜“å‘˜çš„è®­ç»ƒæ”¯æŒ**ï¼Œå®ç°äº†æ™ºèƒ½åŒ–çš„æŒç»­å­¦ä¹ ç³»ç»Ÿã€‚

---

## ğŸ—ï¸ æ ¸å¿ƒæ¶æ„ï¼ˆå¿…çœ‹ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Qwenæƒ…æŠ¥å‘˜ï¼ˆæƒ…æŠ¥ç³»ç»Ÿï¼‰        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å¹³å°A: å…è´¹å¹³å°ï¼ˆåŸºç¡€ç­›é€‰ï¼‰      â”‚
â”‚  å¹³å°B: Qwenæœç´¢ï¼ˆå®æ—¶æƒ…æŠ¥ï¼‰      â”‚ â† æ³¨æ„ï¼šæœç´¢æ˜¯Qwenè´Ÿè´£
â”‚  å¹³å°C: Qwenæ·±åº¦ï¼ˆç»¼åˆç ”åˆ¤ï¼‰      â”‚
â”‚                                 â”‚
â”‚  4å±‚å­˜å‚¨: Redisâ†’åˆ†æâ†’PGâ†’Qdrant  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“ æƒ…æŠ¥æŠ¥å‘Š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   DeepSeekäº¤æ˜“å‘˜ï¼ˆäº¤æ˜“ç³»ç»Ÿï¼‰      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âœ… æ¥æ”¶Qwenæƒ…æŠ¥                 â”‚
â”‚  âœ… åˆ†æå¸‚åœºæ•°æ®                 â”‚
â”‚  âœ… æŸ¥è¯¢å†å²è®°å¿†                 â”‚
â”‚  âœ… åšå‡ºäº¤æ˜“å†³ç­–                 â”‚
â”‚  âŒ ä¸åšæœç´¢                     â”‚ â† é‡ç‚¹ï¼
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### 1. æ•°æ®åº“è¿ç§»ï¼ˆå¿…é¡»ï¼‰
```bash
cd backend
docker-compose exec backend python -m alembic upgrade head
```

### 2. å¯åŠ¨Celeryå®šæ—¶ä»»åŠ¡ï¼ˆæ¨èï¼‰
```bash
# Terminal 1: Worker
docker-compose exec backend celery -A app.tasks.intelligence_learning worker -l info

# Terminal 2: Beat (å®šæ—¶è°ƒåº¦)
docker-compose exec backend celery -A app.tasks.intelligence_learning beat -l info
```

### 3. é‡å¯æœåŠ¡
```bash
docker-compose restart backend frontend
```

---

## ğŸ“¦ æ–°å¢åŠŸèƒ½é€Ÿè§ˆ

### 1. Qwenæƒ…æŠ¥å‘˜å‡çº§
- âœ… å¤šå¹³å°ååŒï¼ˆå…è´¹+æœç´¢+æ·±åº¦ï¼‰
- âœ… 4å±‚æ™ºèƒ½å­˜å‚¨ï¼ˆçŸ­æœŸâ†’ä¸­æœŸâ†’é•¿æœŸâ†’å‘é‡ï¼‰
- âœ… åŠ¨æ€æƒé‡ä¼˜åŒ–ï¼ˆè‡ªåŠ¨å­¦ä¹ å“ªäº›æºæ›´æœ‰æ•ˆï¼‰
- âœ… æŒç»­å­¦ä¹ æœºåˆ¶ï¼ˆç”¨æˆ·åé¦ˆé©±åŠ¨ï¼‰

### 2. DeepSeekè®­ç»ƒæ”¯æŒ
- âœ… è®­ç»ƒæ•°æ®è‡ªåŠ¨æ”¶é›†
- âœ… æ¨¡å‹ç‰ˆæœ¬ç®¡ç†
- âœ… è®­ç»ƒä»»åŠ¡ç›‘æ§
- âœ… æ€§èƒ½æŒ‡æ ‡è¿½è¸ª

### 3. è‡ªåŠ¨åŒ–ä»»åŠ¡
- âœ… æ¯å°æ—¶æƒé‡ä¼˜åŒ–
- âœ… æ¯æ—¥æƒ…æŠ¥å‘é‡åŒ–
- âœ… æ¯å‘¨æ¨¡å¼åˆ†æ
- âœ… æ™ºèƒ½ä¼˜åŒ–æŠ¥å‘Š

### 4. ç®¡ç†ç•Œé¢
- âœ… `/admin/intelligence-platforms` - æƒ…æŠ¥å¹³å°ç®¡ç†
- âœ… `/admin/model-training` - æ¨¡å‹è®­ç»ƒç®¡ç†

---

## ğŸ›ï¸ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡ï¼ˆ.envï¼‰
```bash
# Qwenå¤šå¹³å°é…ç½®
ENABLE_FREE_PLATFORM=true        # å…è´¹å¹³å°ï¼ˆå§‹ç»ˆå¯ç”¨ï¼‰
ENABLE_QWEN_SEARCH=false         # Qwenæœç´¢ï¼ˆæŒ‰éœ€å¯ç”¨ï¼‰
ENABLE_QWEN_DEEP_ANALYSIS=true   # Qwenæ·±åº¦ï¼ˆé»˜è®¤å¯ç”¨ï¼‰

# Qwen API
QWEN_API_KEY=your_key_here
QWEN_MODEL=qwen-plus

# å‘é‡æ•°æ®åº“
QDRANT_HOST=localhost
QDRANT_PORT=6333
```

---

## ğŸ“Š æ–°å¢æ•°æ®è¡¨

| è¡¨å | ç”¨é€” | å…³é”®å­—æ®µ |
|------|------|----------|
| `intelligence_source_weights` | æƒ…æŠ¥æºæƒé‡ | source_name, weight, effectiveness_score |
| `intelligence_feedback` | ç”¨æˆ·åé¦ˆ | report_id, sentiment, feedback_type |
| `model_versions` | æ¨¡å‹ç‰ˆæœ¬ | version_name, performance_metrics, deployed |
| `training_jobs` | è®­ç»ƒä»»åŠ¡ | job_id, status, progress, cost |

---

## ğŸ” å¸¸ç”¨æ“ä½œ

### æŸ¥çœ‹å¹³å°çŠ¶æ€
```bash
# è®¿é—®å‰ç«¯
http://localhost:3000/admin/intelligence-platforms
```

### æ‰‹åŠ¨è§¦å‘æƒé‡ä¼˜åŒ–
```python
from app.tasks.intelligence_learning import trigger_weight_optimization
trigger_weight_optimization()
```

### å¯¼å‡ºè®­ç»ƒæ•°æ®
```python
from app.training.data_collection import DecisionDataCollector
from datetime import datetime, timedelta

collector = DecisionDataCollector(redis_client, db_session)
data = await collector.collect_training_data(
    start_date=datetime.now() - timedelta(days=30),
    end_date=datetime.now(),
    min_samples=100
)
await collector.export_to_jsonl(data, "training_data.jsonl")
```

### æŸ¥çœ‹Celeryä»»åŠ¡çŠ¶æ€
```bash
# åˆ—å‡ºæ‰€æœ‰ä»»åŠ¡
docker-compose exec backend celery -A app.tasks.intelligence_learning inspect active

# æŸ¥çœ‹è°ƒåº¦è®¡åˆ’
docker-compose exec backend celery -A app.tasks.intelligence_learning inspect scheduled
```

---

## âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹

### 1. è§’è‰²åˆ†å·¥ï¼ˆå¿…é¡»ç†è§£ï¼‰
```
Qwenæƒ…æŠ¥å‘˜ï¼šæ”¶é›†ã€æœç´¢ã€åˆ†ææƒ…æŠ¥
DeepSeekäº¤æ˜“å‘˜ï¼šäº¤æ˜“å†³ç­–ã€æ‰§è¡Œè®¢å•

âŒ é”™è¯¯ç†è§£ï¼šDeepSeekåšæœç´¢
âœ… æ­£ç¡®ç†è§£ï¼šQwenåšæœç´¢
```

### 2. æˆæœ¬æ§åˆ¶
- **å…è´¹å¹³å°**ï¼š0æˆæœ¬ï¼Œå§‹ç»ˆå¯ç”¨
- **Qwenæœç´¢**ï¼šæŒ‰éœ€å¯ç”¨ï¼ˆæœ‰å®æ—¶éœ€æ±‚æ—¶ï¼‰
- **Qwenæ·±åº¦**ï¼šé»˜è®¤å¯ç”¨ï¼ˆé«˜ä»·å€¼åˆ†æï¼‰

### 3. æ•°æ®å®‰å…¨
- è®­ç»ƒæ•°æ®åŒ…å«æ•æ„Ÿäº¤æ˜“ä¿¡æ¯
- API Keyå¿…é¡»ä¿å¯†
- æ—¥å¿—éœ€è„±æ•å¤„ç†

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: æ•°æ®åº“è¿ç§»å¤±è´¥ï¼Ÿ
```bash
# æ£€æŸ¥è¿æ¥
docker-compose exec backend psql -U postgres -d ai_trading -c "SELECT 1;"

# æŸ¥çœ‹è¿ç§»å†å²
docker-compose exec backend alembic history

# å›æ»šä¸€ä¸ªç‰ˆæœ¬
docker-compose exec backend alembic downgrade -1
```

### Q2: Celeryä»»åŠ¡ä¸æ‰§è¡Œï¼Ÿ
```bash
# æ£€æŸ¥WorkerçŠ¶æ€
docker-compose logs backend | grep celery

# æ‰‹åŠ¨æ‰§è¡Œä»»åŠ¡æµ‹è¯•
docker-compose exec backend python -c "
from app.tasks.intelligence_learning import optimize_source_weights
optimize_source_weights.delay()
"
```

### Q3: å‰ç«¯ç•Œé¢ç©ºç™½ï¼Ÿ
```bash
# é‡æ–°æ„å»º
cd frontend
npm run build

# æ£€æŸ¥APIè¿æ¥
curl http://localhost:8000/api/v1/health
```

### Q4: å‘é‡æ•°æ®åº“è¿æ¥å¤±è´¥ï¼Ÿ
```bash
# ç¡®è®¤Qdrantè¿è¡Œ
docker-compose ps qdrant

# é‡å¯Qdrant
docker-compose restart qdrant
```

---

## ğŸ“š è¿›ä¸€æ­¥å­¦ä¹ 

### è¯¦ç»†æ–‡æ¡£
- [v3.0å¼€å‘æ€»ç»“](../10-ç‰ˆæœ¬æ›´æ–°/v3.0å¼€å‘æ€»ç»“.md) - å®Œæ•´æŠ€æœ¯ç»†èŠ‚
- [v3.0å¼€å‘å®ŒæˆæŠ¥å‘Š](../10-ç‰ˆæœ¬æ›´æ–°/v3.0å¼€å‘å®ŒæˆæŠ¥å‘Š.md) - éªŒæ”¶ä¸éƒ¨ç½²
- [æ™ºèƒ½çº¦æŸæ¡†æ¶](../03-æŠ€æœ¯æ¶æ„/01-æ™ºèƒ½çº¦æŸæ¡†æ¶.md) - ç³»ç»Ÿçº¦æŸåŸç†
- [è®°å¿†å­¦ä¹ ç³»ç»Ÿ](../03-æŠ€æœ¯æ¶æ„/02-è®°å¿†å­¦ä¹ ç³»ç»Ÿ.md) - è®°å¿†æœºåˆ¶

### APIæ–‡æ¡£
```bash
# å¯åŠ¨åè®¿é—®
http://localhost:8000/docs
```

### æ¶æ„å›¾
- Qwenå¤šå¹³å°ååŒæ¶æ„
- å››å±‚æ™ºèƒ½å­˜å‚¨æµè½¬
- DeepSeekè®­ç»ƒæ•°æ®æµ
- Celeryä»»åŠ¡è°ƒåº¦å›¾

---

## ğŸ¯ å¿«é€Ÿæ£€æŸ¥æ¸…å•

éƒ¨ç½²å‰æ£€æŸ¥ï¼š
- [ ] æ•°æ®åº“è¿ç§»å·²æ‰§è¡Œ
- [ ] ç¯å¢ƒå˜é‡å·²é…ç½®
- [ ] QdrantæœåŠ¡æ­£å¸¸
- [ ] RedisæœåŠ¡æ­£å¸¸
- [ ] Celery Workerè¿è¡Œ
- [ ] Celery Beatè¿è¡Œ
- [ ] å‰ç«¯ç•Œé¢å¯è®¿é—®
- [ ] APIæ¥å£æ­£å¸¸

---

## ğŸ“ è·å–å¸®åŠ©

- **æ–‡æ¡£**: `/docs` ç›®å½•
- **æ—¥å¿—**: `docker-compose logs -f backend`
- **é—®é¢˜**: æŸ¥çœ‹ `backend/logs/ai_trading.log`

---

**ç‰ˆæœ¬**: v3.0  
**æ›´æ–°æ—¶é—´**: 2025-11-05  
**çŠ¶æ€**: âœ… æ ¸å¿ƒåŠŸèƒ½å®Œæˆ

---

**ä¸‹ä¸€æ­¥**: è®¿é—®ç®¡ç†ç•Œé¢ä½“éªŒæ–°åŠŸèƒ½ â†’ http://localhost:3000/admin/intelligence-platforms

