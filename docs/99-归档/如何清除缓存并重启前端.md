# 🔧 如何清除缓存并重启前端

## 问题现象
浏览器控制台显示错误：
```
GET http://localhost:8000/admin/database/stats 404 (Not Found)
```

URL缺少 `/api/v1` 前缀，这是因为浏览器和Next.js缓存了旧代码。

---

## ✅ 解决方案（请按步骤操作）

### 步骤1: 停止当前的前端开发服务器
在运行 `npm run dev` 的终端窗口中按 `Ctrl + C` 停止服务器

### 步骤2: 已为您清除了Next.js缓存 ✅
我已经执行了以下命令：
```bash
cd /Users/xinghailong/Documents/soft/AIcoin/frontend
rm -rf .next
rm -rf node_modules/.cache
```

### 步骤3: 重新启动前端开发服务器
```bash
cd /Users/xinghailong/Documents/soft/AIcoin/frontend
npm run dev
```

### 步骤4: 在浏览器中硬刷新
打开 http://localhost:3000/admin/database 后：

**Mac用户**: 按 `Cmd + Shift + R`  
**Windows用户**: 按 `Ctrl + Shift + R`

或者：
1. 打开开发者工具 (F12)
2. 右键点击刷新按钮
3. 选择"清空缓存并硬刷新"

---

## 🎯 验证成功的标志

### ✅ 正确的API请求
控制台Network标签应该显示：
```
GET http://localhost:8000/api/v1/admin/database/stats
Status: 200 OK
```

### ✅ 页面正常显示
- 数据库连接信息卡片显示
- 左侧显示10张数据表
- 无404错误

### ✅ 控制台无错误
- 没有 404 Not Found
- 没有 ERR_NETWORK
- 没有 ERR_CONNECTION_REFUSED

---

## 📋 如果仍有问题

### 方案A: 使用隐私/无痕模式
1. 打开新的隐私浏览窗口 (Cmd+Shift+N 或 Ctrl+Shift+N)
2. 访问 http://localhost:3000/admin/database
3. 这样可以完全绕过浏览器缓存

### 方案B: 清除浏览器所有缓存
Chrome设置 → 隐私和安全 → 清除浏览数据
- 选择"缓存的图片和文件"
- 时间范围选择"全部"
- 点击"清除数据"

### 方案C: 检查Network标签
1. 打开开发者工具 (F12)
2. 切换到 Network 标签
3. 勾选 "Disable cache"
4. 刷新页面

---

## 🔍 后端API验证

后端API是正常的，可以通过以下命令验证：

```bash
# 测试数据库统计接口
curl http://localhost:8000/api/v1/admin/database/stats

# 预期输出:
# {
#   "database_name": "aicoin",
#   "database_size": "8373 kB",
#   "total_tables": 10,
#   "connection_status": "已连接"
# }
```

---

## 📝 技术说明

### 问题根源
1. Next.js的 `.next` 目录缓存了编译结果
2. 浏览器的Service Worker和HTTP缓存保留了旧的JavaScript文件
3. 即使代码更新，浏览器仍然使用缓存的旧版本

### 解决原理
1. 删除 `.next` 目录强制Next.js重新编译
2. 删除 `node_modules/.cache` 清除Node.js模块缓存
3. 重启开发服务器生成新的编译结果
4. 硬刷新浏览器强制重新下载所有资源

---

**重要提示**: 
- ✅ 后端已修复并正常运行
- ✅ 前端代码已更新
- ✅ Next.js缓存已清除
- ⏳ **您只需要重启前端服务器并硬刷新浏览器**

完成后，所有API请求应该都能正常工作，不会再有404错误！

