# ğŸš€ AIcoin å¿«é€Ÿéƒ¨ç½²æŒ‡å—

> **ä¸€ç«™å¼éƒ¨ç½²æ–‡æ¡£** | æ”¯æŒ Docker / æœ¬åœ° / æµ‹è¯•ç½‘ / ä¸»ç½‘

---

## ğŸ“‹ ç›®å½•

1. [éƒ¨ç½²å‰å‡†å¤‡](#1-éƒ¨ç½²å‰å‡†å¤‡)
2. [Docker éƒ¨ç½² (æ¨è)](#2-docker-éƒ¨ç½²-æ¨è)
3. [æœ¬åœ°å¼€å‘éƒ¨ç½²](#3-æœ¬åœ°å¼€å‘éƒ¨ç½²)
4. [è¿œç¨‹æœåŠ¡å™¨éƒ¨ç½²](#4-è¿œç¨‹æœåŠ¡å™¨éƒ¨ç½²)
5. [æµ‹è¯•ç½‘ vs ä¸»ç½‘](#5-æµ‹è¯•ç½‘-vs-ä¸»ç½‘)
6. [Git è‡ªåŠ¨åŒ–éƒ¨ç½²](#6-git-è‡ªåŠ¨åŒ–éƒ¨ç½²)

---

## 1. éƒ¨ç½²å‰å‡†å¤‡

### 1.1 ç³»ç»Ÿè¦æ±‚

| é¡¹ç›® | æœ€ä½é…ç½® | æ¨èé…ç½® |
|------|---------|---------|
| **CPU** | 2 æ ¸ | 4 æ ¸+ |
| **å†…å­˜** | 4GB | 8GB+ |
| **å­˜å‚¨** | 20GB | 50GB+ |
| **ç³»ç»Ÿ** | Ubuntu 20.04+ | Ubuntu 22.04 |
| **ç½‘ç»œ** | ç¨³å®šäº’è”ç½‘ | ä½å»¶è¿Ÿ |

### 1.2 å¿…éœ€è½¯ä»¶

```bash
# Docker (æ¨è)
docker --version  # >= 20.10
docker-compose --version  # >= 2.0

# æˆ–æœ¬åœ°å¼€å‘
python --version  # >= 3.11
node --version    # >= 18.0
npm --version     # >= 9.0
```

### 1.3 å¿…éœ€çš„ API å¯†é’¥

- âœ… **DeepSeek API Key** (å¿…éœ€)
  - è·å–åœ°å€: https://platform.deepseek.com
  - è´¹ç”¨: ~$1/ç™¾ä¸‡ tokens
  
- âœ… **Hyperliquid é’±åŒ…** (å¿…éœ€)
  - é’±åŒ…åœ°å€
  - ç§é’¥
  - æµ‹è¯•ç½‘/ä¸»ç½‘é€‰æ‹©

- âš ï¸ **å¯é€‰ API**
  - Qwen API (æƒ…æŠ¥ç³»ç»Ÿ)
  - Doubao API (å¤‡ç”¨)
  - Claude API (å¤‡ç”¨)

---

## 2. Docker éƒ¨ç½² (æ¨è)

### 2.1 å¿«é€Ÿå¯åŠ¨ (3 æ­¥)

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/allenxing4071/aicoin.git
cd aicoin

# 2. é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
nano .env  # ç¼–è¾‘é…ç½®

# 3. å¯åŠ¨æœåŠ¡
docker-compose up -d
```

### 2.2 ç¯å¢ƒå˜é‡é…ç½®

**æœ€å°é…ç½® (.env)**:
```bash
# ========== AI å¹³å° ==========
DEEPSEEK_API_KEY=sk-your-deepseek-key

# ========== äº¤æ˜“æ‰€ ==========
HYPERLIQUID_WALLET_ADDRESS=0xYourAddress
HYPERLIQUID_PRIVATE_KEY=0xYourPrivateKey
HYPERLIQUID_TESTNET=true  # true=æµ‹è¯•ç½‘, false=ä¸»ç½‘

# ========== å®‰å…¨å¯†é’¥ ==========
SECRET_KEY=your-secret-key-change-this-to-random-string
JWT_SECRET_KEY=your-jwt-secret-key-change-this

# ========== æ•°æ®åº“ ==========
POSTGRES_USER=aicoin
POSTGRES_PASSWORD=your-strong-password
POSTGRES_DB=aicoin
DATABASE_URL=postgresql://aicoin:your-strong-password@postgres:5432/aicoin

# ========== Redis ==========
REDIS_URL=redis://redis:6379/0

# ========== Qdrant ==========
QDRANT_URL=http://qdrant:6333
```

### 2.3 éªŒè¯éƒ¨ç½²

```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# é¢„æœŸè¾“å‡º:
# NAME                COMMAND                  SERVICE             STATUS
# aicoin-backend-1    "uvicorn app.main:..."   backend             Up
# aicoin-frontend-1   "docker-entrypoint..."   frontend            Up
# aicoin-postgres-1   "docker-entrypoint..."   postgres            Up
# aicoin-redis-1      "docker-entrypoint..."   redis               Up
# aicoin-qdrant-1     "./entrypoint.sh"        qdrant              Up

# æ£€æŸ¥åç«¯å¥åº·
curl http://localhost:8000/health

# é¢„æœŸè¾“å‡º:
# {"status":"healthy","version":"4.1.0","ai_orchestrator":true}

# è®¿é—®å‰ç«¯
open http://localhost:3000
```

### 2.4 å¸¸ç”¨å‘½ä»¤

```bash
# å¯åŠ¨æœåŠ¡
docker-compose up -d

# åœæ­¢æœåŠ¡
docker-compose down

# é‡å¯æœåŠ¡
docker-compose restart

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# æŸ¥çœ‹ç‰¹å®šæœåŠ¡æ—¥å¿—
docker-compose logs -f backend
docker-compose logs -f frontend

# é‡æ–°æ„å»º
docker-compose up -d --build

# æ¸…ç†å¹¶é‡å¯
docker-compose down -v  # åˆ é™¤æ•°æ®å·
docker-compose up -d --build
```

---

## 3. æœ¬åœ°å¼€å‘éƒ¨ç½²

### 3.1 åç«¯éƒ¨ç½²

```bash
# 1. è¿›å…¥åç«¯ç›®å½•
cd backend

# 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv
source venv/bin/activate  # Linux/Mac
# æˆ– venv\Scripts\activate  # Windows

# 3. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 4. é…ç½®ç¯å¢ƒå˜é‡
cp ../.env.example ../.env
nano ../.env

# 5. è¿è¡Œæ•°æ®åº“è¿ç§»
alembic upgrade head

# 6. å¯åŠ¨åç«¯
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

### 3.2 å‰ç«¯éƒ¨ç½²

```bash
# 1. è¿›å…¥å‰ç«¯ç›®å½•
cd frontend

# 2. å®‰è£…ä¾èµ–
npm install

# 3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# 4. æˆ–æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build
npm run start
```

### 3.3 æ•°æ®åº“æœåŠ¡

**æ–¹å¼ä¸€: Docker (æ¨è)**
```bash
# PostgreSQL
docker run -d \
  --name postgres \
  -e POSTGRES_USER=aicoin \
  -e POSTGRES_PASSWORD=password \
  -e POSTGRES_DB=aicoin \
  -p 5432:5432 \
  postgres:15

# Redis
docker run -d \
  --name redis \
  -p 6379:6379 \
  redis:7

# Qdrant
docker run -d \
  --name qdrant \
  -p 6333:6333 \
  qdrant/qdrant
```

**æ–¹å¼äºŒ: æœ¬åœ°å®‰è£…**
```bash
# Ubuntu
sudo apt install postgresql redis-server

# macOS
brew install postgresql redis
brew services start postgresql
brew services start redis
```

---

## 4. è¿œç¨‹æœåŠ¡å™¨éƒ¨ç½²

### 4.1 æœåŠ¡å™¨åˆå§‹åŒ–

```bash
# 1. è¿æ¥æœåŠ¡å™¨
ssh root@your-server-ip

# 2. æ›´æ–°ç³»ç»Ÿ
apt update && apt upgrade -y

# 3. å®‰è£… Docker
curl -fsSL https://get.docker.com | sh
systemctl enable docker
systemctl start docker

# 4. å®‰è£… Docker Compose
apt install docker-compose-plugin -y

# 5. åˆ›å»ºå·¥ä½œç›®å½•
mkdir -p /root/AIcoin
cd /root/AIcoin
```

### 4.2 éƒ¨ç½²é¡¹ç›®

```bash
# 1. å…‹éš†ä»£ç 
git clone https://github.com/allenxing4071/aicoin.git .

# 2. é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
nano .env

# 3. å¯åŠ¨æœåŠ¡
docker-compose up -d

# 4. é…ç½®é˜²ç«å¢™
ufw allow 80/tcp
ufw allow 443/tcp
ufw allow 8000/tcp
ufw allow 3000/tcp
ufw enable
```

### 4.3 HTTPS é…ç½® (å¯é€‰)

```bash
# 1. å®‰è£… Certbot
apt install certbot python3-certbot-nginx -y

# 2. è·å–è¯ä¹¦
certbot --nginx -d your-domain.com

# 3. è‡ªåŠ¨ç»­æœŸ
certbot renew --dry-run
```

### 4.4 Nginx åå‘ä»£ç† (å¯é€‰)

```nginx
# /etc/nginx/sites-available/aicoin
server {
    listen 80;
    server_name your-domain.com;

    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }

    location /api {
        proxy_pass http://localhost:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

```bash
# å¯ç”¨ç«™ç‚¹
ln -s /etc/nginx/sites-available/aicoin /etc/nginx/sites-enabled/
nginx -t
systemctl reload nginx
```

---

## 5. æµ‹è¯•ç½‘ vs ä¸»ç½‘

### 5.1 æµ‹è¯•ç½‘éƒ¨ç½² (æ¨èæ–°æ‰‹)

**ä¼˜åŠ¿**:
- âœ… æ— çœŸå®èµ„é‡‘é£é™©
- âœ… å…è´¹æµ‹è¯•
- âœ… å¿«é€ŸéªŒè¯ç­–ç•¥

**é…ç½®**:
```bash
# .env.testnet
HYPERLIQUID_TESTNET=true
HYPERLIQUID_WALLET_ADDRESS=0xYourTestnetAddress
HYPERLIQUID_PRIVATE_KEY=0xYourTestnetPrivateKey
```

**å¯åŠ¨**:
```bash
docker-compose -f docker-compose.testnet.yml up -d
```

### 5.2 ä¸»ç½‘éƒ¨ç½² (ç”Ÿäº§ç¯å¢ƒ)

**å‰ææ¡ä»¶**:
- âš ï¸ æµ‹è¯•ç½‘éªŒè¯é€šè¿‡
- âš ï¸ ç­–ç•¥ç¨³å®šç›ˆåˆ©
- âš ï¸ é£æ§å‚æ•°è°ƒä¼˜
- âš ï¸ å……åˆ†ç†è§£é£é™©

**é…ç½®**:
```bash
# .env.prod
HYPERLIQUID_TESTNET=false
HYPERLIQUID_WALLET_ADDRESS=0xYourMainnetAddress
HYPERLIQUID_PRIVATE_KEY=0xYourMainnetPrivateKey

# æ›´ä¸¥æ ¼çš„é£æ§
MAX_POSITION_PCT=0.10
MAX_LEVERAGE=2
CONFIDENCE_THRESHOLD=0.75
```

**å¯åŠ¨**:
```bash
docker-compose -f docker-compose.prod.yml up -d
```

### 5.3 æµ‹è¯•ç½‘ â†’ ä¸»ç½‘è¿ç§»

```bash
# 1. å¤‡ä»½æµ‹è¯•ç½‘æ•°æ®
docker-compose exec postgres pg_dump -U aicoin aicoin > testnet_backup.sql

# 2. åœæ­¢æµ‹è¯•ç½‘
docker-compose -f docker-compose.testnet.yml down

# 3. ä¿®æ”¹é…ç½®
cp .env.testnet .env.prod
nano .env.prod  # ä¿®æ”¹ä¸ºä¸»ç½‘é…ç½®

# 4. å¯åŠ¨ä¸»ç½‘
docker-compose -f docker-compose.prod.yml up -d

# 5. éªŒè¯
curl http://localhost:8000/health
```

---

## 6. Git è‡ªåŠ¨åŒ–éƒ¨ç½²

### 6.1 ä¸‰ç§éƒ¨ç½²è„šæœ¬

#### æ ‡å‡†éƒ¨ç½² (deploy-git.sh)
```bash
# å®Œæ•´éƒ¨ç½²ï¼Œé‡æ–°æ„å»ºé•œåƒ
./scripts/deploy-git.sh

# éƒ¨ç½²æŒ‡å®šåˆ†æ”¯
./scripts/deploy-git.sh develop
```

**ç”¨é€”**:
- âœ… ä»£ç æ›´æ–°
- âœ… ä¾èµ–æ›´æ–°
- âœ… é¦–æ¬¡éƒ¨ç½²

**è€—æ—¶**: 5-10 åˆ†é’Ÿ

#### å¿«é€Ÿéƒ¨ç½² (deploy-git-quick.sh)
```bash
# å¿«é€Ÿæ›´æ–°ï¼Œä¸é‡æ–°æ„å»º
./scripts/deploy-git-quick.sh
```

**ç”¨é€”**:
- âœ… é…ç½®ä¿®æ”¹
- âœ… æ–‡æ¡£æ›´æ–°
- âœ… å°æ”¹åŠ¨

**è€—æ—¶**: 30 ç§’ - 1 åˆ†é’Ÿ

#### å›æ»šéƒ¨ç½² (deploy-git-rollback.sh)
```bash
# å›æ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬
./scripts/deploy-git-rollback.sh HEAD~1

# å›æ»šåˆ°æŒ‡å®šæäº¤
./scripts/deploy-git-rollback.sh abc1234

# å›æ»šåˆ°æŒ‡å®šæ ‡ç­¾
./scripts/deploy-git-rollback.sh v3.2.0
```

**ç”¨é€”**:
- âš ï¸ ç´§æ€¥å›æ»š
- âš ï¸ Bug ä¿®å¤

**è€—æ—¶**: 5-10 åˆ†é’Ÿ

### 6.2 æœåŠ¡å™¨ç«¯é…ç½®

```bash
# 1. SSH ç™»å½•æœåŠ¡å™¨
ssh root@your-server-ip

# 2. é…ç½® Git
git config --global user.name "Deploy Bot"
git config --global user.email "deploy@aicoin.com"

# 3. é…ç½® SSH Key (æ¨è)
ssh-keygen -t ed25519 -C "deploy@aicoin.com"
cat ~/.ssh/id_ed25519.pub
# æ·»åŠ åˆ° GitHub Deploy Keys

# 4. æˆ–é…ç½® Token
git config --global credential.helper store
```

### 6.3 éƒ¨ç½²æµç¨‹ç¤ºä¾‹

```bash
# åœºæ™¯ 1: æ—¥å¸¸æ›´æ–°
git add .
git commit -m "æ–°å¢åŠŸèƒ½"
git push origin main
./scripts/deploy-git.sh

# åœºæ™¯ 2: ç´§æ€¥é…ç½®ä¿®æ”¹
ssh root@server "cd /root/AIcoin && nano .env"
./scripts/deploy-git-quick.sh

# åœºæ™¯ 3: å‘ç° Bug å›æ»š
./scripts/deploy-git-rollback.sh HEAD~1
```

---

## ğŸ“Š éƒ¨ç½²æ£€æŸ¥æ¸…å•

### éƒ¨ç½²å‰
- [ ] ç³»ç»Ÿè¦æ±‚æ»¡è¶³
- [ ] Docker å·²å®‰è£…
- [ ] API å¯†é’¥å·²è·å–
- [ ] ç¯å¢ƒå˜é‡å·²é…ç½®
- [ ] é˜²ç«å¢™è§„åˆ™å·²è®¾ç½®

### éƒ¨ç½²ä¸­
- [ ] æœåŠ¡å¯åŠ¨æˆåŠŸ
- [ ] æ— é”™è¯¯æ—¥å¿—
- [ ] æ•°æ®åº“è¿æ¥æ­£å¸¸
- [ ] Redis è¿æ¥æ­£å¸¸

### éƒ¨ç½²å
- [ ] å¥åº·æ£€æŸ¥é€šè¿‡
- [ ] å‰ç«¯å¯è®¿é—®
- [ ] API å¯è®¿é—®
- [ ] AI å†³ç­–æ­£å¸¸
- [ ] äº¤æ˜“æ‰§è¡Œæ­£å¸¸

---

## ğŸ†˜ å¸¸è§é—®é¢˜

### ç«¯å£è¢«å ç”¨
```bash
# æŸ¥çœ‹ç«¯å£å ç”¨
lsof -i :8000
lsof -i :3000

# ä¿®æ”¹ç«¯å£
nano docker-compose.yml
# ä¿®æ”¹ ports é…ç½®
```

### æ•°æ®åº“è¿æ¥å¤±è´¥
```bash
# æ£€æŸ¥æ•°æ®åº“çŠ¶æ€
docker-compose logs postgres

# é‡å¯æ•°æ®åº“
docker-compose restart postgres

# é‡æ–°åˆå§‹åŒ–
docker-compose down -v
docker-compose up -d
```

### Docker æ„å»ºå¤±è´¥
```bash
# æ¸…ç†ç¼“å­˜
docker system prune -a -f

# é‡æ–°æ„å»º
docker-compose build --no-cache
docker-compose up -d
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [é…ç½®æŒ‡å—](./02-é…ç½®æŒ‡å—.md) - è¯¦ç»†é…ç½®è¯´æ˜
- [è¿ç»´æ“ä½œ](./03-è¿ç»´æ“ä½œ.md) - æ—¥å¸¸è¿ç»´æ“ä½œ
- [æ•…éšœæ’æŸ¥](./04-æ•…éšœæ’æŸ¥.md) - é—®é¢˜è¯Šæ–­ä¸è§£å†³

---

**æ–‡æ¡£ç»´æŠ¤**: AIcoin Team  
**æœ€åæ›´æ–°**: 2025-11-15  
**æ–‡æ¡£ç‰ˆæœ¬**: v2.0

