# 开发路线图

**文档编号**: AICOIN-PLAN-003  
**文档版本**: v1.0.0  
**文档状态**: ✅ 已批准  
**创建日期**: 2025-10-22  
**最后更新**: 2025-10-22  
**文档所有者**: 产品经理  
**审阅人**: 技术负责人  
**密级**: 内部公开

---

## 文档修订历史

| 版本 | 日期 | 修订人 | 修订说明 | 审批人 |
|------|------|--------|---------|--------|
| v1.0.0 | 2025-10-22 | 产品经理 | 初始版本，4周详细开发计划 | 技术负责人 |

---

## 1. 总体规划

### 1.1 时间线概览

```
Phase 0: 准备阶段    [===] 2天  (Oct 22-23)
Phase 1: 基础开发    [=======] 7天  (Oct 24-30)
Phase 2: 核心功能    [=======] 7天  (Oct 31 - Nov 6)
Phase 3: 前端&测试   [=======] 7天  (Nov 7-13)
Phase 4: 上线验证    [=======] 7天  (Nov 14-20)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
总计: 30天 (4周+2天准备)
```

### 1.2 里程碑 (Milestones)

| 里程碑编号 | 里程碑名称 | 计划日期 | 验收标准 |
|-----------|-----------|---------|---------|
| M0 | 准备完成 | Oct 23 | 所有规划文档完成，环境就绪 |
| M1 | 基础架构完成 | Oct 30 | Docker运行，数据库就绪，API测试通过 |
| M2 | 核心功能完成 | Nov 6 | AI决策+交易执行+风控系统运行 |
| M3 | MVP上线 | Nov 13 | 前端完成，模拟盘验证通过 |
| M4 | 产品验证 | Nov 20 | 实盘运行稳定，达成收益目标 |

---

## 2. Phase 0: 准备阶段 (Oct 22-23)

### 2.1 目标

- ✅ 完成所有规划文档
- ✅ 确认技术方案
- ✅ 准备开发环境

### 2.2 详细任务

| 任务ID | 任务名称 | 负责人 | 工时 | 截止日期 | 产出 |
|--------|---------|--------|------|---------|------|
| P0-T1 | 完成规划文档(PLAN-001~005) | PM | 12h | Oct 22 | 5篇规划文档 |
| P0-T2 | 完成架构文档(ARCH-001~002) | 技术负责人 | 8h | Oct 23 | 架构+数据库设计 |
| P0-T3 | 技术栈最终确认 | 技术负责人 | 2h | Oct 22 | 技术选型文档 |
| P0-T4 | 本地开发环境准备 | 全员 | 4h | Oct 23 | 环境就绪 |
| P0-T5 | 注册Hyperliquid Testnet | 技术负责人 | 1h | Oct 23 | API密钥 |
| P0-T6 | 注册DeepSeek API | 技术负责人 | 1h | Oct 23 | API密钥 |
| P0-T7 | 需求评审会议 | 全员 | 2h | Oct 23 | 评审通过 |

**M0验收**: 
- [ ] 所有文档完成并评审通过
- [ ] 开发环境测试成功
- [ ] API密钥获取完成
- [ ] 团队对方案达成共识

---

## 3. Phase 1: 基础开发 (Oct 24-30, Week 1)

### 3.1 目标

- 搭建基础技术架构
- 实现数据层
- 完成API集成

### 3.2 Day 1-2: 基础设施 (Oct 24-25)

| 任务ID | 任务名称 | 负责人 | 工时 | 产出 | 验收标准 |
|--------|---------|--------|------|------|---------|
| P1-T1 | 创建Git仓库结构 | 技术负责人 | 2h | 代码仓库 | 分支策略就绪 |
| P1-T2 | Docker Compose配置 | 技术负责人 | 4h | docker-compose.yml | `docker-compose up`成功 |
| P1-T3 | PostgreSQL初始化 | 技术负责人 | 2h | 数据库容器 | 连接成功 |
| P1-T4 | Redis配置 | 技术负责人 | 2h | Redis容器 | 连接成功 |
| P1-T5 | FastAPI项目初始化 | 技术负责人 | 4h | backend/ | Hello World API |
| P1-T6 | Next.js项目初始化 | 前端工程师 | 4h | frontend/ | 首页渲染 |
| P1-T7 | CI/CD基础配置 | 技术负责人 | 3h | .github/workflows | 测试流水线 |

**项目结构**:
```
AIcoin/
├── backend/               # FastAPI后端
│   ├── app/
│   │   ├── api/          # API路由
│   │   ├── core/         # 核心配置
│   │   ├── models/       # 数据模型
│   │   ├── services/     # 业务逻辑
│   │   └── utils/        # 工具函数
│   ├── tests/            # 测试
│   ├── requirements.txt
│   └── Dockerfile
├── frontend/             # Next.js前端
│   ├── app/
│   ├── components/
│   ├── lib/
│   ├── public/
│   ├── package.json
│   └── Dockerfile
├── docker-compose.yml
└── README.md
```

### 3.3 Day 3-4: 数据层开发 (Oct 26-27)

| 任务ID | 任务名称 | 负责人 | 工时 | 产出 | 验收标准 |
|--------|---------|--------|------|------|---------|
| P1-T8 | 数据库ER图设计 | 技术负责人 | 3h | ER图文档 | 评审通过 |
| P1-T9 | SQLAlchemy模型定义 | 技术负责人 | 6h | models/*.py | 所有表创建成功 |
| P1-T10 | 数据库迁移脚本 | 技术负责人 | 3h | alembic/ | 迁移成功 |
| P1-T11 | CRUD基础操作 | 技术负责人 | 4h | services/db.py | 单元测试通过 |
| P1-T12 | Redis缓存封装 | 技术负责人 | 2h | services/cache.py | 读写测试通过 |

**数据模型**（参考ARCH-002）:
- `trades` - 交易记录
- `orders` - 订单
- `account_snapshots` - 账户快照
- `ai_decisions` - AI决策日志
- `market_data_kline` - K线数据

### 3.4 Day 5: API集成 (Oct 28)

| 任务ID | 任务名称 | 负责人 | 工时 | 产出 | 验收标准 |
|--------|---------|--------|------|------|---------|
| P1-T13 | Hyperliquid SDK集成 | 技术负责人 | 4h | services/hyperliquid.py | Testnet连接成功 |
| P1-T14 | 市场数据Service | 技术负责人 | 4h | services/market_data.py | K线获取成功 |
| P1-T15 | WebSocket实时流 | 技术负责人 | 4h | services/ws_client.py | 实时数据推送 |

### 3.5 Day 6-7: 测试与文档 (Oct 29-30)

| 任务ID | 任务名称 | 负责人 | 工时 | 产出 | 验收标准 |
|--------|---------|--------|------|------|---------|
| P1-T16 | 单元测试编写 | 全员 | 8h | tests/ | 覆盖率>70% |
| P1-T17 | API文档生成 | 技术负责人 | 3h | Swagger UI | 文档可访问 |
| P1-T18 | 开发指南更新 | PM | 3h | DEV-001~002 | 文档完整 |
| P1-T19 | M1验收准备 | 全员 | 2h | 验收报告 | 通过检查清单 |

**M1验收清单**:
- [ ] Docker环境一键启动
- [ ] 所有数据库表创建成功
- [ ] Hyperliquid Testnet连接稳定
- [ ] K线+订单簿数据获取正常
- [ ] 单元测试覆盖率≥70%

---

## 4. Phase 2: 核心功能 (Oct 31 - Nov 6, Week 2)

### 4.1 目标

- 实现AI决策引擎
- 完成交易执行系统
- 部署风控系统

### 4.2 Day 1-2: AI决策引擎 (Oct 31 - Nov 1)

| 任务ID | 任务名称 | 负责人 | 工时 | 产出 | 验收标准 |
|--------|---------|--------|------|------|---------|
| P2-T1 | LangChain集成 | 技术负责人 | 3h | ai/llm_client.py | DeepSeek调用成功 |
| P2-T2 | Prompt模板设计 | 技术负责人+顾问 | 5h | ai/prompts.py | 决策合理性>4/5 |
| P2-T3 | 决策解析器 | 技术负责人 | 3h | ai/decision_parser.py | 解析成功率100% |
| P2-T4 | 市场数据标准化 | 技术负责人 | 3h | ai/data_formatter.py | 格式统一 |
| P2-T5 | AI决策Service | 技术负责人 | 4h | services/ai_trader.py | 端到端测试通过 |

**Prompt示例**（参考RESEARCH-004）:
```python
TRADING_PROMPT = """
你是专业的加密货币交易AI，目标是最大化夏普比率。

当前市场数据:
- 交易对: {symbol}
- 当前价格: ${current_price}
- 1小时K线: {kline_data}
- 订单簿: {orderbook}

账户状态:
- 余额: ${balance}
- 持仓: {position}

交易规则:
1. 单笔仓位≤20%
2. 单日亏损≤5%
3. 低频高胜率策略（参考DeepSeek：18笔交易）

请分析并决策，返回JSON:
{{
  "action": "BUY|SELL|HOLD",
  "size": 数量,
  "confidence": 0-1,
  "reasoning": "理由"
}}
"""
```

### 4.3 Day 3-4: 交易执行系统 (Nov 2-3)

| 任务ID | 任务名称 | 负责人 | 工时 | 产出 | 验收标准 |
|--------|---------|--------|------|------|---------|
| P2-T6 | 订单管理模块 | 技术负责人 | 4h | services/order_manager.py | CRUD正常 |
| P2-T7 | 订单执行逻辑 | 技术负责人 | 5h | services/trade_executor.py | Testnet下单成功 |
| P2-T8 | 风控中间件 | 技术负责人+顾问 | 6h | services/risk_manager.py | 3层风控生效 |
| P2-T9 | 账户管理模块 | 技术负责人 | 3h | services/account_manager.py | 资产实时更新 |
| P2-T10 | 性能指标计算 | 技术负责人 | 4h | services/performance.py | 夏普比率计算准确 |

**风控规则实现**:
```python
class RiskManager:
    # 规则RC-001: 仓位限制
    def check_position_limit(self, order_size, total_balance):
        if order_size > total_balance * 0.2:
            return False, "超过单笔仓位限制20%"
        return True, "OK"
    
    # 规则RC-002: 日亏损限制
    def check_daily_loss(self, today_pnl, total_balance):
        if today_pnl < -total_balance * 0.05:
            return False, "达到单日亏损限制5%"
        return True, "OK"
    
    # 规则RC-003: 最大回撤
    def check_max_drawdown(self, current_drawdown):
        if current_drawdown > 0.10:
            return False, "达到最大回撤10%"
        return True, "OK"
```

### 4.4 Day 5: Celery任务调度 (Nov 4)

| 任务ID | 任务名称 | 负责人 | 工时 | 产出 | 验收标准 |
|--------|---------|--------|------|------|---------|
| P2-T11 | Celery配置 | 技术负责人 | 2h | celery_app.py | Worker运行 |
| P2-T12 | 定时任务：决策循环 | 技术负责人 | 4h | tasks/trading_loop.py | 每5分钟执行 |
| P2-T13 | 定时任务：数据采集 | 技术负责人 | 3h | tasks/data_collector.py | 每分钟执行 |
| P2-T14 | 定时任务：性能计算 | 技术负责人 | 2h | tasks/calculate_metrics.py | 每小时执行 |

**交易循环伪代码**:
```python
@celery.task
def trading_loop():
    # 1. 获取市场数据
    market_data = get_market_data()
    
    # 2. AI决策
    decision = ai_trader.make_decision(market_data)
    
    # 3. 风控验证
    is_safe, reason = risk_manager.validate(decision)
    
    # 4. 执行订单
    if is_safe:
        trade_executor.execute(decision)
    
    # 5. 记录日志
    log_decision(decision, is_safe, reason)
```

### 4.5 Day 6-7: 集成测试 (Nov 5-6)

| 任务ID | 任务名称 | 负责人 | 工时 | 产出 | 验收标准 |
|--------|---------|--------|------|------|---------|
| P2-T15 | 端到端集成测试 | 全员 | 8h | tests/integration/ | 所有流程跑通 |
| P2-T16 | Testnet模拟运行 | 全员 | 6h | 运行日志 | 24小时无故障 |
| P2-T17 | Bug修复 | 全员 | 6h | Bug报告 | P0 Bug清零 |
| P2-T18 | M2验收准备 | 全员 | 2h | 验收报告 | 通过检查清单 |

**M2验收清单**:
- [ ] AI决策引擎调用成功率>99%
- [ ] DeepSeek API响应时间<3秒
- [ ] 订单执行成功率>99%
- [ ] 风控规则100%生效
- [ ] Testnet运行24小时稳定

---

## 5. Phase 3: 前端与测试 (Nov 7-13, Week 3)

### 5.1 目标

- 完成前端所有页面
- 实现WebSocket实时推送
- 通过模拟盘验证

### 5.2 Day 1-3: 前端开发 (Nov 7-9)

| 任务ID | 任务名称 | 负责人 | 工时 | 产出 | 验收标准 |
|--------|---------|--------|------|------|---------|
| P3-T1 | UI设计稿 | 前端工程师 | 4h | Figma设计稿 | PM评审通过 |
| P3-T2 | 主仪表盘布局 | 前端工程师 | 6h | Dashboard.tsx | 响应式布局 |
| P3-T3 | K线图组件 | 前端工程师 | 8h | TradingChart.tsx | TradingView式交互 |
| P3-T4 | 持仓面板 | 前端工程师 | 4h | PositionPanel.tsx | 实时数据显示 |
| P3-T5 | 交易历史列表 | 前端工程师 | 4h | TradeHistory.tsx | 分页+过滤 |
| P3-T6 | 性能指标面板 | 前端工程师 | 5h | PerformanceMetrics.tsx | 图表可视化 |
| P3-T7 | AI思考过程展示 | 前端工程师 | 3h | AIThinking.tsx | 决策理由显示 |

**前端技术栈**:
- Next.js 14 (App Router)
- TypeScript
- TailwindCSS + shadcn/ui
- Recharts (图表)
- TanStack Query (状态管理)

### 5.3 Day 4-5: WebSocket集成 (Nov 10-11)

| 任务ID | 任务名称 | 负责人 | 工时 | 产出 | 验收标准 |
|--------|---------|--------|------|------|---------|
| P3-T8 | 后端WebSocket服务 | 技术负责人 | 4h | api/ws.py | 连接稳定 |
| P3-T9 | 前端WebSocket客户端 | 前端工程师 | 4h | lib/websocket.ts | 自动重连 |
| P3-T10 | 实时价格推送 | 全员 | 3h | 集成 | 延迟<500ms |
| P3-T11 | 交易记录推送 | 全员 | 2h | 集成 | 实时更新 |
| P3-T12 | 账户变化推送 | 全员 | 2h | 集成 | 数据准确 |
| P3-T13 | 前端性能优化 | 前端工程师 | 4h | 优化报告 | Lighthouse>90 |

### 5.4 Day 6: 模拟盘测试 (Nov 12)

| 任务ID | 任务名称 | 负责人 | 工时 | 产出 | 验收标准 |
|--------|---------|--------|------|------|---------|
| P3-T14 | Testnet完整测试 | 全员 | 8h | 测试报告 | 24小时运行无重大故障 |
| P3-T15 | 压力测试 | 技术负责人 | 4h | 测试报告 | 支持100并发 |
| P3-T16 | Bug修复 | 全员 | 4h | Bug清单 | P0/P1 Bug清零 |

### 5.5 Day 7: 文档与验收 (Nov 13)

| 任务ID | 任务名称 | 负责人 | 工时 | 产出 | 验收标准 |
|--------|---------|--------|------|------|---------|
| P3-T17 | API文档完善 | 技术负责人 | 3h | API-001~004 | 100%覆盖 |
| P3-T18 | 运维文档编写 | 技术负责人 | 3h | OPS-001~002 | 可执行 |
| P3-T19 | 用户手册 | PM | 2h | 用户手册.md | 完整 |
| P3-T20 | M3验收 | 全员 | 2h | 验收报告 | 通过 |

**M3验收清单**:
- [ ] 所有前端页面完成
- [ ] WebSocket实时推送延迟<500ms
- [ ] Testnet运行7天无重大故障
- [ ] Lighthouse性能评分>90
- [ ] 文档完成度100%

---

## 6. Phase 4: 上线验证 (Nov 14-20, Week 4)

### 6.1 目标

- 部署生产环境
- 启动小额实盘
- 达成收益目标

### 6.2 Day 1: 生产环境部署 (Nov 14)

| 任务ID | 任务名称 | 负责人 | 工时 | 产出 | 验收标准 |
|--------|---------|--------|------|------|---------|
| P4-T1 | VPS购买与配置 | 技术负责人 | 2h | 服务器 | SSH登录成功 |
| P4-T2 | 生产环境Docker部署 | 技术负责人 | 4h | 部署脚本 | 服务启动成功 |
| P4-T3 | 私钥安全配置 | 技术负责人 | 2h | 硬件钱包 | 签名测试成功 |
| P4-T4 | 监控系统配置 | 技术负责人 | 3h | Grafana仪表盘 | 告警正常 |
| P4-T5 | 域名+SSL配置 | 技术负责人 | 2h | HTTPS访问 | 证书有效 |
| P4-T6 | 数据备份脚本 | 技术负责人 | 2h | 备份脚本 | 自动备份 |

### 6.3 Day 2: 实盘准备 (Nov 15)

| 任务ID | 任务名称 | 负责人 | 工时 | 产出 | 验收标准 |
|--------|---------|--------|------|------|---------|
| P4-T7 | 实盘资金注入 | PM | 1h | 500-2000 USDC | 到账确认 |
| P4-T8 | 实盘参数配置 | 技术负责人 | 2h | 配置文件 | 风控参数确认 |
| P4-T9 | 应急预案准备 | 全员 | 2h | 应急文档 | 演练通过 |
| P4-T10 | 启动实盘交易 | 全员 | 1h | 运行日志 | 首笔交易成功 |

### 6.4 Day 3-6: 实盘运行 (Nov 16-19)

| 日期 | 主要工作 | 负责人 | 关注指标 |
|------|---------|--------|---------|
| Nov 16 | 7x24监控，快速响应 | 全员 | 可用性、决策质量 |
| Nov 17 | 性能调优，Prompt优化 | 技术负责人 | 胜率、收益率 |
| Nov 18 | 数据分析，策略微调 | 量化顾问 | 夏普比率、回撤 |
| Nov 19 | 准备验收材料 | 全员 | 所有指标 |

**每日例会议题**:
- 昨日交易回顾（盈亏、胜率）
- AI决策质量评估
- 风险事件检查
- 今日重点关注

### 6.5 Day 7: 验收与总结 (Nov 20)

| 任务ID | 任务名称 | 负责人 | 工时 | 产出 | 验收标准 |
|--------|---------|--------|------|------|---------|
| P4-T11 | MVP验收会议 | 全员 | 2h | 验收报告 | 通过验收 |
| P4-T12 | 技术总结报告 | 技术负责人 | 4h | 技术报告PDF | 10页+ |
| P4-T13 | 数据分析报告 | 量化顾问 | 4h | 数据报告PDF | 完整 |
| P4-T14 | 商业可行性评估 | PM | 3h | 商业报告 | 决策v2.0 |
| P4-T15 | 经验教训复盘 | 全员 | 2h | 复盘文档 | 改进清单 |

**M4验收清单**:
- [ ] 实盘运行7天可用性>99.5%
- [ ] 月化收益率≥5%
- [ ] 夏普比率≥1.0
- [ ] 最大回撤≤10%
- [ ] 技术文档完整
- [ ] 商业价值明确

---

## 7. 资源分配

### 7.1 人力资源

| 角色 | Week 0 | Week 1 | Week 2 | Week 3 | Week 4 | 总工时 |
|------|--------|--------|--------|--------|--------|--------|
| 产品经理 | 12h | 10h | 5h | 8h | 10h | 45h |
| 技术负责人 | 12h | 40h | 40h | 20h | 25h | 137h |
| 前端工程师 | 0h | 8h | 10h | 35h | 5h | 58h |
| 量化顾问 | 0h | 2h | 8h | 2h | 8h | 20h |
| **总计** | 24h | 60h | 63h | 65h | 48h | **260h** |

### 7.2 关键路径 (Critical Path)

```
P0准备 → P1基础架构 → P2核心功能 → P3前端 → P4上线
  2天       7天          7天         7天       7天
```

**风险点**:
- P2的AI决策引擎（技术难度高）
- P3的WebSocket实时推送（性能要求高）
- P4的实盘验证（市场不确定性）

---

## 8. 风险管理

### 8.1 技术风险

| 风险ID | 风险描述 | 概率 | 影响 | 缓解措施 |
|--------|---------|------|------|---------|
| R-T1 | LLM API不稳定 | 中 | 高 | 多LLM备份，本地缓存 |
| R-T2 | Hyperliquid API限速 | 低 | 中 | 降低调用频率 |
| R-T3 | WebSocket断连 | 中 | 中 | 自动重连机制 |
| R-T4 | 数据库性能瓶颈 | 低 | 中 | 索引优化，读写分离 |

### 8.2 进度风险

| 风险ID | 风险描述 | 概率 | 影响 | 缓解措施 |
|--------|---------|------|------|---------|
| R-S1 | 前端开发延期 | 中 | 中 | 裁剪非核心功能 |
| R-S2 | Bug修复时间超预期 | 高 | 中 | 每日Bug清理 |
| R-S3 | 集成测试问题多 | 中 | 高 | 提前集成，持续测试 |

### 8.3 市场风险

| 风险ID | 风险描述 | 概率 | 影响 | 缓解措施 |
|--------|---------|------|------|---------|
| R-M1 | 市场极端波动 | 中 | 高 | 熔断机制 |
| R-M2 | AI策略表现不佳 | 中 | 高 | Prompt持续优化 |
| R-M3 | 未达收益目标 | 中 | 中 | 延长验证周期 |

---

## 9. 质量保证

### 9.1 代码质量

- 代码覆盖率 ≥ 80%
- 代码评审 100%
- Lint检查 100%通过

### 9.2 测试策略

| 测试类型 | 覆盖范围 | 执行时机 | 负责人 |
|---------|---------|---------|--------|
| 单元测试 | 所有Service | 每次PR | 开发者 |
| 集成测试 | API端点 | 每日构建 | 技术负责人 |
| E2E测试 | 关键流程 | 发布前 | 全员 |
| 压力测试 | 系统性能 | Week 3 | 技术负责人 |
| 安全测试 | 安全漏洞 | Week 3 | 技术负责人 |

### 9.3 文档质量

- 所有API 100%文档化
- 每个模块有README
- 部署文档可执行

---

## 10. 变更管理

### 10.1 变更流程

```
变更申请 → 影响评估 → 团队评审 → 决策 → 更新计划
```

### 10.2 变更记录

| 变更ID | 日期 | 变更内容 | 影响 | 批准人 |
|--------|------|---------|------|--------|
| - | - | - | - | - |

---

## 11. 附录

### A. 每周交付物

| 周次 | 交付物 |
|------|--------|
| Week 0 | 所有规划文档、架构设计 |
| Week 1 | Docker环境、数据库、API集成 |
| Week 2 | AI决策引擎、交易执行、风控系统 |
| Week 3 | 前端完整页面、WebSocket、Testnet验证 |
| Week 4 | 实盘运行、技术报告、商业评估 |

### B. 相关文档

| 文档编号 | 文档名称 |
|---------|---------|
| PLAN-001 | 项目概述 |
| PLAN-002 | 需求规格说明 |
| ARCH-001 | 系统架构设计 |
| DEV-001 | 开发环境搭建 |

### C. 变更记录

| 版本 | 日期 | 变更内容 | 变更人 |
|------|------|---------|--------|
| v1.0.0 | 2025-10-22 | 初始版本 | 产品经理 |

---

**文档结束**

> 📌 下一步：请阅读 [风险评估与管理 (AICOIN-PLAN-004)](./04-风险评估与管理.md)

