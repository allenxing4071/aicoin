# ğŸ—ºï¸ é¡µé¢è·¯ç”±æ–‡æ¡£

> AIcoinå‰ç«¯é¡µé¢ç»“æ„å’Œè·¯ç”±é…ç½®  
> **æœ€åæ›´æ–°**: 2025-11-02

---

## ğŸ“š è·¯ç”±æ¦‚è¿°

AIcoinä½¿ç”¨**Next.js 14 App Router**ï¼ŒåŸºäºæ–‡ä»¶ç³»ç»Ÿçš„è·¯ç”±ã€‚

### è·¯ç”±ç‰¹ç‚¹

- âœ… æ–‡ä»¶ç³»ç»Ÿè·¯ç”±
- âœ… åŠ¨æ€è·¯ç”±æ”¯æŒ
- âœ… åµŒå¥—å¸ƒå±€
- âœ… æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰
- âœ… å®¢æˆ·ç«¯å¯¼èˆª

---

## ğŸ—‚ï¸ è·¯ç”±ç»“æ„

```
frontend/app/
â”œâ”€â”€ page.tsx                    # ä¸»é¡µ (/)
â”œâ”€â”€ layout.tsx                  # æ ¹å¸ƒå±€
â”œâ”€â”€ globals.css                 # å…¨å±€æ ·å¼
â”‚
â”œâ”€â”€ models/                     # æ¨¡å‹ç›¸å…³
â”‚   â””â”€â”€ [slug]/                 # åŠ¨æ€è·¯ç”±
â”‚       â””â”€â”€ page.tsx            # æ¨¡å‹è¯¦æƒ…é¡µ (/models/:slug)
â”‚
â””â”€â”€ admin/                      # ç®¡ç†åå°
    â”œâ”€â”€ layout.tsx              # ç®¡ç†åå°å¸ƒå±€
    â”œâ”€â”€ page.tsx                # ç®¡ç†åå°é¦–é¡µ (/admin)
    â”œâ”€â”€ trades/
    â”‚   â””â”€â”€ page.tsx            # äº¤æ˜“è®°å½• (/admin/trades)
    â”œâ”€â”€ orders/
    â”‚   â””â”€â”€ page.tsx            # è®¢å•è®°å½• (/admin/orders)
    â”œâ”€â”€ accounts/
    â”‚   â””â”€â”€ page.tsx            # è´¦æˆ·å¿«ç…§ (/admin/accounts)
    â”œâ”€â”€ ai-decisions/
    â”‚   â””â”€â”€ page.tsx            # AIå†³ç­– (/admin/ai-decisions)
    â”œâ”€â”€ market-data/
    â”‚   â””â”€â”€ page.tsx            # å¸‚åœºæ•°æ® (/admin/market-data)
    â”œâ”€â”€ risk-events/
    â”‚   â””â”€â”€ page.tsx            # é£æ§äº‹ä»¶ (/admin/risk-events)
    â””â”€â”€ memory/
        â”œâ”€â”€ page.tsx            # è®°å¿†ç³»ç»Ÿ (/admin/memory)
        â”œâ”€â”€ lessons/
        â”‚   â””â”€â”€ page.tsx        # ç»éªŒæ•™è®­ (/admin/memory/lessons)
        â”œâ”€â”€ patterns/
        â”‚   â””â”€â”€ page.tsx        # äº¤æ˜“æ¨¡å¼ (/admin/memory/patterns)
        â””â”€â”€ strategies/
            â””â”€â”€ page.tsx        # ç­–ç•¥è¯„ä¼° (/admin/memory/strategies)
```

---

## ğŸ“„ é¡µé¢è¯¦æƒ…

### 1. ä¸»é¡µ `/`

**æ–‡ä»¶**: `app/page.tsx`

**åŠŸèƒ½**: äº¤æ˜“ç›‘æ§ä¸­å¿ƒ

**è®¿é—®**: `http://localhost:3000/`

**ç»„ä»¶**:
- PriceTicker - ä»·æ ¼è·‘é©¬ç¯
- ModelCard - æ¨¡å‹å¡ç‰‡
- TradeListComplete - äº¤æ˜“åˆ—è¡¨
- AIDecisionChat - AIå¯¹è¯
- PositionsList - æŒä»“åˆ—è¡¨
- AIStatusPanel - AIçŠ¶æ€
- DecisionTimeline - å†³ç­–å†å²
- PerformanceDashboard - æ€§èƒ½ä»ªè¡¨ç›˜

**Tabåˆ‡æ¢**:
```typescript
const tabs = [
  'å·²å®Œæˆäº¤æ˜“',
  'æ¨¡å‹å¯¹è¯',
  'æŒä»“',
  'AIçŠ¶æ€',
  'å†³ç­–å†å²',
  'æ€§èƒ½ä»ªè¡¨ç›˜'
];
```

**çŠ¶æ€ç®¡ç†**:
```typescript
const [activeTab, setActiveTab] = useState('trades');
const [selectedModel, setSelectedModel] = useState('all');
```

---

### 2. æ¨¡å‹è¯¦æƒ…é¡µ `/models/[slug]`

**æ–‡ä»¶**: `app/models/[slug]/page.tsx`

**åŠŸèƒ½**: æ˜¾ç¤ºå•ä¸ªAIæ¨¡å‹çš„è¯¦ç»†ä¿¡æ¯

**è®¿é—®**: 
- `http://localhost:3000/models/deepseek-chat-v3.1`
- `http://localhost:3000/models/gpt-4`

**åŠ¨æ€è·¯ç”±å‚æ•°**:
```typescript
interface PageProps {
  params: {
    slug: string;  // æ¨¡å‹slug
  };
}

export default function ModelDetailPage({ params }: PageProps) {
  const { slug } = params;
  // ...
}
```

**Tabåˆ‡æ¢**:
```typescript
const tabs = [
  'æ¦‚è§ˆ',
  'äº¤æ˜“å†å²',
  'å†³ç­–è®°å½•'
];
```

**APIè°ƒç”¨**:
```typescript
// è·å–æ¨¡å‹æ•°æ®
const accountResponse = await axios.get(`/api/v1/account/info`);
const metricsResponse = await axios.get(`/api/v1/performance/metrics`);
const statusResponse = await axios.get(`/api/v1/status`);
```

**æ˜¾ç¤ºå†…å®¹**:
- æ¨¡å‹åç§°å’ŒçŠ¶æ€
- è´¦æˆ·ä½™é¢
- æ€»æ”¶ç›Š
- äº¤æ˜“ç»Ÿè®¡
- æ€§èƒ½æŒ‡æ ‡

---

### 3. ç®¡ç†åå°é¦–é¡µ `/admin`

**æ–‡ä»¶**: `app/admin/page.tsx`

**åŠŸèƒ½**: ç³»ç»Ÿæ¦‚è§ˆå’Œæ•°æ®è¡¨åˆ—è¡¨

**è®¿é—®**: `http://localhost:3000/admin`

**æ˜¾ç¤ºå†…å®¹**:
- ç³»ç»Ÿç»Ÿè®¡å¡ç‰‡
- æ•°æ®è¡¨åˆ—è¡¨
- å¿«é€Ÿé“¾æ¥

**APIè°ƒç”¨**:
```typescript
const response = await axios.get('/api/v1/admin/stats');
```

---

### 4. äº¤æ˜“è®°å½• `/admin/trades`

**æ–‡ä»¶**: `app/admin/trades/page.tsx`

**åŠŸèƒ½**: æŸ¥çœ‹æ•°æ®åº“ä¸­çš„äº¤æ˜“è®°å½•

**è®¿é—®**: `http://localhost:3000/admin/trades`

**åŠŸèƒ½ç‰¹æ€§**:
- âœ… åˆ†é¡µæµè§ˆ
- âœ… å¤šç»´åº¦ç­›é€‰
- âœ… æ’åº
- âœ… æ•°æ®æ ¼å¼åŒ–

**APIè°ƒç”¨**:
```typescript
const response = await axios.get(
  `/api/v1/admin/trades?page=${page}&page_size=${pageSize}`
);
```

---

### 5. è®¢å•è®°å½• `/admin/orders`

**æ–‡ä»¶**: `app/admin/orders/page.tsx`

**åŠŸèƒ½**: æŸ¥çœ‹è®¢å•è®°å½•

**è®¿é—®**: `http://localhost:3000/admin/orders`

---

### 6. è´¦æˆ·å¿«ç…§ `/admin/accounts`

**æ–‡ä»¶**: `app/admin/accounts/page.tsx`

**åŠŸèƒ½**: æŸ¥çœ‹è´¦æˆ·å†å²å¿«ç…§

**è®¿é—®**: `http://localhost:3000/admin/accounts`

---

### 7. AIå†³ç­–æ—¥å¿— `/admin/ai-decisions`

**æ–‡ä»¶**: `app/admin/ai-decisions/page.tsx`

**åŠŸèƒ½**: æŸ¥çœ‹AIå†³ç­–å†å²

**è®¿é—®**: `http://localhost:3000/admin/ai-decisions`

---

### 8. å¸‚åœºæ•°æ® `/admin/market-data`

**æ–‡ä»¶**: `app/admin/market-data/page.tsx`

**åŠŸèƒ½**: æŸ¥çœ‹Kçº¿æ•°æ®

**è®¿é—®**: `http://localhost:3000/admin/market-data`

---

### 9. é£æ§äº‹ä»¶ `/admin/risk-events`

**æ–‡ä»¶**: `app/admin/risk-events/page.tsx`

**åŠŸèƒ½**: æŸ¥çœ‹é£æ§äº‹ä»¶æ—¥å¿—

**è®¿é—®**: `http://localhost:3000/admin/risk-events`

---

### 10. è®°å¿†ç³»ç»Ÿ `/admin/memory`

**æ–‡ä»¶**: `app/admin/memory/page.tsx`

**åŠŸèƒ½**: æŸ¥çœ‹AIè®°å¿†ç³»ç»Ÿæ•°æ®

**è®¿é—®**: `http://localhost:3000/admin/memory`

**å­é¡µé¢**:
- `/admin/memory/lessons` - ç»éªŒæ•™è®­
- `/admin/memory/patterns` - äº¤æ˜“æ¨¡å¼
- `/admin/memory/strategies` - ç­–ç•¥è¯„ä¼°

---

## ğŸ”— è·¯ç”±å¯¼èˆª

### 1. Linkç»„ä»¶

```typescript
import Link from 'next/link';

// åŸºæœ¬ç”¨æ³•
<Link href="/">é¦–é¡µ</Link>

// åŠ¨æ€è·¯ç”±
<Link href={`/models/${slug}`}>æŸ¥çœ‹è¯¦æƒ…</Link>

// å¸¦æŸ¥è¯¢å‚æ•°
<Link href="/admin/trades?page=2">ç¬¬2é¡µ</Link>
```

### 2. useRouter Hook

```typescript
import { useRouter } from 'next/navigation';

export default function Component() {
  const router = useRouter();
  
  // ç¼–ç¨‹å¼å¯¼èˆª
  const handleClick = () => {
    router.push('/models/deepseek-chat-v3.1');
  };
  
  // åé€€
  const handleBack = () => {
    router.back();
  };
  
  // åˆ·æ–°
  const handleRefresh = () => {
    router.refresh();
  };
}
```

### 3. usePathname Hook

```typescript
import { usePathname } from 'next/navigation';

export default function Component() {
  const pathname = usePathname();
  
  // å½“å‰è·¯å¾„
  console.log(pathname);  // "/models/deepseek-chat-v3.1"
  
  // æ¡ä»¶æ¸²æŸ“
  const isActive = pathname === '/admin';
}
```

---

## ğŸ¨ å¸ƒå±€ç³»ç»Ÿ

### 1. æ ¹å¸ƒå±€

**æ–‡ä»¶**: `app/layout.tsx`

**åŠŸèƒ½**: å…¨å±€å¸ƒå±€ï¼Œåº”ç”¨äºæ‰€æœ‰é¡µé¢

```typescript
export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <html lang="zh-CN">
      <body>
        {children}
      </body>
    </html>
  );
}
```

### 2. ç®¡ç†åå°å¸ƒå±€

**æ–‡ä»¶**: `app/admin/layout.tsx`

**åŠŸèƒ½**: ç®¡ç†åå°ä¸“ç”¨å¸ƒå±€

```typescript
export default function AdminLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <div className="admin-layout">
      <nav>{/* å¯¼èˆªæ  */}</nav>
      <main>{children}</main>
    </div>
  );
}
```

**ç‰¹æ€§**:
- ç»Ÿä¸€çš„å¯¼èˆªæ 
- åªè¯»æ¨¡å¼æ ‡è¯†
- é¡µé¢æ ‡ç­¾åˆ‡æ¢

---

## ğŸ” è·¯ç”±å®ˆå«

### å½“å‰çŠ¶æ€

- âŒ æ— ç”¨æˆ·è®¤è¯
- âŒ æ— æƒé™æ§åˆ¶
- âœ… æ‰€æœ‰é¡µé¢å…¬å¼€è®¿é—®

### è®¡åˆ’å®ç°

```typescript
// app/admin/AuthGuard.tsx
export function AuthGuard({ children }: { children: React.ReactNode }) {
  const { user } = useAuth();
  
  if (!user) {
    redirect('/login');
  }
  
  return <>{children}</>;
}
```

---

## ğŸ“± å“åº”å¼è·¯ç”±

### ç§»åŠ¨ç«¯é€‚é…

```typescript
// æ£€æµ‹ç§»åŠ¨ç«¯
const isMobile = useMediaQuery('(max-width: 768px)');

// æ¡ä»¶æ¸²æŸ“
if (isMobile) {
  return <MobileView />;
}

return <DesktopView />;
```

---

## ğŸ” è·¯ç”±å‚æ•°

### 1. åŠ¨æ€è·¯ç”±å‚æ•°

```typescript
// app/models/[slug]/page.tsx
interface PageProps {
  params: {
    slug: string;
  };
}

export default function Page({ params }: PageProps) {
  const { slug } = params;
  // slug = "deepseek-chat-v3.1"
}
```

### 2. æŸ¥è¯¢å‚æ•°

```typescript
import { useSearchParams } from 'next/navigation';

export default function Page() {
  const searchParams = useSearchParams();
  
  const page = searchParams.get('page');  // "2"
  const filter = searchParams.get('filter');  // "BTC"
}
```

### 3. è®¾ç½®æŸ¥è¯¢å‚æ•°

```typescript
import { useRouter, usePathname, useSearchParams } from 'next/navigation';

export default function Page() {
  const router = useRouter();
  const pathname = usePathname();
  const searchParams = useSearchParams();
  
  const setPage = (page: number) => {
    const params = new URLSearchParams(searchParams);
    params.set('page', page.toString());
    router.push(`${pathname}?${params.toString()}`);
  };
}
```

---

## ğŸš€ è·¯ç”±æ€§èƒ½ä¼˜åŒ–

### 1. é¢„åŠ è½½

```typescript
import Link from 'next/link';

// Linkç»„ä»¶è‡ªåŠ¨é¢„åŠ è½½
<Link href="/models/deepseek-chat-v3.1" prefetch={true}>
  æŸ¥çœ‹è¯¦æƒ…
</Link>
```

### 2. æ‡’åŠ è½½

```typescript
import dynamic from 'next/dynamic';

// åŠ¨æ€å¯¼å…¥ç»„ä»¶
const HeavyComponent = dynamic(
  () => import('@/app/components/HeavyComponent'),
  { loading: () => <LoadingSkeleton /> }
);
```

### 3. è·¯ç”±ç¼“å­˜

Next.js 14è‡ªåŠ¨ç¼“å­˜è·¯ç”±å’Œæ•°æ®ã€‚

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: å¦‚ä½•æ·»åŠ æ–°é¡µé¢ï¼Ÿ

```bash
# 1. åˆ›å»ºé¡µé¢æ–‡ä»¶
mkdir -p app/new-page
touch app/new-page/page.tsx

# 2. ç¼–å†™é¡µé¢ç»„ä»¶
export default function NewPage() {
  return <div>New Page</div>;
}

# 3. è®¿é—®
http://localhost:3000/new-page
```

### Q2: å¦‚ä½•åˆ›å»ºåŠ¨æ€è·¯ç”±ï¼Ÿ

```bash
# 1. åˆ›å»ºåŠ¨æ€è·¯ç”±ç›®å½•
mkdir -p app/posts/[id]
touch app/posts/[id]/page.tsx

# 2. ä½¿ç”¨params
export default function Post({ params }: { params: { id: string } }) {
  return <div>Post ID: {params.id}</div>;
}

# 3. è®¿é—®
http://localhost:3000/posts/123
```

### Q3: å¦‚ä½•å®ç°è·¯ç”±å®ˆå«ï¼Ÿ

```typescript
// app/admin/layout.tsx
import { redirect } from 'next/navigation';

export default function AdminLayout({ children }) {
  const isAuthenticated = checkAuth();
  
  if (!isAuthenticated) {
    redirect('/login');
  }
  
  return <>{children}</>;
}
```

---

## ğŸ“š å‚è€ƒèµ„æº

### å®˜æ–¹æ–‡æ¡£
- [Next.js App Router](https://nextjs.org/docs/app)
- [Next.js Routing](https://nextjs.org/docs/app/building-your-application/routing)
- [Next.js Dynamic Routes](https://nextjs.org/docs/app/building-your-application/routing/dynamic-routes)

### ç¤ºä¾‹ä»£ç 
- [Next.js Examples](https://github.com/vercel/next.js/tree/canary/examples)

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2025-11-02  
**ç»´æŠ¤çŠ¶æ€**: âœ… Active

