# ğŸ—ï¸ AIcoin ç³»ç»Ÿæ¶æ„æ–‡æ¡£

> **å®Œæ•´æŠ€æœ¯æ¶æ„è¯´æ˜** | v4.1 | 2025-11-15

---

## ğŸ“‹ ç›®å½•

1. [æ•´ä½“æ¶æ„](#1-æ•´ä½“æ¶æ„)
2. [æ ¸å¿ƒæ¨¡å—](#2-æ ¸å¿ƒæ¨¡å—)
3. [æ•°æ®æ¶æ„](#3-æ•°æ®æ¶æ„)
4. [éƒ¨ç½²æ¶æ„](#4-éƒ¨ç½²æ¶æ„)
5. [æ‰©å±•æ€§è®¾è®¡](#5-æ‰©å±•æ€§è®¾è®¡)

---

## 1. æ•´ä½“æ¶æ„

### 1.1 ç³»ç»Ÿåˆ†å±‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å‰ç«¯å±‚                             â”‚
â”‚              Next.js 14 + TypeScript                 â”‚
â”‚         (Web Dashboard + ç®¡ç†åå°)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚ HTTP/WebSocket
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   API ç½‘å…³å±‚                          â”‚
â”‚              FastAPI + è®¤è¯ + é™æµ                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  æ ¸å¿ƒæœåŠ¡å±‚                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ AIå†³ç­–   â”‚ æƒ…æŠ¥ç³»ç»Ÿ â”‚ è¾©è®ºç³»ç»Ÿ â”‚ äº¤æ˜“æ‰§è¡Œ â”‚      â”‚
â”‚  â”‚ DeepSeek â”‚ Qwen     â”‚ å¤šç©ºå¯¹æŠ— â”‚ äº¤æ˜“æ‰€   â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ æƒé™ç®¡ç† â”‚ é£æ§ç³»ç»Ÿ â”‚ è®°å¿†ç³»ç»Ÿ â”‚ ç›‘æ§ç³»ç»Ÿ â”‚      â”‚
â”‚  â”‚ L0-L5    â”‚ 8é¡¹çº¢çº¿  â”‚ ä¸‰å±‚è®°å¿† â”‚ æ€§èƒ½ç›‘æ§ â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   æ•°æ®å±‚                              â”‚
â”‚  PostgreSQL (ä¸»æ•°æ®) + Redis (ç¼“å­˜) + Qdrant (å‘é‡)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 æ ¸å¿ƒæŠ€æœ¯æ ˆ

| å±‚çº§ | æŠ€æœ¯ | ç”¨é€” |
|------|------|------|
| **å‰ç«¯** | Next.js 14 | Web åº”ç”¨æ¡†æ¶ |
| | TypeScript | ç±»å‹å®‰å…¨ |
| | TailwindCSS | UI æ ·å¼ |
| **åç«¯** | FastAPI | API æœåŠ¡ |
| | Python 3.11 | ä¸»è¦è¯­è¨€ |
| | Pydantic | æ•°æ®éªŒè¯ |
| **AI** | DeepSeek V3 | äº¤æ˜“å†³ç­– |
| | Qwen | æƒ…æŠ¥åˆ†æ |
| **æ•°æ®åº“** | PostgreSQL 15 | ä¸»æ•°æ®åº“ |
| | Redis 7 | ç¼“å­˜/é˜Ÿåˆ— |
| | Qdrant | å‘é‡æ•°æ®åº“ |
| **éƒ¨ç½²** | Docker | å®¹å™¨åŒ– |
| | Docker Compose | ç¼–æ’ |
| **ç›‘æ§** | Prometheus | æŒ‡æ ‡æ”¶é›† |
| | Grafana | å¯è§†åŒ– |

---

## 2. æ ¸å¿ƒæ¨¡å—

### 2.1 AI å†³ç­–å¼•æ“

**èŒè´£**: æ ¸å¿ƒäº¤æ˜“å†³ç­–é€»è¾‘

**å†³ç­–æµç¨‹**:
```
1. æƒé™æ£€æŸ¥ (L0-L5)
   â†“
2. è·å–å¸‚åœºæ•°æ®
   â†“
3. æ£€ç´¢å†å²è®°å¿† (Qdrant)
   â†“
4. è·å–æƒ…æŠ¥æŠ¥å‘Š (Qwen, å¯é€‰)
   â†“
5. å¯åŠ¨è¾©è®ºç³»ç»Ÿ (å¤šç©ºå¯¹æŠ—, å¯é€‰)
   â†“
6. AI å†³ç­– (DeepSeek)
   â†“
7. è½¯çº¦æŸéªŒè¯ (ç½®ä¿¡åº¦ã€é¢‘ç‡)
   â†“
8. ç¡¬çº¦æŸéªŒè¯ (8 é¡¹çº¢çº¿)
   â†“
9. æ‰§è¡Œäº¤æ˜“ / æ‹’ç»
   â†“
10. è®°å½•å†³ç­– + æ›´æ–°æƒé™
```

**å…³é”®ç±»**:
- `AIOrchestrator`: ä¸»åè°ƒå™¨
- `DecisionEngine`: å†³ç­–å¼•æ“
- `PromptBuilder`: Prompt æ„å»º
- `ConstraintValidator`: çº¦æŸéªŒè¯

---

### 2.2 æƒé™ç®¡ç†ç³»ç»Ÿ

**L0-L5 åŠ¨æ€æƒé™**:

| ç­‰çº§ | å•ä»“ä½ | æ æ† | ç½®ä¿¡åº¦ | æ—¥é¢‘ç‡ | é€‚ç”¨åœºæ™¯ |
|------|--------|------|--------|--------|---------|
| L0 | 0% | 1x | 100% | 0 | ğŸ›¡ï¸ ä¿æŠ¤æ¨¡å¼ |
| L1 | 10% | 2x | 80% | 1 | ğŸŒ± æ–°æ‰‹çº§ |
| L2 | 12% | 2x | 75% | 2 | ğŸ“ˆ æˆé•¿çº§ |
| L3 | 15% | 3x | 70% | 4 | âš–ï¸ ç¨³å®šçº§ |
| L4 | 20% | 4x | 65% | 6 | ğŸ¯ ç†Ÿç»ƒçº§ |
| L5 | 25% | 5x | 60% | æ— é™ | ğŸ† ä¸“å®¶çº§ |

**å‡çº§æ¡ä»¶**:
- L1â†’L2: 7å¤© + 50%èƒœç‡ + å›æ’¤<15%
- L2â†’L3: 30å¤© + 50%èƒœç‡ + å¤æ™®1.0
- L3â†’L4: 60%èƒœç‡ + å¤æ™®1.5
- L4â†’L5: 70%èƒœç‡ + 20å¤©è¿ç›ˆ

**é™çº§è§¦å‘**:
- è¿ç»­äºæŸ
- èƒœç‡ä¸‹é™
- è§¦å‘é£æ§ â†’ ç›´æ¥é™è‡³ L0

**RBAC æ‰©å±•**:
- è§’è‰²: Admin, Trader, Viewer
- æƒé™: ç»†ç²’åº¦æ§åˆ¶
- å®¡è®¡: å®Œæ•´æ“ä½œæ—¥å¿—

---

### 2.3 é£æ§ç³»ç»Ÿ

**8 é¡¹ç¡¬çº¦æŸ (çº¢çº¿)**:
```
1. ä¿è¯é‡‘ç‡ â‰¥ 20%        # ä½äº 20% æ‹’ç»äº¤æ˜“
2. æ€»å›æ’¤ < 15%           # è¶…è¿‡ 15% å¼ºåˆ¶å¹³ä»“
3. å•æ—¥äºæŸ < 5%          # è¶…è¿‡ 5% åœæ­¢äº¤æ˜“
4. æ æ† â‰¤ 2x              # æœ€å¤§ 2 å€æ æ†
5. ç°é‡‘å‚¨å¤‡ â‰¥ 10%        # è‡³å°‘ä¿ç•™ 10% ç°é‡‘
6. å•èµ„äº§æ•å£ â‰¤ 10%      # å•å¸ç§ä¸è¶… 10%
7. å•ç¬”äºæŸ < 5%          # å•ç¬”ä¸è¶… 5%
8. å¼ºåˆ¶å¹³ä»“é˜ˆå€¼ = 15%    # 15% å›æ’¤å¼ºåˆ¶å¹³ä»“
```

**è½¯çº¦æŸ (æŒ‡å¯¼)**:
- ç½®ä¿¡åº¦é—¨æ§› (æ ¹æ®æƒé™ç­‰çº§)
- äº¤æ˜“é¢‘ç‡é™åˆ¶
- ä»“ä½å¤§å°å»ºè®®

**å®ç°**:
- `ConstraintValidator`: çº¦æŸéªŒè¯å™¨
- `RiskManager`: é£é™©ç®¡ç†å™¨
- `PositionManager`: ä»“ä½ç®¡ç†å™¨

---

### 2.4 è®°å¿†å­¦ä¹ ç³»ç»Ÿ

**ä¸‰å±‚è®°å¿†æ¶æ„**:

#### ç¬¬ä¸€å±‚: çŸ­æœŸè®°å¿† (Redis)
- **å­˜å‚¨**: æœ€è¿‘ 100 ä¸ªå†³ç­–
- **ä¿ç•™**: 24 å°æ—¶ - 7 å¤©
- **ç”¨é€”**: å¿«é€Ÿæ£€ç´¢ã€é¢‘ç‡æ§åˆ¶
- **æ•°æ®**: å†³ç­–è®°å½•ã€äº¤æ˜“æ¬¡æ•°ã€å®æ—¶æŒ‡æ ‡

#### ç¬¬äºŒå±‚: é•¿æœŸè®°å¿† (Qdrant)
- **å­˜å‚¨**: å†å²å†³ç­–å‘é‡åŒ–
- **ä¿ç•™**: æ°¸ä¹…
- **ç”¨é€”**: ç›¸ä¼¼æƒ…å†µæ£€ç´¢ã€æ¨¡å¼è¯†åˆ«
- **æŠ€æœ¯**: å‘é‡ç›¸ä¼¼åº¦æœç´¢

#### ç¬¬ä¸‰å±‚: çŸ¥è¯†åº“ (PostgreSQL)
- **å­˜å‚¨**: ç»éªŒæ•™è®­ã€ç­–ç•¥è¯„ä¼°
- **ä¿ç•™**: æ°¸ä¹…
- **ç”¨é€”**: ç»“æ„åŒ–çŸ¥è¯†ã€ç»Ÿè®¡åˆ†æ
- **è¡¨**: `decision_history`, `performance_metrics`, `lessons_learned`

**è®°å¿†æ³¨å…¥æµç¨‹**:
```python
# 1. æ£€ç´¢ç›¸ä¼¼å†å²
similar_cases = qdrant.search(current_market_state, limit=5)

# 2. æå–ç»éªŒæ•™è®­
lessons = postgres.query_lessons(similar_cases)

# 3. æ³¨å…¥ Prompt
prompt = build_prompt(
    market_data=current_data,
    memory=similar_cases,
    lessons=lessons
)
```

---

### 2.5 æƒ…æŠ¥ç³»ç»Ÿ (Qwen)

**èŒè´£**: æ”¶é›†å’Œåˆ†æå¸‚åœºæƒ…æŠ¥

**æ•°æ®æº**:
- æ–°é—»èµ„è®¯
- ç¤¾äº¤åª’ä½“
- é“¾ä¸Šæ•°æ®
- å·¨é²¸åŠ¨å‘

**å¤„ç†æµç¨‹**:
```
1. æ•°æ®é‡‡é›†
   â†“
2. Qwen åˆæ­¥ç­›é€‰
   â†“
3. Qwen æ·±åº¦åˆ†æ
   â†“
4. ç”Ÿæˆæƒ…æŠ¥æŠ¥å‘Š
   â†“
5. å­˜å‚¨åˆ° PostgreSQL
   â†“
6. å‘é‡åŒ–å­˜å‚¨åˆ° Qdrant
```

**é›†æˆæ–¹å¼**:
- å®šæ—¶ä»»åŠ¡ (30 åˆ†é’Ÿ/æ¬¡)
- æŒ‰éœ€æŸ¥è¯¢
- æ³¨å…¥ AI å†³ç­– Prompt

---

### 2.6 è¾©è®ºç³»ç»Ÿ

**èŒè´£**: å¤šç©ºå¯¹æŠ—å†³ç­–æœºåˆ¶

**è§’è‰²**:
- **Bull Analyst** (å¤šå¤´åˆ†æå¸ˆ): å¯»æ‰¾åšå¤šç†ç”±
- **Bear Analyst** (ç©ºå¤´åˆ†æå¸ˆ): å¯»æ‰¾åšç©ºç†ç”±
- **Research Manager** (ç ”ç©¶ç»ç†): ç»¼åˆåˆ¤æ–­

**è¾©è®ºæµç¨‹**:
```
1. Bull Analyst æå‡ºå¤šå¤´è§‚ç‚¹
   â†“
2. Bear Analyst æå‡ºç©ºå¤´è§‚ç‚¹
   â†“
3. Bull åé©³ Bear
   â†“
4. Bear åé©³ Bull
   â†“
5. Research Manager ç»¼åˆåˆ¤æ–­
   â†“
6. è¾“å‡ºæœ€ç»ˆå†³ç­–
```

**è®°å¿†ç³»ç»Ÿ**:
- æ¯ä¸ªè§’è‰²ç‹¬ç«‹è®°å¿†
- ä½¿ç”¨ Qdrant å­˜å‚¨å†å²è¾©è®º
- å­¦ä¹ å†å²æˆåŠŸ/å¤±è´¥æ¡ˆä¾‹

**é…ç½®**:
- è¾©è®ºè½®æ•°: 1-5 è½®
- æ˜¯å¦å¯ç”¨: å¯é…ç½®
- è®°å¿†æ£€ç´¢: Top-K

---

### 2.7 å¤šäº¤æ˜“æ‰€é›†æˆ

**æ”¯æŒçš„äº¤æ˜“æ‰€**:
- Hyperliquid (ä¸»è¦)
- Binance (è®¡åˆ’ä¸­)

**è®¾è®¡æ¨¡å¼**:

#### Adapter Pattern (é€‚é…å™¨æ¨¡å¼)
```python
class BaseExchangeAdapter(ABC):
    @abstractmethod
    async def get_balance(self) -> Dict
    
    @abstractmethod
    async def place_order(self, order: Order) -> OrderResult
    
    @abstractmethod
    async def get_positions(self) -> List[Position]

class HyperliquidAdapter(BaseExchangeAdapter):
    # Hyperliquid ç‰¹å®šå®ç°
    
class BinanceAdapter(BaseExchangeAdapter):
    # Binance ç‰¹å®šå®ç°
```

#### Factory Pattern (å·¥å‚æ¨¡å¼)
```python
class ExchangeFactory:
    @staticmethod
    def create(exchange_name: str) -> BaseExchangeAdapter:
        if exchange_name == "hyperliquid":
            return HyperliquidAdapter()
        elif exchange_name == "binance":
            return BinanceAdapter()
```

**æ•°æ®åº“è®¾è®¡**:
- `exchange_configs`: äº¤æ˜“æ‰€é…ç½®
- `market_data_kline`: å¤šäº¤æ˜“æ‰€ K çº¿æ•°æ®

---

### 2.8 ç›‘æ§ç³»ç»Ÿ

**ç›‘æ§æŒ‡æ ‡**:

#### ç³»ç»ŸæŒ‡æ ‡
- API å“åº”æ—¶é—´
- æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½
- ç¼“å­˜å‘½ä¸­ç‡
- é”™è¯¯ç‡

#### äº¤æ˜“æŒ‡æ ‡
- å†³ç­–é¢‘ç‡
- æ‰§è¡Œå»¶è¿Ÿ
- æˆåŠŸç‡
- ç›ˆäºç»Ÿè®¡

#### AI æŒ‡æ ‡
- AI è°ƒç”¨æ¬¡æ•°
- AI å“åº”æ—¶é—´
- Token æ¶ˆè€—
- æˆæœ¬ç»Ÿè®¡

**å®ç°**:
- `AIModelUsageLog`: AI ä½¿ç”¨æ—¥å¿—
- `PerformanceMetrics`: æ€§èƒ½æŒ‡æ ‡
- å®æ—¶ç›‘æ§ Dashboard

---

## 3. æ•°æ®æ¶æ„

### 3.1 PostgreSQL æ•°æ®åº“

**æ ¸å¿ƒè¡¨**:

#### äº¤æ˜“ç›¸å…³
- `trades`: äº¤æ˜“è®°å½•
- `positions`: æŒä»“ä¿¡æ¯
- `orders`: è®¢å•è®°å½•

#### å†³ç­–ç›¸å…³
- `decision_history`: å†³ç­–å†å²
- `ai_model_usage_log`: AI ä½¿ç”¨æ—¥å¿—
- `debate_history`: è¾©è®ºå†å²

#### é…ç½®ç›¸å…³
- `permission_level_configs`: æƒé™é…ç½®
- `exchange_configs`: äº¤æ˜“æ‰€é…ç½®
- `prompt_templates`: Prompt æ¨¡æ¿

#### ç”¨æˆ·ç›¸å…³
- `users`: ç”¨æˆ·è¡¨
- `roles`: è§’è‰²è¡¨
- `permissions`: æƒé™è¡¨
- `audit_logs`: å®¡è®¡æ—¥å¿—

**ç´¢å¼•ç­–ç•¥**:
```sql
-- é«˜é¢‘æŸ¥è¯¢ä¼˜åŒ–
CREATE INDEX idx_trades_created_at ON trades(created_at DESC);
CREATE INDEX idx_decision_history_timestamp ON decision_history(timestamp DESC);
CREATE INDEX idx_ai_usage_model_provider ON ai_model_usage_log(model, provider);

-- å¤åˆç´¢å¼•
CREATE INDEX idx_trades_symbol_time ON trades(symbol, created_at);
```

---

### 3.2 Redis ç¼“å­˜

**æ•°æ®ç»“æ„**:

#### String (å­—ç¬¦ä¸²)
```
permission:level:current = "L1"
trading:enabled = "true"
```

#### List (åˆ—è¡¨)
```
decisions:recent = [decision1, decision2, ...]  # æœ€è¿‘ 100 ä¸ª
```

#### Hash (å“ˆå¸Œ)
```
account:info = {
    balance: "1000.00",
    equity: "1050.00",
    margin_ratio: "0.85"
}
```

#### Sorted Set (æœ‰åºé›†åˆ)
```
performance:daily = {
    "2025-11-15": 1.05,
    "2025-11-14": 0.98,
    ...
}
```

**è¿‡æœŸç­–ç•¥**:
- çŸ­æœŸæ•°æ®: 1 å°æ—¶
- ä¸­æœŸæ•°æ®: 24 å°æ—¶
- é•¿æœŸæ•°æ®: 7 å¤©

---

### 3.3 Qdrant å‘é‡æ•°æ®åº“

**Collection ç»“æ„**:

#### decisions_memory
```json
{
  "id": "uuid",
  "vector": [0.1, 0.2, ...],  // 1536 ç»´
  "payload": {
    "timestamp": "2025-11-15T10:00:00Z",
    "market_state": {...},
    "decision": {...},
    "result": "profit/loss",
    "pnl": 0.05
  }
}
```

#### intelligence_reports
```json
{
  "id": "uuid",
  "vector": [0.1, 0.2, ...],
  "payload": {
    "timestamp": "2025-11-15T10:00:00Z",
    "source": "news/social/onchain",
    "content": "...",
    "sentiment": "bullish/bearish/neutral"
  }
}
```

**æ£€ç´¢ç­–ç•¥**:
- ç›¸ä¼¼åº¦ç®—æ³•: Cosine Similarity
- Top-K: 5-10 ä¸ªæœ€ç›¸ä¼¼æ¡ˆä¾‹
- è¿‡æ»¤æ¡ä»¶: æ—¶é—´èŒƒå›´ã€ç»“æœç±»å‹

---

## 4. éƒ¨ç½²æ¶æ„

### 4.1 Docker Compose éƒ¨ç½²

**æœåŠ¡æ¸…å•**:
```yaml
services:
  backend:      # FastAPI åç«¯
  frontend:     # Next.js å‰ç«¯
  postgres:     # PostgreSQL æ•°æ®åº“
  redis:        # Redis ç¼“å­˜
  qdrant:       # Qdrant å‘é‡æ•°æ®åº“
  nginx:        # åå‘ä»£ç† (å¯é€‰)
```

**ç½‘ç»œæ‹“æ‰‘**:
```
Internet
    â†“
  Nginx (80/443)
    â†“
â”Œâ”€â”€â”€â”´â”€â”€â”€â”
â”‚       â”‚
Frontend  Backend
(3000)    (8000)
          â†“
    â”Œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”
    â”‚     â”‚     â”‚
PostgreSQL Redis Qdrant
(5432)  (6379) (6333)
```

---

### 4.2 ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

**æœåŠ¡å™¨è¦æ±‚**:
- **CPU**: 4 æ ¸å¿ƒ+
- **å†…å­˜**: 8GB+
- **å­˜å‚¨**: 50GB+
- **ç½‘ç»œ**: ç¨³å®šäº’è”ç½‘

**éƒ¨ç½²æ–¹å¼**:

#### æ–¹å¼ä¸€: Docker Compose (æ¨è)
```bash
docker-compose up -d
```

#### æ–¹å¼äºŒ: Git è‡ªåŠ¨åŒ–éƒ¨ç½²
```bash
./scripts/deploy-git.sh
```

#### æ–¹å¼ä¸‰: æ‰‹åŠ¨éƒ¨ç½²
```bash
# åç«¯
cd backend && uvicorn app.main:app --host 0.0.0.0 --port 8000

# å‰ç«¯
cd frontend && npm run build && npm run start
```

---

### 4.3 é«˜å¯ç”¨æ¶æ„ (æœªæ¥)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Load Balancer              â”‚
â”‚         (Nginx/HAProxy)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚            â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Backend 1  â”‚ â”‚  Backend 2  â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚            â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   PostgreSQL (Primary)      â”‚
    â”‚   PostgreSQL (Replica)      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. æ‰©å±•æ€§è®¾è®¡

### 5.1 æ°´å¹³æ‰©å±•

**æ— çŠ¶æ€æœåŠ¡**:
- Backend API: å¯å¤šå®ä¾‹éƒ¨ç½²
- Frontend: å¯ CDN åŠ é€Ÿ

**æœ‰çŠ¶æ€æœåŠ¡**:
- PostgreSQL: ä¸»ä»å¤åˆ¶
- Redis: é›†ç¾¤æ¨¡å¼
- Qdrant: åˆ†ç‰‡å­˜å‚¨

---

### 5.2 æ’ä»¶åŒ–è®¾è®¡

**äº¤æ˜“æ‰€æ’ä»¶**:
```python
# æ–°å¢äº¤æ˜“æ‰€åªéœ€å®ç° Adapter
class NewExchangeAdapter(BaseExchangeAdapter):
    # å®ç°æ¥å£æ–¹æ³•
    pass
```

**AI æ¨¡å‹æ’ä»¶**:
```python
# æ–°å¢ AI æ¨¡å‹åªéœ€å®ç°æ¥å£
class NewAIProvider(BaseAIProvider):
    # å®ç°æ¥å£æ–¹æ³•
    pass
```

---

### 5.3 æ€§èƒ½ä¼˜åŒ–

**æ•°æ®åº“ä¼˜åŒ–**:
- ç´¢å¼•ä¼˜åŒ–
- æŸ¥è¯¢ä¼˜åŒ–
- è¿æ¥æ± 
- è¯»å†™åˆ†ç¦»

**ç¼“å­˜ç­–ç•¥**:
- Redis å¤šçº§ç¼“å­˜
- åº”ç”¨å±‚ç¼“å­˜
- CDN ç¼“å­˜

**å¼‚æ­¥å¤„ç†**:
- Celery ä»»åŠ¡é˜Ÿåˆ—
- å¼‚æ­¥ I/O (asyncio)
- WebSocket æ¨é€

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [å¿«é€Ÿå¼€å§‹](../quickstart.md) - 5 åˆ†é’Ÿå¿«é€Ÿéƒ¨ç½²
- [API æ–‡æ¡£](../09-APIæ¥å£æ–‡æ¡£/README.md) - API æ¥å£è¯´æ˜
- [éƒ¨ç½²æŒ‡å—](../deployment/quick-deploy.md) - è¯¦ç»†éƒ¨ç½²æ­¥éª¤

---

## ğŸ”„ ç‰ˆæœ¬å†å²

- **v4.1** (2025-11-15): æ·»åŠ è¾©è®ºç³»ç»Ÿã€å¤šäº¤æ˜“æ‰€æ”¯æŒ
- **v4.0** (2025-11-13): æ·»åŠ  Prompt æ¨¡æ¿ç³»ç»Ÿ
- **v3.5** (2025-11-12): HTTPS éƒ¨ç½²æ”¯æŒ
- **v3.4** (2025-11-11): è¾©è®ºç³»ç»Ÿå‘å¸ƒ
- **v3.3** (2025-11-10): RBAC æƒé™ç³»ç»Ÿ
- **v3.0** (2025-11-06): æƒ…æŠ¥ç³»ç»Ÿé›†æˆ

---

**æ–‡æ¡£ç»´æŠ¤**: AIcoin Team  
**æœ€åæ›´æ–°**: 2025-11-15  
**æ–‡æ¡£ç‰ˆæœ¬**: v2.0

