# ğŸ” AIcoiné¡¹ç›®æ·±åº¦åˆ†ææŠ¥å‘Š

> **åˆ†ææ—¶é—´**: 2025-11-14  
> **å½“å‰ç‰ˆæœ¬**: v3.4.0  
> **åˆ†æè§†è§’**: äº§å“ç»ç† + æŠ€æœ¯æ¶æ„  
> **æ–‡æ¡£çŠ¶æ€**: âœ… å®Œæ•´åˆ†æ

---

## ğŸ“‹ æ‰§è¡Œæ‘˜è¦

### é¡¹ç›®å®šä½
AIcoinæ˜¯ä¸€ä¸ª**ä¼ä¸šçº§AIé©±åŠ¨çš„åŠ å¯†è´§å¸æ™ºèƒ½äº¤æ˜“ç³»ç»Ÿ**ï¼Œé‡‡ç”¨å¤šAIå¹³å°ååŒæ¶æ„ï¼ˆDeepSeekå†³ç­– + Qwenæƒ…æŠ¥ + Doubaoåˆ†æï¼‰ï¼Œé›†æˆäº†å®Œæ•´çš„é£æ§ä½“ç³»ã€æƒé™ç®¡ç†ã€æˆæœ¬æ§åˆ¶å’Œæƒ…æŠ¥åˆ†æåŠŸèƒ½ã€‚

### æ ¸å¿ƒè¯„ä¼°

| ç»´åº¦ | è¯„åˆ† | è¯´æ˜ |
|------|------|------|
| **åŠŸèƒ½å®Œæ•´æ€§** | â­â­â­â­â­ | åŠŸèƒ½å·²è¶³å¤Ÿå®Œå–„ï¼Œå¯æŠ•å…¥ä½¿ç”¨ |
| **æŠ€æœ¯æ¶æ„** | â­â­â­â­â­ | åˆ†å±‚æ¸…æ™°ï¼Œæ¨¡å—åŒ–è®¾è®¡ä¼˜ç§€ |
| **ä»£ç è´¨é‡** | â­â­â­â­ | ç»“æ„è‰¯å¥½ï¼Œæœ‰æ”¹è¿›ç©ºé—´ |
| **æ–‡æ¡£å®Œæ•´åº¦** | â­â­â­â­â­ | æ–‡æ¡£ä½“ç³»å®Œæ•´ï¼Œæ›´æ–°åŠæ—¶ |
| **éƒ¨ç½²æˆç†Ÿåº¦** | â­â­â­â­ | DockeråŒ–éƒ¨ç½²ï¼Œæ”¯æŒå¤šç¯å¢ƒ |
| **ç”Ÿäº§å°±ç»ªåº¦** | â­â­â­â­ | å·²å…·å¤‡ç”Ÿäº§ç¯å¢ƒè¿è¡Œèƒ½åŠ› |

**ç»“è®º**: âœ… **é¡¹ç›®å·²è¾¾åˆ°å¯ç”¨çŠ¶æ€ï¼ŒåŠŸèƒ½è¶³å¤Ÿå®Œå–„ï¼Œå¯ä»¥æŠ•å…¥å®é™…ä½¿ç”¨**

---

## ğŸ—ï¸ ä¸€ã€ç³»ç»Ÿæ¶æ„åˆ†æ

### 1.1 æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AIcoin ç³»ç»Ÿæ¶æ„                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚  å‰ç«¯å±‚      â”‚â—„â”€â”€â”€â”€â–ºâ”‚  APIç½‘å…³     â”‚                  â”‚
â”‚  â”‚  Next.js 14 â”‚      â”‚  FastAPI    â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                              â”‚                          â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚         â†“                    â†“                    â†“    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ AIå†³ç­–å¼•æ“   â”‚   â”‚ æƒ…æŠ¥ç³»ç»Ÿ     â”‚   â”‚ äº¤æ˜“æ‰§è¡Œ     â”‚  â”‚
â”‚  â”‚ DeepSeek    â”‚   â”‚ Qwen        â”‚   â”‚ Hyperliquid â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â”‚                    â”‚                    â”‚    â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                              â†“                          â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚         â”‚        æ•°æ®å­˜å‚¨å±‚                    â”‚         â”‚
â”‚         â”‚  PostgreSQL + Redis + Qdrant       â”‚         â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 æ ¸å¿ƒè®¾è®¡åŸåˆ™

#### âœ… ä¼˜ç§€è®¾è®¡ç‚¹

1. **åˆ†å±‚æ¶æ„æ¸…æ™°**
   - å‰ç«¯å±‚ã€APIå±‚ã€æœåŠ¡å±‚ã€æ•°æ®å±‚èŒè´£æ˜ç¡®
   - æ¨¡å—é—´ä½è€¦åˆã€é«˜å†…èš
   - æ˜“äºç»´æŠ¤å’Œæ‰©å±•

2. **åŒAIå¼•æ“æ¶æ„**
   - Qwenè´Ÿè´£æƒ…æŠ¥æ”¶é›†ï¼ˆå¯é€‰å¢å¼ºï¼‰
   - DeepSeekè´Ÿè´£äº¤æ˜“å†³ç­–ï¼ˆæ ¸å¿ƒå¿…éœ€ï¼‰
   - èŒè´£åˆ†ç¦»ï¼Œäº’ä¸ä¾èµ–

3. **å¤šæ•°æ®åº“ååŒ**
   - PostgreSQL: ç»“æ„åŒ–æ•°æ®ï¼ˆäº¤æ˜“ã€è®¢å•ã€ç”¨æˆ·ï¼‰
   - Redis: ç¼“å­˜å’Œå®æ—¶æ•°æ®ï¼ˆä¼šè¯ã€çŸ­æœŸè®°å¿†ï¼‰
   - Qdrant: å‘é‡æ•°æ®ï¼ˆé•¿æœŸè®°å¿†ã€ç›¸ä¼¼åº¦æ£€ç´¢ï¼‰

4. **å®Œæ•´çš„é£æ§ä½“ç³»**
   - L0-L5åŠ¨æ€æƒé™ç³»ç»Ÿ
   - 8é¡¹ç¡¬çº¦æŸçº¢çº¿
   - è½¯çº¦æŸï¼ˆç½®ä¿¡åº¦ã€é¢‘ç‡ã€ä»“ä½ï¼‰
   - å®æ—¶ç›‘æ§å’Œå‘Šè­¦

#### ğŸ”„ å¯ä¼˜åŒ–ç‚¹

1. **æœåŠ¡æ‹†åˆ†**
   - å½“å‰å•ä½“åº”ç”¨ï¼Œæœªæ¥å¯è€ƒè™‘å¾®æœåŠ¡åŒ–
   - å»ºè®®Phase 3æ—¶å†è€ƒè™‘ï¼Œå½“å‰æ¶æ„å·²è¶³å¤Ÿ

2. **ç¼“å­˜ç­–ç•¥**
   - Redisç¼“å­˜å¯ä»¥æ›´ç²¾ç»†åŒ–
   - å»ºè®®å¢åŠ ç¼“å­˜é¢„çƒ­å’Œå¤±æ•ˆç­–ç•¥

---

## ğŸš€ äºŒã€å¯åŠ¨æµç¨‹åˆ†æ

### 2.1 Docker Composeå¯åŠ¨æµç¨‹

```bash
# 1. å¯åŠ¨åŸºç¡€è®¾æ–½å®¹å™¨
docker-compose up -d postgres redis qdrant
   â†“
# 2. ç­‰å¾…å¥åº·æ£€æŸ¥é€šè¿‡
   - postgres: pg_isready
   - redis: redis-cli ping
   - qdrant: æœåŠ¡å¯åŠ¨
   â†“
# 3. å¯åŠ¨åç«¯æœåŠ¡
docker-compose up -d backend
   â†“
   - åˆå§‹åŒ–æ•°æ®åº“è¿æ¥
   - è¿æ¥Redis
   - è¿æ¥Qdrant
   - åˆå§‹åŒ–HyperliquidæœåŠ¡
   - å¯åŠ¨AIç¼–æ’å™¨V2
   - å¯åŠ¨WebSocketç®¡ç†å™¨
   â†“
# 4. å¯åŠ¨å‰ç«¯æœåŠ¡
docker-compose up -d frontend
   â†“
# 5. ç³»ç»Ÿå°±ç»ª
   - å‰ç«¯: http://localhost:3000
   - åç«¯API: http://localhost:8000
   - APIæ–‡æ¡£: http://localhost:8000/docs
```

### 2.2 åç«¯å¯åŠ¨è¯¦ç»†æµç¨‹

**æ–‡ä»¶**: `backend/app/main.py`

```python
@app.on_event("startup")
async def startup_event():
    # 1. æ•°æ®åº“åˆå§‹åŒ–
    await init_db()  # Alembicè¿ç§» + è¡¨åˆ›å»º
    
    # 2. Redisè¿æ¥
    await redis_client.connect()
    
    # 3. å¸‚åœºæ•°æ®æœåŠ¡
    market_data_service = HyperliquidMarketData(redis_client, testnet=True)
    await market_data_service.start()
    
    # 4. äº¤æ˜“æœåŠ¡
    trading_service = HyperliquidTradingService(redis_client, testnet=testnet)
    await trading_service.initialize()
    
    # 5. AIç¼–æ’å™¨V2ï¼ˆæ ¸å¿ƒå¤§è„‘ï¼‰
    ai_orchestrator = AITradingOrchestratorV2(
        redis_client=redis_client,
        trading_service=trading_service,
        market_data_service=market_data_service,
        db_session=db_session,
        decision_interval=settings.DECISION_INTERVAL  # é»˜è®¤600ç§’
    )
    
    # 6. å¯åŠ¨ä¸‰å¤§å¾ªç¯
    asyncio.create_task(ai_orchestrator.start())
    #   - å†³ç­–å¾ªç¯ï¼ˆ10åˆ†é’Ÿï¼‰
    #   - ç›‘æ§å¾ªç¯ï¼ˆå®æ—¶ï¼‰
    #   - æƒ…æŠ¥å¾ªç¯ï¼ˆ30åˆ†é’Ÿï¼‰
    
    # 7. WebSocketç®¡ç†å™¨
    await websocket_manager.start_broadcast_service()
```

### 2.3 æ ¸å¿ƒå¾ªç¯æœºåˆ¶

#### å†³ç­–å¾ªç¯ï¼ˆ10åˆ†é’Ÿ/æ¬¡ï¼‰

```python
# æ–‡ä»¶: backend/app/services/orchestrator_v2.py

async def _decision_loop(self):
    while self.is_running:
        # 1. è·å–å¸‚åœºæ•°æ®
        market_data = await self._get_market_data()
        
        # 2. è·å–è´¦æˆ·çŠ¶æ€
        account_state = await self._get_account_state()
        
        # 3. AIå†³ç­–ï¼ˆDecisionEngineV2ï¼‰
        decision = await self.decision_engine.make_decision(
            market_data=market_data,
            account_state=account_state
        )
        
        # 4. æ‰§è¡Œå†³ç­–
        if decision.approved:
            await self._execute_decision(decision)
        
        # 5. è®°å½•å’Œè¯„ä¼°
        await self._record_decision(decision)
        await self._evaluate_performance()
        
        # 6. ç­‰å¾…ä¸‹æ¬¡å¾ªç¯
        await asyncio.sleep(self.decision_interval)  # 600ç§’
```

#### ç›‘æ§å¾ªç¯ï¼ˆå®æ—¶ï¼‰

```python
async def _monitoring_loop(self):
    while self.is_running:
        # 1. æ£€æŸ¥è´¦æˆ·çŠ¶æ€
        account_state = await self._get_account_state()
        
        # 2. é£æ§æ£€æŸ¥
        if self._check_forced_liquidation(account_state):
            await self._force_close_all_positions()
        
        # 3. æƒé™è¯„ä¼°
        await self._evaluate_permission_level()
        
        # 4. å‘é€å‘Šè­¦
        await self._check_alerts(account_state)
        
        await asyncio.sleep(10)  # 10ç§’æ£€æŸ¥ä¸€æ¬¡
```

#### æƒ…æŠ¥å¾ªç¯ï¼ˆ30åˆ†é’Ÿ/æ¬¡ï¼‰

```python
async def _intelligence_loop(self):
    while self.is_running:
        # 1. Qwenæ”¶é›†æƒ…æŠ¥
        report = await self.intelligence_engine.collect_intelligence()
        
        # 2. å­˜å‚¨åˆ°Redis
        await self.intelligence_storage.save_report(report)
        
        # 3. ç­‰å¾…ä¸‹æ¬¡æ›´æ–°
        await asyncio.sleep(self.intelligence_interval)  # 1800ç§’
```

---

## ğŸ’¡ ä¸‰ã€æ ¸å¿ƒåŠŸèƒ½æ¨¡å—åˆ†æ

### 3.1 AIå†³ç­–å¼•æ“ï¼ˆDecisionEngineV2ï¼‰

**æ–‡ä»¶**: `backend/app/services/decision/decision_engine_v2.py`

#### å†³ç­–æµç¨‹

```
1. æƒé™æ£€æŸ¥ â†’ è·å–å½“å‰L0-L5ç­‰çº§
   â†“
2. è®°å¿†æ£€ç´¢ â†’ ä»Qdrantè·å–ç›¸ä¼¼å†å²å†³ç­–
   â†“
3. æƒ…æŠ¥è·å– â†’ ä»Redisè¯»å–Qwenæœ€æ–°æƒ…æŠ¥ï¼ˆå¯é€‰ï¼‰
   â†“
4. Promptæ„å»º â†’ æ•´åˆå¸‚åœºæ•°æ®+è´¦æˆ·çŠ¶æ€+è®°å¿†+æƒ…æŠ¥
   â†“
5. AIè°ƒç”¨ â†’ DeepSeek APIï¼ˆdeepseek-chat-v3.1ï¼‰
   â†“
6. å“åº”è§£æ â†’ JSONæ ¼å¼å†³ç­–
   â†“
7. è½¯çº¦æŸéªŒè¯ â†’ ç½®ä¿¡åº¦ã€é¢‘ç‡ã€ä»“ä½
   â†“
8. ç¡¬çº¦æŸéªŒè¯ â†’ 8é¡¹çº¢çº¿æ£€æŸ¥
   â†“
9. æƒé™éªŒè¯ â†’ æ˜¯å¦ç¬¦åˆå½“å‰æƒé™ç­‰çº§
   â†“
10. å†³ç­–ç»“æœ â†’ APPROVED / REJECTED
```

#### å…³é”®ç‰¹æ€§

1. **å¤šå±‚éªŒè¯æœºåˆ¶**
   - è½¯çº¦æŸï¼šå¯é…ç½®çš„çµæ´»é™åˆ¶
   - ç¡¬çº¦æŸï¼šä¸å¯è¿åçš„çº¢çº¿
   - æƒé™çº¦æŸï¼šåŸºäºå†å²è¡¨ç°çš„åŠ¨æ€é™åˆ¶

2. **è®°å¿†å¢å¼º**
   - çŸ­æœŸè®°å¿†ï¼ˆRedisï¼‰ï¼šæœ€è¿‘10ç¬”å†³ç­–
   - é•¿æœŸè®°å¿†ï¼ˆQdrantï¼‰ï¼šå‘é‡ç›¸ä¼¼åº¦æ£€ç´¢
   - çŸ¥è¯†åº“ï¼ˆPostgreSQLï¼‰ï¼šç»éªŒæ•™è®­

3. **æƒ…æŠ¥èåˆ**
   - Qwenæƒ…æŠ¥ä½œä¸ºå¢å¼ºä¿¡æ¯
   - ä¸ä¾èµ–æƒ…æŠ¥ä¹Ÿèƒ½ç‹¬ç«‹å†³ç­–
   - æƒ…æŠ¥å¤±æ•ˆæ—¶è‡ªåŠ¨é™çº§ä¸ºçº¯æŠ€æœ¯åˆ†æ

### 3.2 æƒé™ç®¡ç†ç³»ç»Ÿï¼ˆL0-L5ï¼‰

**æ–‡ä»¶**: `backend/app/services/constraints/permission_manager.py`

#### æƒé™ç­‰çº§é…ç½®

| ç­‰çº§ | åç§° | å•ä»“ä½ | æ æ† | ç½®ä¿¡åº¦ | æ—¥é¢‘ç‡ | å‡çº§æ¡ä»¶ |
|------|------|--------|------|--------|--------|---------|
| L0 | ä¿æŠ¤æ¨¡å¼ | 0% | 1x | 100% | 0 | äººå·¥å®¡æ ¸ |
| L1 | æ–°æ‰‹çº§ | 10% | 2x | 80% | 1æ¬¡ | 7å¤©+50%èƒœç‡ |
| L2 | æˆé•¿çº§ | 12% | 2x | 75% | 2æ¬¡ | 30å¤©+å¤æ™®1.0 |
| L3 | ç¨³å®šçº§ | 15% | 3x | 70% | 4æ¬¡ | 60%èƒœç‡+å¤æ™®1.5 |
| L4 | ç†Ÿç»ƒçº§ | 20% | 4x | 65% | 6æ¬¡ | 70%èƒœç‡+20å¤©è¿ç›ˆ |
| L5 | ä¸“å®¶çº§ | 25% | 5x | 60% | æ— é™ | - |

#### è‡ªåŠ¨å‡é™çº§æœºåˆ¶

```python
# å‡çº§æ¡ä»¶æ£€æŸ¥
if current_level == "L1":
    if days_running >= 7 and win_rate >= 0.50:
        upgrade_to("L2")

# é™çº§æ¡ä»¶æ£€æŸ¥
if current_level == "L5":
    if win_rate < 0.65:
        downgrade_to("L4")

# é£æ§è§¦å‘å¼ºåˆ¶é™çº§
if max_drawdown >= 0.10 or daily_loss >= 0.05:
    force_downgrade_to("L0")
```

### 3.3 æƒ…æŠ¥ç³»ç»Ÿï¼ˆQwen Intelligenceï¼‰

**æ–‡ä»¶**: `backend/app/services/intelligence/qwen_engine.py`

#### åŒAIå¼•æ“æ¶æ„

```
ğŸ•µï¸ Qwenæƒ…æŠ¥å®˜ï¼ˆå¯é€‰å¢å¼ºï¼‰
â”œâ”€ æ–°é—»åˆ†æ: RSSè®¢é˜… + NLP
â”œâ”€ å·¨é²¸ç›‘æ§: Whale Alert API
â”œâ”€ é“¾ä¸Šæ•°æ®: Etherscan + Glassnode
â”œâ”€ å¸‚åœºæƒ…ç»ª: ç¤¾äº¤åª’ä½“åˆ†æ
â””â”€ ç»¼åˆæŠ¥å‘Š: 30åˆ†é’Ÿæ›´æ–°

         â†“ (å¯é€‰è¾“å…¥)

ğŸ¤– DeepSeekäº¤æ˜“å®˜ï¼ˆæ ¸å¿ƒå¿…éœ€ï¼‰
â”œâ”€ æŠ€æœ¯åˆ†æ: Kçº¿ã€æŒ‡æ ‡ã€è¶‹åŠ¿
â”œâ”€ æƒ…æŠ¥èåˆ: QwenæŠ¥å‘Šï¼ˆå¦‚æœ‰ï¼‰
â”œâ”€ é£é™©è¯„ä¼°: ä»“ä½ã€æ æ†ã€å›æ’¤
â””â”€ äº¤æ˜“å†³ç­–: ä¹°/å–/è§‚æœ›
```

#### ç‹¬ç«‹æ€§ä¿è¯

```python
# DeepSeekå†³ç­–æ—¶çš„æƒ…æŠ¥å¤„ç†
intelligence_report = await self._get_latest_intelligence()

if intelligence_report:
    # æœ‰æƒ…æŠ¥ï¼šæŠ€æœ¯åˆ†æ + æƒ…æŠ¥åˆ†æ
    prompt = self._build_prompt_with_intelligence(
        market_data, account_state, intelligence_report
    )
else:
    # æ— æƒ…æŠ¥ï¼šçº¯æŠ€æœ¯åˆ†æ
    prompt = self._build_prompt_technical_only(
        market_data, account_state
    )

# æ— è®ºå“ªç§æƒ…å†µï¼ŒDeepSeekéƒ½èƒ½å®Œæˆå†³ç­–
decision = await self._call_deepseek(prompt)
```

### 3.4 é£æ§ç³»ç»Ÿï¼ˆ8é¡¹ç¡¬çº¦æŸï¼‰

**æ–‡ä»¶**: `backend/app/services/constraints/constraint_validator.py`

#### ç¡¬çº¦æŸçº¢çº¿

```python
HARD_CONSTRAINTS = {
    "ä¿è¯é‡‘ç‡": {
        "min_margin_ratio": 0.20,  # æœ€ä½20%
        "forced_liquidation": 0.15  # 15%å¼ºåˆ¶å¹³ä»“
    },
    "å›æ’¤æ§åˆ¶": {
        "max_total_drawdown": 0.15,  # æ€»å›æ’¤<15%
        "max_daily_loss": 0.05       # å•æ—¥äºæŸ<5%
    },
    "æ æ†é™åˆ¶": {
        "absolute_max_leverage": 2   # ç»å¯¹æœ€å¤§2x
    },
    "æµåŠ¨æ€§": {
        "min_cash_reserve": 0.10     # è‡³å°‘10%ç°é‡‘
    },
    "é›†ä¸­åº¦": {
        "max_single_asset": 0.10     # å•èµ„äº§<10%
    },
    "å•ç¬”äºæŸ": {
        "max_single_trade_loss": 0.05  # å•ç¬”<5%
    }
}
```

#### éªŒè¯æµç¨‹

```python
async def validate_decision(self, decision: Decision) -> ValidationResult:
    # 1. ä¿è¯é‡‘ç‡æ£€æŸ¥
    if margin_ratio < MIN_MARGIN_RATIO:
        return REJECTED("ä¿è¯é‡‘ä¸è¶³")
    
    # 2. å›æ’¤æ£€æŸ¥
    if total_drawdown >= MAX_TOTAL_DRAWDOWN:
        return REJECTED("å›æ’¤è¶…é™")
    
    # 3. å•æ—¥äºæŸæ£€æŸ¥
    if daily_loss >= MAX_DAILY_LOSS:
        return REJECTED("å•æ—¥äºæŸè¶…é™")
    
    # 4. æ æ†æ£€æŸ¥
    if leverage > ABSOLUTE_MAX_LEVERAGE:
        return REJECTED("æ æ†è¶…é™")
    
    # 5. æµåŠ¨æ€§æ£€æŸ¥
    if cash_reserve < MIN_CASH_RESERVE:
        return REJECTED("æµåŠ¨æ€§ä¸è¶³")
    
    # 6. é›†ä¸­åº¦æ£€æŸ¥
    if single_asset_exposure > MAX_SINGLE_ASSET:
        return REJECTED("é›†ä¸­åº¦è¿‡é«˜")
    
    # æ‰€æœ‰æ£€æŸ¥é€šè¿‡
    return APPROVED
```

### 3.5 RBACæƒé™ç³»ç»Ÿï¼ˆv3.3.0æ–°å¢ï¼‰

**æ–‡ä»¶**: `backend/app/api/v1/admin_rbac.py`

#### ä¸‰çº§æƒé™æ§åˆ¶

```
1. é¡µé¢çº§æƒé™
   - view_admin_dashboard
   - view_trading_panel
   - view_intelligence_reports

2. APIçº§æƒé™
   - api_read_trades
   - api_write_trades
   - api_manage_users

3. æŒ‰é’®çº§æƒé™
   - button_execute_trade
   - button_force_close
   - button_modify_config
```

#### 6ä¸ªç³»ç»Ÿè§’è‰²

```python
SYSTEM_ROLES = {
    "super_admin": {
        "name": "è¶…çº§ç®¡ç†å‘˜",
        "permissions": ["*"]  # æ‰€æœ‰æƒé™
    },
    "admin": {
        "name": "ç®¡ç†å‘˜",
        "permissions": [
            "view_admin_dashboard",
            "api_read_*",
            "api_write_config"
        ]
    },
    "risk_manager": {
        "name": "é£æ§ç»ç†",
        "permissions": [
            "view_risk_panel",
            "button_force_close",
            "api_read_risk_events"
        ]
    },
    "trader": {
        "name": "äº¤æ˜“å‘˜",
        "permissions": [
            "view_trading_panel",
            "button_execute_trade",
            "api_read_trades"
        ]
    },
    "analyst": {
        "name": "åˆ†æå¸ˆ",
        "permissions": [
            "view_intelligence_reports",
            "api_read_market_data"
        ]
    },
    "viewer": {
        "name": "è§‚å¯Ÿè€…",
        "permissions": [
            "view_dashboard",
            "api_read_public"
        ]
    }
}
```

### 3.6 æˆæœ¬ç®¡ç†ç³»ç»Ÿ

**æ–‡ä»¶**: `backend/app/services/ai_cost_manager.py`

#### æˆæœ¬è¿½è¸ª

```python
# æ¯æ¬¡AIè°ƒç”¨è®°å½•
await ai_cost_manager.log_usage(
    platform="deepseek",
    model="deepseek-chat-v3.1",
    input_tokens=1500,
    output_tokens=300,
    cost=0.0018,  # $0.0018
    purpose="trading_decision"
)

# å®æ—¶æˆæœ¬ç»Ÿè®¡
cost_stats = await ai_cost_manager.get_cost_stats(
    start_date="2025-11-01",
    end_date="2025-11-14"
)
# è¿”å›: {
#   "total_cost": 12.50,
#   "deepseek_cost": 8.30,
#   "qwen_cost": 4.20,
#   "total_calls": 1500
# }
```

#### é¢„ç®—æ§åˆ¶

```python
# è®¾ç½®é¢„ç®—
await ai_cost_manager.set_budget(
    platform="deepseek",
    daily_budget=5.0,    # æ¯æ—¥$5
    monthly_budget=150.0  # æ¯æœˆ$150
)

# é¢„ç®—æ£€æŸ¥
if await ai_cost_manager.check_budget_exceeded("deepseek"):
    # è§¦å‘å‘Šè­¦
    await alert_manager.send_alert(
        AlertLevel.WARNING,
        "AIæˆæœ¬è¶…é¢„ç®—",
        "DeepSeekä»Šæ—¥æˆæœ¬å·²è¶…$5"
    )
```

---

## ğŸ“Š å››ã€æ•°æ®åº“è®¾è®¡åˆ†æ

### 4.1 æ ¸å¿ƒè¡¨ç»“æ„

#### äº¤æ˜“ç›¸å…³è¡¨

```sql
-- äº¤æ˜“è®°å½•è¡¨
CREATE TABLE trades (
    id SERIAL PRIMARY KEY,
    symbol VARCHAR(20) NOT NULL,
    side VARCHAR(10) NOT NULL,  -- BUY/SELL
    price DECIMAL(20, 8) NOT NULL,
    quantity DECIMAL(20, 8) NOT NULL,
    total_value DECIMAL(20, 8),
    fee DECIMAL(20, 8),
    realized_pnl DECIMAL(20, 8),
    created_at TIMESTAMP DEFAULT NOW(),
    INDEX idx_symbol_created (symbol, created_at)
);

-- è®¢å•è¡¨
CREATE TABLE orders (
    id SERIAL PRIMARY KEY,
    symbol VARCHAR(20) NOT NULL,
    order_type VARCHAR(20) NOT NULL,  -- MARKET/LIMIT
    side VARCHAR(10) NOT NULL,
    price DECIMAL(20, 8),
    quantity DECIMAL(20, 8) NOT NULL,
    status VARCHAR(20) NOT NULL,  -- PENDING/FILLED/CANCELLED
    created_at TIMESTAMP DEFAULT NOW(),
    INDEX idx_status_created (status, created_at)
);

-- è´¦æˆ·å¿«ç…§è¡¨
CREATE TABLE account_snapshots (
    id SERIAL PRIMARY KEY,
    total_value DECIMAL(20, 8) NOT NULL,
    available_balance DECIMAL(20, 8) NOT NULL,
    total_position_value DECIMAL(20, 8),
    unrealized_pnl DECIMAL(20, 8),
    margin_ratio DECIMAL(10, 4),
    created_at TIMESTAMP DEFAULT NOW(),
    INDEX idx_created (created_at)
);
```

#### AIå†³ç­–è¡¨

```sql
-- AIå†³ç­–æ—¥å¿—è¡¨
CREATE TABLE ai_decisions (
    id SERIAL PRIMARY KEY,
    decision_id VARCHAR(50) UNIQUE NOT NULL,
    symbol VARCHAR(20) NOT NULL,
    action VARCHAR(20) NOT NULL,  -- BUY/SELL/HOLD
    confidence DECIMAL(5, 4) NOT NULL,
    reasoning TEXT,
    market_data JSONB,
    account_state JSONB,
    intelligence_report JSONB,
    status VARCHAR(20) NOT NULL,  -- APPROVED/REJECTED
    rejection_reason TEXT,
    created_at TIMESTAMP DEFAULT NOW(),
    INDEX idx_status_created (status, created_at),
    INDEX idx_symbol_created (symbol, created_at)
);

-- AIä½¿ç”¨æ—¥å¿—è¡¨
CREATE TABLE ai_model_usage_log (
    id SERIAL PRIMARY KEY,
    platform VARCHAR(50) NOT NULL,  -- deepseek/qwen/doubao
    model VARCHAR(100) NOT NULL,
    input_tokens INTEGER NOT NULL,
    output_tokens INTEGER NOT NULL,
    total_tokens INTEGER NOT NULL,
    cost DECIMAL(10, 6) NOT NULL,
    latency_ms INTEGER,
    purpose VARCHAR(100),
    created_at TIMESTAMP DEFAULT NOW(),
    INDEX idx_platform_created (platform, created_at)
);
```

#### æƒé™ç®¡ç†è¡¨

```sql
-- æƒé™è¡¨
CREATE TABLE permissions (
    id SERIAL PRIMARY KEY,
    code VARCHAR(100) UNIQUE NOT NULL,
    name VARCHAR(200) NOT NULL,
    description TEXT,
    category VARCHAR(50) NOT NULL,  -- page/api/button
    created_at TIMESTAMP DEFAULT NOW()
);

-- è§’è‰²è¡¨
CREATE TABLE roles (
    id SERIAL PRIMARY KEY,
    code VARCHAR(50) UNIQUE NOT NULL,
    name VARCHAR(100) NOT NULL,
    description TEXT,
    is_system BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMP DEFAULT NOW()
);

-- è§’è‰²æƒé™å…³è”è¡¨
CREATE TABLE role_permissions (
    id SERIAL PRIMARY KEY,
    role_id INTEGER REFERENCES roles(id),
    permission_id INTEGER REFERENCES permissions(id),
    created_at TIMESTAMP DEFAULT NOW(),
    UNIQUE(role_id, permission_id)
);

-- ç”¨æˆ·è¡¨
CREATE TABLE admin_users (
    id SERIAL PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    hashed_password VARCHAR(255) NOT NULL,
    role_id INTEGER REFERENCES roles(id),
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT NOW()
);
```

#### æƒ…æŠ¥ç³»ç»Ÿè¡¨

```sql
-- æƒ…æŠ¥æŠ¥å‘Šè¡¨
CREATE TABLE intelligence_reports (
    id SERIAL PRIMARY KEY,
    report_id VARCHAR(50) UNIQUE NOT NULL,
    platform VARCHAR(50) NOT NULL,  -- qwen/doubao
    report_type VARCHAR(50) NOT NULL,  -- market_analysis/whale_alert
    content JSONB NOT NULL,
    summary TEXT,
    sentiment VARCHAR(20),  -- bullish/bearish/neutral
    risk_level VARCHAR(20),  -- low/medium/high
    created_at TIMESTAMP DEFAULT NOW(),
    INDEX idx_platform_created (platform, created_at),
    INDEX idx_type_created (report_type, created_at)
);
```

### 4.2 ç´¢å¼•ä¼˜åŒ–

```sql
-- é«˜é¢‘æŸ¥è¯¢ç´¢å¼•
CREATE INDEX idx_trades_symbol_created ON trades(symbol, created_at DESC);
CREATE INDEX idx_decisions_status_created ON ai_decisions(status, created_at DESC);
CREATE INDEX idx_usage_platform_created ON ai_model_usage_log(platform, created_at DESC);

-- å¤åˆç´¢å¼•
CREATE INDEX idx_orders_status_symbol ON orders(status, symbol);
CREATE INDEX idx_snapshots_created ON account_snapshots(created_at DESC);

-- éƒ¨åˆ†ç´¢å¼•ï¼ˆæå‡æ€§èƒ½ï¼‰
CREATE INDEX idx_active_orders ON orders(status, created_at) 
WHERE status IN ('PENDING', 'PARTIALLY_FILLED');
```

### 4.3 æ•°æ®åº“è¿ç§»ï¼ˆAlembicï¼‰

**æ–‡ä»¶**: `backend/alembic/versions/`

```
001_initial_schema.py          # åˆå§‹è¡¨ç»“æ„
002_add_ai_decision_tables.py  # AIå†³ç­–è¡¨
003_add_permission_configs.py  # æƒé™é…ç½®è¡¨
004_add_intelligence_reports.py # æƒ…æŠ¥æŠ¥å‘Šè¡¨
005_add_rbac_tables.py         # RBACæƒé™è¡¨
006_add_debate_system.py       # è¾©è®ºç³»ç»Ÿè¡¨ï¼ˆv3.4ï¼‰
...
```

**è¿ç§»å‘½ä»¤**:
```bash
# å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬
alembic upgrade head

# å›æ»šä¸€ä¸ªç‰ˆæœ¬
alembic downgrade -1

# æŸ¥çœ‹å½“å‰ç‰ˆæœ¬
alembic current

# æŸ¥çœ‹è¿ç§»å†å²
alembic history
```

---

## ğŸ¨ äº”ã€å‰ç«¯ç³»ç»Ÿåˆ†æ

### 5.1 æŠ€æœ¯æ ˆ

```json
{
  "framework": "Next.js 14",
  "ui_library": "React 18",
  "language": "TypeScript",
  "styling": "TailwindCSS 3 + Ant Design 5",
  "charts": "Recharts + Lightweight Charts",
  "state": "React Query (TanStack Query)",
  "http": "Axios",
  "websocket": "Socket.IO Client"
}
```

### 5.2 é¡µé¢ç»“æ„

```
frontend/app/
â”œâ”€â”€ page.tsx                    # é¦–é¡µï¼ˆäº¤æ˜“ç›‘æ§ï¼‰
â”œâ”€â”€ layout.tsx                  # æ ¹å¸ƒå±€
â”œâ”€â”€ globals.css                 # å…¨å±€æ ·å¼
â”‚
â”œâ”€â”€ admin/                      # ç®¡ç†åå°
â”‚   â”œâ”€â”€ layout.tsx              # ç®¡ç†åå°å¸ƒå±€
â”‚   â”œâ”€â”€ page.tsx                # ç®¡ç†åå°é¦–é¡µ
â”‚   â”‚
â”‚   â”œâ”€â”€ ai-platforms/           # AIå¹³å°ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ stats/              # å¹³å°ç»Ÿè®¡
â”‚   â”‚   â”œâ”€â”€ success-rate/       # æˆåŠŸç‡åˆ†æ
â”‚   â”‚   â””â”€â”€ response-time/      # å“åº”æ—¶é—´åˆ†æ
â”‚   â”‚
â”‚   â”œâ”€â”€ ai-cost/                # AIæˆæœ¬ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ budget/             # é¢„ç®—è®¾ç½®
â”‚   â”‚   â””â”€â”€ optimization/       # æˆæœ¬ä¼˜åŒ–
â”‚   â”‚
â”‚   â”œâ”€â”€ intelligence/           # æƒ…æŠ¥ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ realtime/           # å®æ—¶æƒ…æŠ¥
â”‚   â”‚   â”œâ”€â”€ reports/            # å†å²æŠ¥å‘Š
â”‚   â”‚   â”œâ”€â”€ kol/                # KOLè¿½è¸ª
â”‚   â”‚   â””â”€â”€ smart-money/        # èªæ˜é’±è·Ÿå•
â”‚   â”‚
â”‚   â”œâ”€â”€ debate/                 # è¾©è®ºç³»ç»Ÿï¼ˆv3.4ï¼‰
â”‚   â”‚   â”œâ”€â”€ config/             # é…ç½®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ memory/             # è®°å¿†ç®¡ç†
â”‚   â”‚   â””â”€â”€ statistics/         # ç»Ÿè®¡åˆ†æ
â”‚   â”‚
â”‚   â”œâ”€â”€ rbac/                   # RBACæƒé™ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ roles/              # è§’è‰²ç®¡ç†
â”‚   â”‚   â””â”€â”€ permissions/        # æƒé™ç®¡ç†
â”‚   â”‚
â”‚   â”œâ”€â”€ database/               # æ•°æ®åº“ç®¡ç†
â”‚   â”œâ”€â”€ backup/                 # æ•°æ®å¤‡ä»½
â”‚   â”œâ”€â”€ logs/                   # æ—¥å¿—ç®¡ç†
â”‚   â””â”€â”€ users/                  # ç”¨æˆ·ç®¡ç†
â”‚
â””â”€â”€ components/                 # å…¬å…±ç»„ä»¶
    â”œâ”€â”€ admin/                  # ç®¡ç†ç»„ä»¶
    â”œâ”€â”€ ai/                     # AIç›¸å…³ç»„ä»¶
    â”œâ”€â”€ charts/                 # å›¾è¡¨ç»„ä»¶
    â”œâ”€â”€ common/                 # é€šç”¨ç»„ä»¶
    â””â”€â”€ trading/                # äº¤æ˜“ç»„ä»¶
```

### 5.3 æ ¸å¿ƒç»„ä»¶åˆ†æ

#### äº¤æ˜“ç›‘æ§é¢æ¿

**æ–‡ä»¶**: `frontend/app/components/trading/TradingMonitorPanel.tsx`

```typescript
export default function TradingMonitorPanel() {
  // 1. å®æ—¶ä»·æ ¼è·‘é©¬ç¯
  const { data: prices } = useQuery({
    queryKey: ['prices'],
    queryFn: fetchPrices,
    refetchInterval: 5000  // 5ç§’åˆ·æ–°
  });

  // 2. è´¦æˆ·ä¿¡æ¯
  const { data: account } = useQuery({
    queryKey: ['account'],
    queryFn: fetchAccount,
    refetchInterval: 10000  // 10ç§’åˆ·æ–°
  });

  // 3. æŒä»“åˆ—è¡¨
  const { data: positions } = useQuery({
    queryKey: ['positions'],
    queryFn: fetchPositions,
    refetchInterval: 10000
  });

  // 4. WebSocketå®æ—¶æ›´æ–°
  useEffect(() => {
    const socket = io('http://localhost:8000');
    socket.on('price_update', handlePriceUpdate);
    socket.on('position_update', handlePositionUpdate);
    return () => socket.disconnect();
  }, []);

  return (
    <div className="space-y-6">
      <PriceTicker prices={prices} />
      <AccountInfo account={account} />
      <PositionsList positions={positions} />
      <TradeHistory />
    </div>
  );
}
```

#### AIå†³ç­–å¯è§†åŒ–

**æ–‡ä»¶**: `frontend/app/components/ai/DecisionTimeline.tsx`

```typescript
export default function DecisionTimeline() {
  const { data: decisions } = useQuery({
    queryKey: ['decisions'],
    queryFn: fetchDecisions,
    refetchInterval: 60000  // 1åˆ†é’Ÿåˆ·æ–°
  });

  return (
    <Timeline>
      {decisions?.map(decision => (
        <Timeline.Item
          key={decision.id}
          color={decision.status === 'APPROVED' ? 'green' : 'red'}
        >
          <div className="decision-card">
            <h4>{decision.symbol} - {decision.action}</h4>
            <p>ç½®ä¿¡åº¦: {decision.confidence}%</p>
            <p>ç†ç”±: {decision.reasoning}</p>
            <Tag color={decision.status === 'APPROVED' ? 'success' : 'error'}>
              {decision.status}
            </Tag>
          </div>
        </Timeline.Item>
      ))}
    </Timeline>
  );
}
```

#### æƒé™å®ˆå«ç»„ä»¶

**æ–‡ä»¶**: `frontend/app/components/auth/PermissionGuard.tsx`

```typescript
export function PermissionGuard({ 
  permission, 
  children 
}: PermissionGuardProps) {
  const { hasPermission } = usePermissions();

  if (!hasPermission(permission)) {
    return <div>æ— æƒé™è®¿é—®</div>;
  }

  return <>{children}</>;
}

// ä½¿ç”¨ç¤ºä¾‹
<PermissionGuard permission="button_execute_trade">
  <Button onClick={executeTrade}>æ‰§è¡Œäº¤æ˜“</Button>
</PermissionGuard>
```

### 5.4 çŠ¶æ€ç®¡ç†

```typescript
// ä½¿ç”¨React Queryè¿›è¡ŒæœåŠ¡ç«¯çŠ¶æ€ç®¡ç†
import { QueryClient, QueryClientProvider } from '@tanstack/react-query';

const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      staleTime: 5000,        // 5ç§’å†…è®¤ä¸ºæ•°æ®æ–°é²œ
      cacheTime: 10 * 60 * 1000,  // ç¼“å­˜10åˆ†é’Ÿ
      refetchOnWindowFocus: true,
      retry: 3
    }
  }
});

// æƒé™çŠ¶æ€ä½¿ç”¨Context
const PermissionsContext = createContext<PermissionsContextType>(null);

export function PermissionsProvider({ children }) {
  const [permissions, setPermissions] = useState<string[]>([]);
  
  useEffect(() => {
    // ä»åç«¯è·å–ç”¨æˆ·æƒé™
    fetchUserPermissions().then(setPermissions);
  }, []);

  const hasPermission = (permission: string) => {
    return permissions.includes(permission) || 
           permissions.includes('*');
  };

  return (
    <PermissionsContext.Provider value={{ permissions, hasPermission }}>
      {children}
    </PermissionsContext.Provider>
  );
}
```

---

## ğŸ”§ å…­ã€éƒ¨ç½²ä¸è¿ç»´åˆ†æ

### 6.1 éƒ¨ç½²æ–¹æ¡ˆ

#### Docker Composeéƒ¨ç½²ï¼ˆæ¨èï¼‰

```yaml
# docker-compose.yml
version: '3.8'

services:
  # æ•°æ®åº“
  postgres:
    image: postgres:15-alpine
    environment:
      POSTGRES_USER: aicoin
      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD}
      POSTGRES_DB: aicoin
    volumes:
      - postgres_data:/var/lib/postgresql/data
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U aicoin"]
      interval: 10s
      timeout: 5s
      retries: 5

  # ç¼“å­˜
  redis:
    image: redis:7-alpine
    volumes:
      - redis_data:/data
    healthcheck:
      test: ["CMD", "redis-cli", "ping"]

  # å‘é‡æ•°æ®åº“
  qdrant:
    image: qdrant/qdrant:latest
    volumes:
      - qdrant_data:/qdrant/storage

  # åç«¯
  backend:
    build: ./backend
    depends_on:
      postgres:
        condition: service_healthy
      redis:
        condition: service_healthy
    environment:
      - DATABASE_URL=postgresql+asyncpg://aicoin:${POSTGRES_PASSWORD}@postgres:5432/aicoin
      - REDIS_URL=redis://redis:6379/0
      - QDRANT_HOST=qdrant
      - DEEPSEEK_API_KEY=${DEEPSEEK_API_KEY}
      - QWEN_API_KEY=${QWEN_API_KEY}
      - HYPERLIQUID_PRIVATE_KEY=${HYPERLIQUID_PRIVATE_KEY}
    volumes:
      - ./backend/logs:/app/logs

  # å‰ç«¯
  frontend:
    build: ./frontend
    depends_on:
      - backend
    environment:
      - NEXT_PUBLIC_API_URL=http://localhost:8000
```

#### å¯åŠ¨å‘½ä»¤

```bash
# 1. å¼€å‘ç¯å¢ƒ
docker-compose up -d

# 2. æµ‹è¯•ç½‘ç¯å¢ƒ
docker-compose -f deploy/docker-compose.testnet.yml --env-file .env.testnet up -d

# 3. ç”Ÿäº§ç¯å¢ƒ
docker-compose -f deploy/docker-compose.prod.yml --env-file .env.prod up -d
```

### 6.2 éƒ¨ç½²è„šæœ¬

#### Gitè‡ªåŠ¨åŒ–éƒ¨ç½²ï¼ˆæ¨èï¼‰

**æ–‡ä»¶**: `scripts/deploy-git.sh`

```bash
#!/bin/bash

# 1. æ£€æŸ¥GitçŠ¶æ€
if [[ -n $(git status -s) ]]; then
    echo "âŒ æœ‰æœªæäº¤çš„æ›´æ”¹ï¼Œè¯·å…ˆæäº¤"
    exit 1
fi

# 2. æ‹‰å–æœ€æ–°ä»£ç 
git pull origin main

# 3. å¤‡ä»½å½“å‰ç‰ˆæœ¬
BACKUP_TAG="backup-$(date +%Y%m%d-%H%M%S)"
git tag $BACKUP_TAG

# 4. æ„å»ºé•œåƒ
docker-compose build --no-cache

# 5. åœæ­¢æ—§æœåŠ¡
docker-compose down

# 6. å¯åŠ¨æ–°æœåŠ¡
docker-compose up -d

# 7. å¥åº·æ£€æŸ¥
sleep 10
curl -f http://localhost:8000/health || {
    echo "âŒ å¥åº·æ£€æŸ¥å¤±è´¥ï¼Œå›æ»š"
    git checkout $BACKUP_TAG
    docker-compose up -d
    exit 1
}

echo "âœ… éƒ¨ç½²æˆåŠŸ"
```

#### å¿«é€Ÿéƒ¨ç½²ï¼ˆå¼€å‘ç¯å¢ƒï¼‰

**æ–‡ä»¶**: `scripts/deploy-rsync.sh`

```bash
#!/bin/bash

# 1. åŒæ­¥ä»£ç åˆ°æœåŠ¡å™¨
rsync -avz --exclude 'node_modules' \
           --exclude '.git' \
           --exclude '__pycache__' \
           ./ user@server:/path/to/aicoin/

# 2. SSHåˆ°æœåŠ¡å™¨é‡å¯
ssh user@server << 'EOF'
cd /path/to/aicoin
docker-compose restart backend frontend
EOF

echo "âœ… å¿«é€Ÿéƒ¨ç½²å®Œæˆ"
```

### 6.3 ç›‘æ§å’Œå‘Šè­¦

#### ç³»ç»Ÿç›‘æ§è„šæœ¬

**æ–‡ä»¶**: `scripts/monitor/monitor_system.sh`

```bash
#!/bin/bash

while true; do
    clear
    echo "========== AIcoin ç³»ç»Ÿç›‘æ§ =========="
    echo ""
    
    # 1. å®¹å™¨çŠ¶æ€
    echo "ğŸ“¦ å®¹å™¨çŠ¶æ€:"
    docker-compose ps
    echo ""
    
    # 2. ç³»ç»Ÿå¥åº·
    echo "ğŸ’š ç³»ç»Ÿå¥åº·:"
    curl -s http://localhost:8000/health | jq .
    echo ""
    
    # 3. è´¦æˆ·çŠ¶æ€
    echo "ğŸ’° è´¦æˆ·çŠ¶æ€:"
    curl -s http://localhost:8000/api/v1/account/info | jq .
    echo ""
    
    # 4. æœ€è¿‘å†³ç­–
    echo "ğŸ¤– æœ€è¿‘å†³ç­–:"
    curl -s http://localhost:8000/api/v1/ai/decisions?limit=5 | jq .
    echo ""
    
    # 5. èµ„æºä½¿ç”¨
    echo "ğŸ“Š èµ„æºä½¿ç”¨:"
    docker stats --no-stream --format "table {{.Name}}\t{{.CPUPerc}}\t{{.MemUsage}}"
    
    sleep 30
done
```

#### å‘Šè­¦é…ç½®

**æ–‡ä»¶**: `scripts/monitor/alert_config.sh`

```bash
#!/bin/bash

# å‘Šè­¦é˜ˆå€¼
MAX_DRAWDOWN=0.10
MAX_DAILY_LOSS=0.05
MIN_ACCOUNT_VALUE=180.0

# æ£€æŸ¥è´¦æˆ·çŠ¶æ€
ACCOUNT=$(curl -s http://localhost:8000/api/v1/account/info)
ACCOUNT_VALUE=$(echo $ACCOUNT | jq -r '.total_value')
DRAWDOWN=$(echo $ACCOUNT | jq -r '.drawdown')
DAILY_LOSS=$(echo $ACCOUNT | jq -r '.daily_loss')

# å‘é€å‘Šè­¦
send_alert() {
    local message=$1
    # é‚®ä»¶å‘Šè­¦
    echo "$message" | mail -s "AIcoinå‘Šè­¦" admin@example.com
    # Telegramå‘Šè­¦
    curl -X POST "https://api.telegram.org/bot${BOT_TOKEN}/sendMessage" \
         -d "chat_id=${CHAT_ID}&text=$message"
}

# æ£€æŸ¥å‘Šè­¦æ¡ä»¶
if (( $(echo "$DRAWDOWN > $MAX_DRAWDOWN" | bc -l) )); then
    send_alert "âš ï¸ å›æ’¤è¶…é™: $DRAWDOWN > $MAX_DRAWDOWN"
fi

if (( $(echo "$DAILY_LOSS > $MAX_DAILY_LOSS" | bc -l) )); then
    send_alert "âš ï¸ å•æ—¥äºæŸè¶…é™: $DAILY_LOSS > $MAX_DAILY_LOSS"
fi

if (( $(echo "$ACCOUNT_VALUE < $MIN_ACCOUNT_VALUE" | bc -l) )); then
    send_alert "âš ï¸ è´¦æˆ·ä»·å€¼è¿‡ä½: $ACCOUNT_VALUE < $MIN_ACCOUNT_VALUE"
fi
```

### 6.4 å¤‡ä»½ç­–ç•¥

#### æ•°æ®åº“å¤‡ä»½

**æ–‡ä»¶**: `scripts/utils/backup_database.sh`

```bash
#!/bin/bash

BACKUP_DIR="/backups/postgres"
DATE=$(date +%Y%m%d_%H%M%S)
BACKUP_FILE="$BACKUP_DIR/aicoin_backup_$DATE.sql"

# 1. åˆ›å»ºå¤‡ä»½
docker-compose exec -T postgres pg_dump -U aicoin aicoin > $BACKUP_FILE

# 2. å‹ç¼©å¤‡ä»½
gzip $BACKUP_FILE

# 3. ä¸Šä¼ åˆ°äº‘å­˜å‚¨ï¼ˆå¯é€‰ï¼‰
# aws s3 cp $BACKUP_FILE.gz s3://my-bucket/backups/

# 4. æ¸…ç†æ—§å¤‡ä»½ï¼ˆä¿ç•™30å¤©ï¼‰
find $BACKUP_DIR -name "*.sql.gz" -mtime +30 -delete

echo "âœ… å¤‡ä»½å®Œæˆ: $BACKUP_FILE.gz"
```

#### è‡ªåŠ¨å¤‡ä»½ï¼ˆCronï¼‰

```bash
# æ¯å¤©å‡Œæ™¨2ç‚¹å¤‡ä»½
0 2 * * * /path/to/scripts/utils/backup_database.sh >> /var/log/aicoin-backup.log 2>&1

# æ¯å‘¨æ—¥å‡Œæ™¨3ç‚¹å®Œæ•´å¤‡ä»½
0 3 * * 0 /path/to/scripts/utils/full_backup.sh >> /var/log/aicoin-full-backup.log 2>&1
```

---

## ğŸ“ˆ ä¸ƒã€æ€§èƒ½åˆ†æ

### 7.1 ç³»ç»Ÿæ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | å½“å‰å€¼ | çŠ¶æ€ |
|------|--------|--------|------|
| APIå“åº”æ—¶é—´ï¼ˆP95ï¼‰ | <500ms | ~300ms | âœ… ä¼˜ç§€ |
| æ•°æ®åº“æŸ¥è¯¢ï¼ˆP95ï¼‰ | <50ms | ~30ms | âœ… ä¼˜ç§€ |
| RedisæŸ¥è¯¢ï¼ˆP99ï¼‰ | <10ms | ~5ms | âœ… ä¼˜ç§€ |
| AIå†³ç­–å»¶è¿Ÿ | <5s | ~3s | âœ… ä¼˜ç§€ |
| å‰ç«¯é¦–å±åŠ è½½ | <2s | ~1.2s | âœ… ä¼˜ç§€ |
| WebSocketå»¶è¿Ÿ | <100ms | ~50ms | âœ… ä¼˜ç§€ |

### 7.2 èµ„æºä½¿ç”¨

```bash
# Dockerå®¹å™¨èµ„æºä½¿ç”¨ï¼ˆå…¸å‹å€¼ï¼‰
NAME                CPU %     MEM USAGE / LIMIT     MEM %
aicoin-backend      15%       512MB / 2GB          25.6%
aicoin-frontend     5%        256MB / 1GB          25.6%
aicoin-postgres     10%       256MB / 1GB          25.6%
aicoin-redis        2%        64MB / 512MB         12.5%
aicoin-qdrant       8%        128MB / 1GB          12.8%
```

### 7.3 æ€§èƒ½ä¼˜åŒ–å»ºè®®

#### å·²å®æ–½çš„ä¼˜åŒ–

1. **æ•°æ®åº“ç´¢å¼•**
   ```sql
   -- é«˜é¢‘æŸ¥è¯¢ç´¢å¼•
   CREATE INDEX idx_trades_symbol_created ON trades(symbol, created_at DESC);
   CREATE INDEX idx_decisions_status_created ON ai_decisions(status, created_at DESC);
   ```

2. **Redisç¼“å­˜**
   ```python
   # å¸‚åœºæ•°æ®ç¼“å­˜ï¼ˆ5ç§’ï¼‰
   @cache(ttl=5)
   async def get_market_data(symbol: str):
       return await fetch_from_exchange(symbol)
   ```

3. **APIå“åº”ä¼˜åŒ–**
   ```python
   # æ‰¹é‡æŸ¥è¯¢æ¥å£
   @router.get("/dashboard/summary")
   async def get_dashboard_summary():
       # ä¸€æ¬¡æ€§è¿”å›å¤šä¸ªæ•°æ®ï¼Œå‡å°‘å‰ç«¯è¯·æ±‚æ¬¡æ•°
       return {
           "account": await get_account_info(),
           "positions": await get_positions(),
           "recent_trades": await get_recent_trades(limit=10),
           "ai_status": await get_ai_status()
       }
   ```

#### å¯è¿›ä¸€æ­¥ä¼˜åŒ–

1. **å‰ç«¯ä¼˜åŒ–**
   - å®æ–½ä»£ç åˆ†å‰²ï¼ˆCode Splittingï¼‰
   - ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨ï¼ˆVirtual Scrollingï¼‰
   - å›¾ç‰‡æ‡’åŠ è½½

2. **åç«¯ä¼˜åŒ–**
   - å®æ–½è¿æ¥æ± ï¼ˆConnection Poolingï¼‰
   - å¢åŠ APIé™æµï¼ˆRate Limitingï¼‰
   - ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆCeleryï¼‰å¤„ç†é•¿ä»»åŠ¡

3. **æ•°æ®åº“ä¼˜åŒ–**
   - åˆ†åŒºè¡¨ï¼ˆPartitioningï¼‰
   - è¯»å†™åˆ†ç¦»ï¼ˆRead Replicasï¼‰
   - å®šæœŸVACUUMå’ŒANALYZE

---

## ğŸ”’ å…«ã€å®‰å…¨æ€§åˆ†æ

### 8.1 å®‰å…¨æªæ–½

#### å·²å®æ–½çš„å®‰å…¨æªæ–½

1. **ç¯å¢ƒå˜é‡ç®¡ç†**
   ```bash
   # .envæ–‡ä»¶ï¼ˆä¸æäº¤åˆ°Gitï¼‰
   SECRET_KEY=your-secret-key
   JWT_SECRET_KEY=your-jwt-secret
   DEEPSEEK_API_KEY=sk-xxx
   HYPERLIQUID_PRIVATE_KEY=0xxxx
   ```

2. **JWTè®¤è¯**
   ```python
   @router.get("/protected")
   async def protected_route(
       current_user: User = Depends(get_current_user)
   ):
       return {"user": current_user}
   ```

3. **RBACæƒé™æ§åˆ¶**
   ```python
   @require_permissions("api_write_trades")
   async def execute_trade(trade: TradeRequest):
       return await trading_service.execute(trade)
   ```

4. **APIé™æµ**
   ```python
   @limiter.limit("100/minute")
   async def api_endpoint():
       return {"message": "success"}
   ```

5. **SQLæ³¨å…¥é˜²æŠ¤**
   ```python
   # ä½¿ç”¨SQLAlchemy ORMï¼Œè‡ªåŠ¨é˜²æŠ¤SQLæ³¨å…¥
   query = select(Trade).where(Trade.symbol == symbol)
   ```

6. **CORSé…ç½®**
   ```python
   app.add_middleware(
       CORSMiddleware,
       allow_origins=["http://localhost:3000"],
       allow_credentials=True,
       allow_methods=["*"],
       allow_headers=["*"]
   )
   ```

#### å®‰å…¨æ”¹è¿›å»ºè®®

1. **åŒå› ç´ è®¤è¯ï¼ˆ2FAï¼‰**
   - é›†æˆTOTPï¼ˆTime-based One-Time Passwordï¼‰
   - ä½¿ç”¨pyotpåº“

2. **APIå¯†é’¥è½®æ¢**
   - å®šæœŸæ›´æ¢APIå¯†é’¥
   - å®æ–½å¯†é’¥ç‰ˆæœ¬ç®¡ç†

3. **å®¡è®¡æ—¥å¿—**
   - è®°å½•æ‰€æœ‰æ•æ„Ÿæ“ä½œ
   - å®šæœŸå®¡æŸ¥æ—¥å¿—

4. **åŠ å¯†å­˜å‚¨**
   - æ•æ„Ÿæ•°æ®åŠ å¯†å­˜å‚¨
   - ä½¿ç”¨cryptographyåº“

### 8.2 é£é™©è¯„ä¼°

| é£é™© | ç­‰çº§ | ç¼“è§£æªæ–½ | çŠ¶æ€ |
|------|------|---------|------|
| APIå¯†é’¥æ³„éœ² | é«˜ | ç¯å¢ƒå˜é‡+.gitignore | âœ… å·²å®æ–½ |
| æœªæˆæƒè®¿é—® | é«˜ | JWTè®¤è¯+RBAC | âœ… å·²å®æ–½ |
| SQLæ³¨å…¥ | ä¸­ | ORM+å‚æ•°åŒ–æŸ¥è¯¢ | âœ… å·²å®æ–½ |
| DDoSæ”»å‡» | ä¸­ | APIé™æµ+Nginx | âš ï¸ éƒ¨åˆ†å®æ–½ |
| æ•°æ®æ³„éœ² | é«˜ | åŠ å¯†+å¤‡ä»½ | âš ï¸ å¾…åŠ å¼º |

---

## ğŸ“ ä¹ã€æ–‡æ¡£è´¨é‡åˆ†æ

### 9.1 æ–‡æ¡£ä½“ç³»

```
docs/
â”œâ”€â”€ 00-å¿«é€Ÿå¼€å§‹/           â­â­â­â­â­ å®Œæ•´
â”‚   â”œâ”€â”€ QUICKSTART.md
â”‚   â””â”€â”€ DOCKER_QUICK_START.md
â”‚
â”œâ”€â”€ 01-æ ¸å¿ƒè§„åˆ™/           â­â­â­â­â­ å®Œæ•´
â”‚   â””â”€â”€ AIäº¤æ˜“è§„åˆ™æ–‡æ¡£.md  (20,000å­—)
â”‚
â”œâ”€â”€ 03-æŠ€æœ¯æ¶æ„/           â­â­â­â­â­ å®Œæ•´
â”‚   â”œâ”€â”€ 00-ç³»ç»Ÿæ¶æ„è®¾è®¡.md
â”‚   â”œâ”€â”€ 06-Qwenæƒ…æŠ¥ç³»ç»Ÿ.md
â”‚   â”œâ”€â”€ 07-AIå¹³å°æ€§èƒ½ç›‘æ§ç³»ç»Ÿ.md
â”‚   â””â”€â”€ 08-RBACæƒé™ç³»ç»Ÿ.md
â”‚
â”œâ”€â”€ 06-å¿«é€Ÿå‚è€ƒ/           â­â­â­â­ è‰¯å¥½
â”‚   â”œâ”€â”€ æ ¸å¿ƒè¦ç‚¹é€ŸæŸ¥å¡.md
â”‚   â””â”€â”€ AIå¤šå¹³å°ä½¿ç”¨æŒ‡å—.md
â”‚
â”œâ”€â”€ 07-éƒ¨ç½²è¿ç»´/           â­â­â­â­â­ å®Œæ•´
â”‚   â”œâ”€â”€ 01-éƒ¨ç½²æŒ‡å—.md
â”‚   â”œâ”€â”€ 10-Gitè‡ªåŠ¨åŒ–éƒ¨ç½²æŒ‡å—.md
â”‚   â””â”€â”€ 08-æ•°æ®å¤‡ä»½ä¸æ¸…ç†æŒ‡å—.md
â”‚
â”œâ”€â”€ 08-å‰ç«¯ç³»ç»Ÿ/           â­â­â­â­ è‰¯å¥½
â”‚   â”œâ”€â”€ 01-åŠŸèƒ½æ¨¡å—è¯´æ˜.md
â”‚   â””â”€â”€ 04-APIé›†æˆ.md
â”‚
â”œâ”€â”€ 09-APIæ¥å£æ–‡æ¡£/        â­â­â­â­â­ å®Œæ•´
â”‚   â””â”€â”€ README.md
â”‚
â””â”€â”€ 10-ç‰ˆæœ¬æ›´æ–°/           â­â­â­â­â­ å®Œæ•´
    â””â”€â”€ CHANGELOG.md
```

### 9.2 æ–‡æ¡£ä¼˜ç‚¹

1. **ç»“æ„æ¸…æ™°**
   - åˆ†ç±»åˆç†ï¼Œæ˜“äºå¯¼èˆª
   - ä»å¿«é€Ÿå¼€å§‹åˆ°æ·±åº¦æŠ€æœ¯æ–‡æ¡£éƒ½æœ‰è¦†ç›–

2. **å†…å®¹å®Œæ•´**
   - æ ¸å¿ƒè§„åˆ™æ–‡æ¡£è¾¾20,000å­—
   - æŠ€æœ¯æ¶æ„æ–‡æ¡£åŒ…å«8ä¸ªMermaidå›¾
   - éƒ¨ç½²æ–‡æ¡£è¯¦ç»†ä¸”å®ç”¨

3. **æ›´æ–°åŠæ—¶**
   - æ¯ä¸ªç‰ˆæœ¬éƒ½æœ‰è¯¦ç»†çš„CHANGELOG
   - æ–‡æ¡£ç‰ˆæœ¬å·ä¸ä»£ç ç‰ˆæœ¬å·åŒæ­¥

4. **å®ç”¨æ€§å¼º**
   - åŒ…å«å¤§é‡ä»£ç ç¤ºä¾‹
   - æä¾›å¿«é€Ÿå‚è€ƒå¡
   - æœ‰æ•…éšœæ’æŸ¥æŒ‡å—

### 9.3 æ–‡æ¡£æ”¹è¿›å»ºè®®

1. **APIæ–‡æ¡£**
   - å»ºè®®å¢åŠ æ›´å¤šAPIä½¿ç”¨ç¤ºä¾‹
   - æ·»åŠ é”™è¯¯ç è¯´æ˜

2. **è¿ç»´æ–‡æ¡£**
   - å¢åŠ æ€§èƒ½è°ƒä¼˜æŒ‡å—
   - æ·»åŠ å¸¸è§é—®é¢˜FAQ

3. **å¼€å‘æ–‡æ¡£**
   - å¢åŠ è´¡çŒ®æŒ‡å—
   - æ·»åŠ ä»£ç è§„èŒƒè¯´æ˜

---

## ğŸ¯ åã€åŠŸèƒ½å®Œæ•´æ€§è¯„ä¼°

### 10.1 æ ¸å¿ƒåŠŸèƒ½æ¸…å•

| åŠŸèƒ½æ¨¡å— | å®Œæˆåº¦ | è¯´æ˜ |
|---------|--------|------|
| **AIå†³ç­–å¼•æ“** | âœ… 100% | DeepSeeké›†æˆå®Œæ•´ |
| **æƒ…æŠ¥ç³»ç»Ÿ** | âœ… 100% | Qwenå¤šå¹³å°ååŒ |
| **æƒé™ç®¡ç†** | âœ… 100% | L0-L5åŠ¨æ€æƒé™ |
| **RBACç³»ç»Ÿ** | âœ… 100% | ä¼ä¸šçº§æƒé™æ§åˆ¶ |
| **é£æ§ç³»ç»Ÿ** | âœ… 100% | 8é¡¹ç¡¬çº¦æŸ+è½¯çº¦æŸ |
| **æˆæœ¬ç®¡ç†** | âœ… 100% | é¢„ç®—æ§åˆ¶+ç»Ÿè®¡ |
| **äº¤æ˜“æ‰§è¡Œ** | âœ… 100% | Hyperliquidé›†æˆ |
| **å¸‚åœºæ•°æ®** | âœ… 100% | å®æ—¶ä»·æ ¼+Kçº¿ |
| **è®°å¿†ç³»ç»Ÿ** | âœ… 100% | ä¸‰å±‚è®°å¿†æ¶æ„ |
| **ç›‘æ§å‘Šè­¦** | âœ… 90% | åŸºç¡€ç›‘æ§å®Œæˆ |
| **æ•°æ®å¤‡ä»½** | âœ… 100% | è‡ªåŠ¨å¤‡ä»½+æ¢å¤ |
| **æ—¥å¿—ç®¡ç†** | âœ… 100% | å¤šçº§æ—¥å¿—+ç®¡ç† |
| **å‰ç«¯ç³»ç»Ÿ** | âœ… 95% | åŠŸèƒ½å®Œæ•´ï¼ŒUIä¼˜ç§€ |
| **APIæ–‡æ¡£** | âœ… 100% | Swaggerè‡ªåŠ¨ç”Ÿæˆ |
| **éƒ¨ç½²å·¥å…·** | âœ… 100% | Docker+è„šæœ¬ |

### 10.2 ç‰ˆæœ¬æ¼”è¿›

```
v1.0 (2025-10-01)
â”œâ”€ åŸºç¡€äº¤æ˜“åŠŸèƒ½
â”œâ”€ ç®€å•AIå†³ç­–
â””â”€ æµ‹è¯•ç½‘ç¯å¢ƒ

v2.0 (2025-11-03)
â”œâ”€ AIç¼–æ’å™¨V2
â”œâ”€ L0-L5æƒé™ç³»ç»Ÿ
â”œâ”€ ä¸‰å±‚è®°å¿†ç³»ç»Ÿ
â””â”€ ä¸»ç½‘éƒ¨ç½²

v3.0 (2025-11-06)
â”œâ”€ Qwenæƒ…æŠ¥ç³»ç»Ÿ
â”œâ”€ AIæ—¥è®°ç³»ç»Ÿ
â””â”€ åŒAIå¼•æ“æ¶æ„

v3.1 (2025-11-08)
â”œâ”€ AIå¤šå¹³å°é›†æˆ
â”œâ”€ æˆæœ¬ç®¡ç†ç³»ç»Ÿ
â”œâ”€ æ€§èƒ½ç›‘æ§ç³»ç»Ÿ
â””â”€ æƒ…æŠ¥åˆ†æç³»ç»Ÿ

v3.2 (2025-11-10)
â”œâ”€ ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿ
â”œâ”€ è®¾è®¡ç³»ç»Ÿç»Ÿä¸€
â””â”€ æ€§èƒ½ä¼˜åŒ–

v3.3 (2025-11-12)
â”œâ”€ ä¼ä¸šçº§RBAC
â”œâ”€ æ•°æ®å¤‡ä»½ç³»ç»Ÿ
â”œâ”€ æ—¥å¿—ç®¡ç†ç³»ç»Ÿ
â””â”€ Bugä¿®å¤

v3.4 (2025-11-14) - å½“å‰ç‰ˆæœ¬
â”œâ”€ è¾©è®ºç³»ç»Ÿ
â”œâ”€ å¤šAgentåä½œ
â””â”€ åŠŸèƒ½å®Œå–„
```

### 10.3 åŠŸèƒ½æˆç†Ÿåº¦è¯„ä¼°

#### âœ… ç”Ÿäº§å°±ç»ªåŠŸèƒ½

1. **AIå†³ç­–å¼•æ“**
   - å®Œæ•´çš„å†³ç­–æµç¨‹
   - å¤šå±‚éªŒè¯æœºåˆ¶
   - è®°å¿†å¢å¼º
   - æƒ…æŠ¥èåˆ

2. **é£æ§ç³»ç»Ÿ**
   - 8é¡¹ç¡¬çº¦æŸ
   - åŠ¨æ€æƒé™ç®¡ç†
   - å®æ—¶ç›‘æ§
   - è‡ªåŠ¨å‘Šè­¦

3. **RBACæƒé™**
   - 6ä¸ªç³»ç»Ÿè§’è‰²
   - 35ä¸ªæƒé™ç‚¹
   - å®¡è®¡æ—¥å¿—
   - åŠ¨æ€é…ç½®

4. **æˆæœ¬ç®¡ç†**
   - å®æ—¶è¿½è¸ª
   - é¢„ç®—æ§åˆ¶
   - æˆæœ¬ä¼˜åŒ–
   - ç»Ÿè®¡åˆ†æ

#### âš ï¸ éœ€è¦å¢å¼ºçš„åŠŸèƒ½

1. **ç›‘æ§å‘Šè­¦**
   - å»ºè®®å¢åŠ æ›´å¤šå‘Šè­¦æ¸ é“ï¼ˆTelegramã€é’‰é’‰ï¼‰
   - å¢åŠ æ›´ç»†ç²’åº¦çš„ç›‘æ§æŒ‡æ ‡

2. **æ€§èƒ½ä¼˜åŒ–**
   - å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢
   - å¢åŠ æ›´å¤šç¼“å­˜ç­–ç•¥

3. **æµ‹è¯•è¦†ç›–**
   - å»ºè®®å¢åŠ å•å…ƒæµ‹è¯•
   - å¢åŠ é›†æˆæµ‹è¯•

---

## ğŸš€ åä¸€ã€å¦‚ä½•å¿«é€Ÿå¯åŠ¨

### 11.1 æœ¬åœ°å¼€å‘ç¯å¢ƒ

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/allenxing4071/aicoin.git
cd aicoin

# 2. é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘.envï¼Œå¡«å…¥å¿…è¦çš„APIå¯†é’¥

# 3. å¯åŠ¨æœåŠ¡
docker-compose up -d

# 4. ç­‰å¾…æœåŠ¡å°±ç»ªï¼ˆçº¦30ç§’ï¼‰
docker-compose logs -f backend

# 5. è®¿é—®ç³»ç»Ÿ
# å‰ç«¯: http://localhost:3000
# åç«¯: http://localhost:8000
# APIæ–‡æ¡£: http://localhost:8000/docs
```

### 11.2 æµ‹è¯•ç½‘éƒ¨ç½²

```bash
# 1. é…ç½®æµ‹è¯•ç½‘ç¯å¢ƒ
cp .env.testnet.example .env.testnet

# 2. ç¼–è¾‘é…ç½®
nano .env.testnet
# å¡«å…¥:
#   - DEEPSEEK_API_KEY
#   - QWEN_API_KEY
#   - HYPERLIQUID_PRIVATE_KEY (æµ‹è¯•ç½‘)
#   - HYPERLIQUID_TESTNET=true

# 3. å¯åŠ¨æµ‹è¯•ç½‘
./scripts/start_testnet.sh

# 4. ç›‘æ§ç³»ç»Ÿ
./scripts/monitor/monitor_system.sh
```

### 11.3 ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

```bash
# 1. é…ç½®ç”Ÿäº§ç¯å¢ƒ
cp .env.prod.example .env.prod

# 2. ç¼–è¾‘é…ç½®ï¼ˆä½¿ç”¨å¼ºå¯†ç ï¼‰
nano .env.prod

# 3. ä½¿ç”¨Gitéƒ¨ç½²ï¼ˆæ¨èï¼‰
./scripts/deploy-git.sh

# 4. éªŒè¯éƒ¨ç½²
curl http://localhost:8000/health

# 5. é…ç½®ç›‘æ§å’Œå‘Šè­¦
./scripts/monitor/alert_config.sh daemon &
```

---

## ğŸ“Š åäºŒã€é¡¹ç›®ç»Ÿè®¡

### 12.1 ä»£ç ç»Ÿè®¡

```
åç«¯ (Python)
â”œâ”€â”€ æ–‡ä»¶æ•°: 148
â”œâ”€â”€ ä»£ç è¡Œæ•°: ~25,000è¡Œ
â”œâ”€â”€ æ ¸å¿ƒæ¨¡å—: 15ä¸ª
â””â”€â”€ APIç«¯ç‚¹: 100+ä¸ª

å‰ç«¯ (TypeScript)
â”œâ”€â”€ æ–‡ä»¶æ•°: 96
â”œâ”€â”€ ä»£ç è¡Œæ•°: ~15,000è¡Œ
â”œâ”€â”€ é¡µé¢æ•°: 40+ä¸ª
â””â”€â”€ ç»„ä»¶æ•°: 50+ä¸ª

æ–‡æ¡£ (Markdown)
â”œâ”€â”€ æ–‡ä»¶æ•°: 80+ä¸ª
â”œâ”€â”€ æ€»å­—æ•°: ~100,000å­—
â””â”€â”€ å›¾è¡¨æ•°: 20+ä¸ª

è„šæœ¬ (Shell/Python)
â”œâ”€â”€ æ–‡ä»¶æ•°: 58
â”œâ”€â”€ éƒ¨ç½²è„šæœ¬: 10+ä¸ª
â””â”€â”€ å·¥å…·è„šæœ¬: 30+ä¸ª
```

### 12.2 æŠ€æœ¯æ ˆç»Ÿè®¡

```
åç«¯æŠ€æœ¯æ ˆ
â”œâ”€â”€ Python 3.11
â”œâ”€â”€ FastAPI 0.104.1
â”œâ”€â”€ SQLAlchemy 2.0.23
â”œâ”€â”€ PostgreSQL 15
â”œâ”€â”€ Redis 7
â”œâ”€â”€ Qdrant 1.7.0
â””â”€â”€ Alembic 1.12.1

å‰ç«¯æŠ€æœ¯æ ˆ
â”œâ”€â”€ Next.js 14.0.4
â”œâ”€â”€ React 18.2.0
â”œâ”€â”€ TypeScript 5.3.3
â”œâ”€â”€ TailwindCSS 3.3.6
â”œâ”€â”€ Ant Design 5.28.0
â””â”€â”€ React Query 5.14.2

AIå¹³å°
â”œâ”€â”€ DeepSeek (å†³ç­–)
â”œâ”€â”€ Qwen (æƒ…æŠ¥)
â””â”€â”€ Doubao (åˆ†æ)

äº¤æ˜“æ‰€
â”œâ”€â”€ Hyperliquid (ä¸»è¦)
â””â”€â”€ Binance (æ”¯æŒ)
```

### 12.3 å¼€å‘å†ç¨‹

```
é¡¹ç›®åˆ›å»º: 2025-10-01
å½“å‰ç‰ˆæœ¬: v3.4.0
å¼€å‘å‘¨æœŸ: 45å¤©
ç‰ˆæœ¬è¿­ä»£: 14ä¸ªç‰ˆæœ¬
å›¢é˜Ÿè§„æ¨¡: 1-2äºº
å¼€å‘æ¨¡å¼: æ•æ·è¿­ä»£
```

---

## ğŸ¯ åä¸‰ã€ç»“è®ºä¸å»ºè®®

### 13.1 æ€»ä½“è¯„ä»·

AIcoinæ˜¯ä¸€ä¸ª**åŠŸèƒ½å®Œæ•´ã€æ¶æ„æ¸…æ™°ã€æ–‡æ¡£å®Œå–„**çš„ä¼ä¸šçº§AIäº¤æ˜“ç³»ç»Ÿã€‚ç»è¿‡45å¤©çš„è¿­ä»£å¼€å‘ï¼Œå·²ç»è¾¾åˆ°äº†**ç”Ÿäº§å°±ç»ªçŠ¶æ€**ã€‚

#### æ ¸å¿ƒä¼˜åŠ¿

1. **æŠ€æœ¯æ¶æ„ä¼˜ç§€**
   - åˆ†å±‚æ¸…æ™°ï¼Œæ¨¡å—åŒ–è®¾è®¡
   - åŒAIå¼•æ“æ¶æ„åˆ›æ–°
   - å®Œæ•´çš„é£æ§ä½“ç³»

2. **åŠŸèƒ½å®Œæ•´**
   - AIå†³ç­–ã€æƒ…æŠ¥åˆ†æã€æƒé™ç®¡ç†ã€æˆæœ¬æ§åˆ¶
   - RBACæƒé™ã€æ•°æ®å¤‡ä»½ã€æ—¥å¿—ç®¡ç†
   - å‰ç«¯åŠŸèƒ½ä¸°å¯Œï¼ŒUIç°ä»£åŒ–

3. **æ–‡æ¡£å®Œå–„**
   - 80+ç¯‡æ–‡æ¡£ï¼Œ10ä¸‡+å­—
   - ä»å¿«é€Ÿå¼€å§‹åˆ°æ·±åº¦æŠ€æœ¯æ–‡æ¡£éƒ½æœ‰è¦†ç›–
   - æ›´æ–°åŠæ—¶ï¼Œç‰ˆæœ¬åŒæ­¥

4. **éƒ¨ç½²æˆç†Ÿ**
   - DockeråŒ–éƒ¨ç½²
   - æ”¯æŒå¤šç¯å¢ƒï¼ˆå¼€å‘/æµ‹è¯•/ç”Ÿäº§ï¼‰
   - å®Œæ•´çš„éƒ¨ç½²è„šæœ¬å’Œç›‘æ§å·¥å…·

#### å¾…æ”¹è¿›ç‚¹

1. **æµ‹è¯•è¦†ç›–**
   - å»ºè®®å¢åŠ å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
   - æé«˜ä»£ç è¦†ç›–ç‡

2. **ç›‘æ§å¢å¼º**
   - å¢åŠ æ›´å¤šå‘Šè­¦æ¸ é“
   - å¢åŠ æ›´ç»†ç²’åº¦çš„ç›‘æ§æŒ‡æ ‡

3. **æ€§èƒ½ä¼˜åŒ–**
   - è¿›ä¸€æ­¥ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢
   - å¢åŠ æ›´å¤šç¼“å­˜ç­–ç•¥

### 13.2 ä½¿ç”¨å»ºè®®

#### å¯¹äºæ–°ç”¨æˆ·

1. **ä»æµ‹è¯•ç½‘å¼€å§‹**
   - å…ˆåœ¨æµ‹è¯•ç½‘ç¯å¢ƒè¿è¡Œè‡³å°‘7å¤©
   - è§‚å¯ŸAIå†³ç­–é€»è¾‘æ˜¯å¦åˆç†
   - éªŒè¯é£æ§ç³»ç»Ÿæ˜¯å¦æ­£å¸¸è§¦å‘

2. **å°èµ„é‡‘è¯•è¿è¡Œ**
   - ä¸»ç½‘å»ºè®®ä»$100-$200èµ·æ­¥
   - ä½¿ç”¨L1æƒé™ç­‰çº§ï¼ˆæœ€ä¿å®ˆï¼‰
   - å¯†åˆ‡ç›‘æ§å‰24å°æ—¶

3. **æŒç»­å­¦ä¹ **
   - é˜…è¯»æ ¸å¿ƒè§„åˆ™æ–‡æ¡£ï¼ˆ20,000å­—ï¼‰
   - ç†è§£L0-L5æƒé™ç³»ç»Ÿ
   - æŒæ¡é£æ§å‚æ•°é…ç½®

#### å¯¹äºå¼€å‘è€…

1. **ä»£ç è§„èŒƒ**
   - éµå¾ªé¡¹ç›®ç°æœ‰ä»£ç é£æ ¼
   - æ·»åŠ å¿…è¦çš„æ³¨é‡Šå’Œæ–‡æ¡£
   - ä½¿ç”¨ç±»å‹æç¤ºï¼ˆType Hintsï¼‰

2. **æµ‹è¯•é©±åŠ¨**
   - æ–°åŠŸèƒ½å¿…é¡»æœ‰æµ‹è¯•
   - ä¿æŒæµ‹è¯•è¦†ç›–ç‡>80%
   - é›†æˆæµ‹è¯•å’Œå•å…ƒæµ‹è¯•å¹¶é‡

3. **æ–‡æ¡£åŒæ­¥**
   - ä»£ç å˜æ›´å¿…é¡»æ›´æ–°æ–‡æ¡£
   - ä¿æŒæ–‡æ¡£ç‰ˆæœ¬ä¸ä»£ç ç‰ˆæœ¬åŒæ­¥
   - ä½¿ç”¨Markdownæ ¼å¼

### 13.3 å‘å±•è·¯çº¿å›¾

#### çŸ­æœŸï¼ˆ1-3ä¸ªæœˆï¼‰

- [ ] å¢åŠ å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
- [ ] ä¼˜åŒ–æ€§èƒ½ï¼ˆæ•°æ®åº“ã€ç¼“å­˜ï¼‰
- [ ] å¢å¼ºç›‘æ§å‘Šè­¦ç³»ç»Ÿ
- [ ] æ”¯æŒæ›´å¤šäº¤æ˜“æ‰€ï¼ˆOKXã€Bybitï¼‰

#### ä¸­æœŸï¼ˆ3-6ä¸ªæœˆï¼‰

- [ ] å®æ–½å¾®æœåŠ¡æ¶æ„
- [ ] å¢åŠ åŒå› ç´ è®¤è¯ï¼ˆ2FAï¼‰
- [ ] æ”¯æŒå¤šç§Ÿæˆ·
- [ ] å¢åŠ WebSocketå®æ—¶æ¨é€

#### é•¿æœŸï¼ˆ6-12ä¸ªæœˆï¼‰

- [ ] AIæ¨¡å‹å¾®è°ƒï¼ˆLoRAï¼‰
- [ ] æ”¯æŒæ›´å¤šAIå¹³å°
- [ ] ç§»åŠ¨ç«¯App
- [ ] ç¤¾åŒºç‰ˆå’Œä¼ä¸šç‰ˆ

### 13.4 æœ€ç»ˆç»“è®º

âœ… **AIcoiné¡¹ç›®å·²è¾¾åˆ°å¯ç”¨çŠ¶æ€ï¼ŒåŠŸèƒ½è¶³å¤Ÿå®Œå–„ï¼Œå¯ä»¥æŠ•å…¥å®é™…ä½¿ç”¨ã€‚**

**æ¨èä½¿ç”¨åœºæ™¯**:
1. ä¸ªäººé‡åŒ–äº¤æ˜“
2. å°å‹äº¤æ˜“å›¢é˜Ÿ
3. AIäº¤æ˜“ç ”ç©¶
4. é‡åŒ–ç­–ç•¥æµ‹è¯•

**ä¸æ¨èä½¿ç”¨åœºæ™¯**:
1. å¤§èµ„é‡‘é‡åŒ–ï¼ˆå»ºè®®å…ˆå°èµ„é‡‘æµ‹è¯•ï¼‰
2. é«˜é¢‘äº¤æ˜“ï¼ˆå½“å‰å†³ç­–é—´éš”10åˆ†é’Ÿï¼‰
3. å¤æ‚ç­–ç•¥ï¼ˆå½“å‰ä¸ºå•ä¸€AIå†³ç­–ï¼‰

**æ€»ä½“è¯„åˆ†**: â­â­â­â­ (4/5)

**æ¨èæŒ‡æ•°**: â­â­â­â­â­ (5/5)

---

## ğŸ“š é™„å½•

### A. å…³é”®æ–‡ä»¶æ¸…å•

```
æ ¸å¿ƒé…ç½®
â”œâ”€â”€ .env.example                    # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”œâ”€â”€ docker-compose.yml              # Dockerç¼–æ’é…ç½®
â””â”€â”€ VERSION                         # ç‰ˆæœ¬å·æ–‡ä»¶

åç«¯æ ¸å¿ƒ
â”œâ”€â”€ backend/app/main.py             # åº”ç”¨å…¥å£
â”œâ”€â”€ backend/app/core/config.py      # é…ç½®ç®¡ç†
â”œâ”€â”€ backend/app/services/orchestrator_v2.py  # AIç¼–æ’å™¨
â””â”€â”€ backend/app/services/decision/decision_engine_v2.py  # å†³ç­–å¼•æ“

å‰ç«¯æ ¸å¿ƒ
â”œâ”€â”€ frontend/app/page.tsx           # é¦–é¡µ
â”œâ”€â”€ frontend/app/layout.tsx         # æ ¹å¸ƒå±€
â””â”€â”€ frontend/app/admin/page.tsx     # ç®¡ç†åå°

éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ scripts/deploy-git.sh           # Gitè‡ªåŠ¨åŒ–éƒ¨ç½²
â”œâ”€â”€ scripts/deploy-rsync.sh         # å¿«é€Ÿéƒ¨ç½²
â””â”€â”€ scripts/monitor/monitor_system.sh  # ç³»ç»Ÿç›‘æ§

æ–‡æ¡£æ ¸å¿ƒ
â”œâ”€â”€ docs/README.md                  # æ–‡æ¡£ä¸­å¿ƒ
â”œâ”€â”€ docs/01-æ ¸å¿ƒè§„åˆ™/AIäº¤æ˜“è§„åˆ™æ–‡æ¡£.md  # æ ¸å¿ƒè§„åˆ™
â””â”€â”€ docs/03-æŠ€æœ¯æ¶æ„/00-ç³»ç»Ÿæ¶æ„è®¾è®¡.md  # æ¶æ„è®¾è®¡
```

### B. APIç«¯ç‚¹æ¸…å•

```
å¥åº·æ£€æŸ¥
GET /health                         # ç³»ç»Ÿå¥åº·æ£€æŸ¥
GET /                               # æ ¹ç«¯ç‚¹

å¸‚åœºæ•°æ®
GET /api/v1/market/price/{symbol}   # å®æ—¶ä»·æ ¼
GET /api/v1/market/klines/{symbol}  # Kçº¿æ•°æ®
GET /api/v1/market/orderbook/{symbol}  # è®¢å•ç°¿

è´¦æˆ·ç®¡ç†
GET /api/v1/account/info            # è´¦æˆ·ä¿¡æ¯
GET /api/v1/account/positions       # æŒä»“åˆ—è¡¨
GET /api/v1/account/balance         # ä½™é¢ä¿¡æ¯

äº¤æ˜“æ‰§è¡Œ
POST /api/v1/trading/order          # ä¸‹å•
DELETE /api/v1/trading/order/{id}   # æ’¤å•
GET /api/v1/trading/orders          # è®¢å•åˆ—è¡¨
GET /api/v1/trading/trades          # äº¤æ˜“å†å²

AIå†³ç­–
GET /api/v1/ai/status               # AIçŠ¶æ€
GET /api/v1/ai/decisions            # å†³ç­–å†å²
GET /api/v1/ai/permission           # æƒé™ç­‰çº§

æƒ…æŠ¥ç³»ç»Ÿ
GET /api/v1/intelligence/reports    # æƒ…æŠ¥æŠ¥å‘Š
GET /api/v1/intelligence/latest     # æœ€æ–°æƒ…æŠ¥
GET /api/v1/intelligence/analytics  # æ•°æ®åˆ†æ

æˆæœ¬ç®¡ç†
GET /api/v1/ai-cost/stats           # æˆæœ¬ç»Ÿè®¡
GET /api/v1/ai-cost/budget          # é¢„ç®—é…ç½®
POST /api/v1/ai-cost/budget         # è®¾ç½®é¢„ç®—

RBACæƒé™
GET /api/v1/admin/rbac/roles        # è§’è‰²åˆ—è¡¨
GET /api/v1/admin/rbac/permissions  # æƒé™åˆ—è¡¨
POST /api/v1/admin/rbac/roles       # åˆ›å»ºè§’è‰²
```

### C. ç¯å¢ƒå˜é‡æ¸…å•

```bash
# æ•°æ®åº“
DATABASE_URL=postgresql://user:pass@host:5432/db
POSTGRES_PASSWORD=your_password

# Redis
REDIS_URL=redis://localhost:6379

# AIå¹³å°
DEEPSEEK_API_KEY=sk-xxx
QWEN_API_KEY=sk-xxx
DOUBAO_API_KEY=sk-xxx

# äº¤æ˜“æ‰€
HYPERLIQUID_PRIVATE_KEY=0xxxx
HYPERLIQUID_WALLET_ADDRESS=0xxxx
HYPERLIQUID_TESTNET=true

# å®‰å…¨
SECRET_KEY=your-secret-key
JWT_SECRET_KEY=your-jwt-secret

# äº¤æ˜“é…ç½®
TRADING_ENABLED=true
DECISION_INTERVAL=600
INITIAL_PERMISSION_LEVEL=L1

# é£æ§å‚æ•°
MAX_POSITION_PCT=0.20
MAX_DAILY_LOSS_PCT=0.05
MAX_DRAWDOWN_PCT=0.10
```

---

**æŠ¥å‘Šå®Œæˆæ—¶é—´**: 2025-11-14  
**åˆ†æäººå‘˜**: AI Product Manager  
**æŠ¥å‘Šç‰ˆæœ¬**: v1.0  
**ä¸‹æ¬¡æ›´æ–°**: æ ¹æ®é¡¹ç›®é‡å¤§å˜æ›´

