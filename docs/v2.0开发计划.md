# 🚀 AIcoin v2.0 开发计划

> **启动日期**: 2025-10-31  
> **预计完成**: 2025-11-05 (5天)  
> **当前状态**: 🟡 开发中

---

## 📊 当前进度

### ✅ 已完成 (60%)

| 模块 | 状态 | 完成度 |
|------|------|--------|
| 权限系统 | ✅ 完成 | 100% |
| 约束框架 | ✅ 完成 | 100% |
| 记忆系统 | ✅ 完成 | 100% |
| 监控系统 | ✅ 完成 | 100% |
| 配置更新 | ✅ 完成 | 100% |
| 基础设施 | ✅ 保留 | 100% |

### 🚧 待完成 (40%)

| 模块 | 状态 | 预计工时 | 优先级 |
|------|------|---------|--------|
| DecisionEngineV2 | 🔴 未开始 | 2天 | P0 |
| OrchestratorV2 | 🔴 未开始 | 1天 | P0 |
| 数据库扩展 | 🔴 未开始 | 0.5天 | P1 |
| Qdrant部署 | 🔴 未开始 | 0.5天 | P1 |
| 单元测试 | 🔴 未开始 | 1天 | P1 |
| 集成测试 | 🔴 未开始 | 1天 | P1 |

---

## 📅 5天开发计划

### Day 1 (2025-11-01) - 决策引擎 🔥

**目标**: 实现DecisionEngineV2

#### 上午 (4小时)
- [ ] 设计新的Prompt（平衡风险与收益）
- [ ] 实现基础的DecisionEngineV2类
- [ ] 集成PermissionManager
- [ ] 集成ConstraintValidator

#### 下午 (4小时)
- [ ] 集成ShortTermMemory
- [ ] 集成LongTermMemory
- [ ] 集成KnowledgeBase
- [ ] 实现决策逻辑

**交付物**:
- `backend/app/services/decision/decision_engine_v2.py` (500+ lines)

---

### Day 2 (2025-11-02) - 交易编排器 🔥

**目标**: 实现AITradingOrchestratorV2

#### 上午 (4小时)
- [ ] 实现OrchestratorV2基础类
- [ ] 实现5分钟决策循环
- [ ] 集成DecisionEngineV2
- [ ] 实现风控流程

#### 下午 (4小时)
- [ ] 实现监控流程
- [ ] 实现强制平仓逻辑
- [ ] 实现权限升降级逻辑
- [ ] 优化日志输出

**交付物**:
- `backend/app/services/orchestrator_v2.py` (400+ lines)

---

### Day 3 (2025-11-03) - 数据库 & 部署

**目标**: 完成基础设施准备

#### 上午 (4小时)
- [ ] 扩展数据库模型
  ```sql
  CREATE TABLE ai_lessons (...)
  CREATE TABLE ai_strategies (...)
  CREATE TABLE market_patterns (...)
  CREATE TABLE permission_history (...)
  ```
- [ ] 运行数据库迁移
- [ ] 部署Qdrant向量数据库

#### 下午 (4小时)
- [ ] 编写单元测试
  - PermissionManager测试
  - ConstraintValidator测试
  - ShortTermMemory测试
  - KPICalculator测试

**交付物**:
- 数据库迁移脚本
- Docker Compose更新（Qdrant）
- 单元测试文件（4个）

---

### Day 4 (2025-11-04) - 测试网测试 🧪

**目标**: 在Hyperliquid测试网充分测试

#### 上午 (4小时)
- [ ] 配置测试网环境
- [ ] 启动v2.0系统（测试网）
- [ ] 运行24小时模拟测试
- [ ] 监控所有指标

#### 下午 (4小时)
- [ ] 分析测试结果
- [ ] 修复发现的问题
- [ ] 优化性能
- [ ] 编写集成测试

**验收标准**:
- ✅ 无疯狂加仓现象
- ✅ 风控正常工作
- ✅ 权限系统正常
- ✅ 记忆系统正常
- ✅ 无报错

---

### Day 5 (2025-11-05) - 主网小资金试运行 💰

**目标**: 在主网小资金验证系统

#### 准备工作
- [ ] 更新.env配置（主网）
- [ ] 转入小额资金（$100）
- [ ] 设置初始权限等级为L1
- [ ] 启动v2.0系统

#### 监控计划
- [ ] 实时监控前6小时
- [ ] 每小时检查一次KPI
- [ ] 记录所有决策
- [ ] 验证风控触发

**成功标准**:
- ✅ 6小时内亏损 < 5%
- ✅ 无疯狂加仓
- ✅ 风控有效
- ✅ AI决策合理

**如果成功**:
- 🎉 逐步增加资金到$500
- 🎉 观察7天后决定是否继续

**如果失败**:
- 🚨 立即停止
- 🔍 分析问题
- 🔧 修复后重新测试

---

## 🎯 里程碑

| 里程碑 | 日期 | 状态 |
|--------|------|------|
| M1: 核心框架重构完成 | 2025-10-31 | ✅ 完成 |
| M2: DecisionEngineV2完成 | 2025-11-01 | 🔴 待完成 |
| M3: OrchestratorV2完成 | 2025-11-02 | 🔴 待完成 |
| M4: 测试网验证通过 | 2025-11-04 | 🔴 待完成 |
| M5: 主网试运行成功 | 2025-11-05 | 🔴 待完成 |

---

## 📋 检查清单

### 启动前检查

- [ ] 所有代码已完成
- [ ] 单元测试通过率 > 80%
- [ ] 测试网运行24小时无异常
- [ ] 文档已更新
- [ ] .env配置正确
- [ ] 数据库已迁移
- [ ] Qdrant已部署
- [ ] 日志系统正常

### 运行中检查（每小时）

- [ ] 检查账户余额
- [ ] 检查持仓情况
- [ ] 检查KPI指标
- [ ] 检查告警日志
- [ ] 检查权限等级
- [ ] 检查决策质量

### 紧急停止条件

**立即停止系统，如果出现**:
- 🚨 单日亏损 >= 5%
- 🚨 总回撤 >= 10%
- 🚨 保证金率 < 20%
- 🚨 疯狂加仓现象
- 🚨 系统报错
- 🚨 AI决策异常

---

## 🔐 风控红线（不可突破）

| 指标 | 限制 | 说明 |
|------|------|------|
| 保证金率 | ≥ 20% | 低于15%强制平仓 |
| 最大回撤 | ≤ 10% | 触发后停止交易 |
| 单日亏损 | ≤ 5% | 触发后停止交易 |
| 杠杆 | ≤ 5x | 绝对上限 |
| 单仓位 | ≤ 25% | L5最高权限 |
| 现金储备 | ≥ 10% | 流动性保护 |
| 单一资产 | ≤ 30% | 分散风险 |
| 单笔亏损 | ≤ 3% | 单次最大损失 |

---

## 📊 预期性能目标

### Phase 1 目标（前30天）

| 指标 | 目标 | v1.0实际 |
|------|------|---------|
| 月收益率 | +5% ~ +15% | -48.8% |
| 最大回撤 | ≤ 10% | -48.8% |
| 夏普比率 | ≥ 1.0 | -5.0 |
| 胜率 | ≥ 55% | 未知 |
| 日交易次数 | 1-4次 | 10+次 |

### 成功标准

**Phase 1 (30天) 被认为成功，如果**:
- ✅ 累计收益 > 0%
- ✅ 最大回撤 < 15%
- ✅ 夏普比率 > 0.5
- ✅ 胜率 > 50%
- ✅ 无重大风控事件

---

## 💰 资金管理计划

### 阶段性投入

```
Day 1-2:  开发阶段           $0
Day 3:    单元测试           $0
Day 4:    测试网测试         $0 (测试币)
Day 5:    主网试运行         $100
Day 6-12: 如果成功           $500
Day 13-30: 如果持续盈利      $1,000
Day 31+:  评估后决定         $____
```

### 止损计划

| 阶段 | 资金 | 止损线 | 操作 |
|------|------|--------|------|
| 试运行 | $100 | -$10 (-10%) | 立即停止 |
| 第一周 | $500 | -$50 (-10%) | 降级到$100 |
| 第一月 | $1,000 | -$150 (-15%) | 降级到$500 |

---

## 📞 沟通计划

### 每日汇报

**时间**: 每天晚上22:00

**内容**:
- 今日完成的开发任务
- 遇到的问题和解决方案
- 明日计划
- （试运行后）交易结果和KPI

### 关键决策点

**需要产品经理确认**:
1. DecisionEngineV2的Prompt设计
2. 测试网测试结果评估
3. 主网试运行启动决定
4. 资金增加决策

---

## 🚨 风险提示

### 技术风险

- ⚠️ 新代码可能有Bug
- ⚠️ Qdrant向量数据库首次使用
- ⚠️ 记忆系统未经实战验证

### 市场风险

- ⚠️ 加密货币市场高波动
- ⚠️ 突发新闻可能导致剧烈波动
- ⚠️ 流动性风险

### 应对措施

- ✅ 充分的单元测试
- ✅ 测试网充分验证
- ✅ 小资金试运行
- ✅ 实时监控
- ✅ 严格止损
- ✅ 快速响应机制

---

## 📚 相关文档

- [重构报告v2.0](./03-技术架构/重构报告-v2.0.md)
- [智能约束框架](./03-技术架构/01-智能约束框架.md)
- [记忆学习系统](./03-技术架构/02-记忆学习系统.md)
- [监控评估系统](./03-技术架构/04-监控评估系统.md)
- [系统问题总结](./02-问题分析/系统问题总结.md)

---

**制定者**: AI + 产品经理  
**批准状态**: ⏳ 待批准  
**最后更新**: 2025-10-31

