â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸš¨ 504 è¶…æ—¶é—®é¢˜ - å¿«é€Ÿä¿®å¤æ£€æŸ¥æ¸…å•
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ã€ç«‹å³æ‰§è¡Œã€‘åœ¨ç”Ÿäº§æœåŠ¡å™¨ä¸ŠæŒ‰é¡ºåºæ‰§è¡Œï¼š

â–¡ 1. SSH ç™»å½•æœåŠ¡å™¨
    ssh -i /path/to/key.pem user@server-ip

â–¡ 2. è¿›å…¥é¡¹ç›®ç›®å½•
    cd /path/to/AIcoin

â–¡ 3. æ£€æŸ¥å®¹å™¨çŠ¶æ€
    docker ps | grep aicoin
    â†“ å¦‚æœ backend çŠ¶æ€å¼‚å¸¸ï¼Œç»§ç»­

â–¡ 4. æŸ¥çœ‹åç«¯æ—¥å¿—ï¼ˆæ‰¾å‡ºé”™è¯¯åŸå› ï¼‰
    docker logs aicoin-backend --tail 100
    
    å¸¸è§é”™è¯¯ï¼š
    âœ“ æ•°æ®åº“è¿æ¥é”™è¯¯ â†’ æ‰§è¡Œæ–¹æ¡ˆA
    âœ“ å†…å­˜ä¸è¶³ â†’ æ‰§è¡Œæ–¹æ¡ˆB
    âœ“ å…¶ä»–å¼‚å¸¸ â†’ æ‰§è¡Œæ–¹æ¡ˆC

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ã€æ–¹æ¡ˆAã€‘æ•°æ®åº“è¿æ¥é—®é¢˜
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
docker exec aicoin-postgres pg_isready -U aicoin
docker-compose restart postgres
sleep 10
docker-compose restart backend
curl -I http://localhost:8000/api/v1/status

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ã€æ–¹æ¡ˆBã€‘èµ„æºä¸è¶³
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
free -h
df -h
# å¦‚æœç£ç›˜æ»¡äº†
docker system prune -a --volumes -f
docker-compose restart backend

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ã€æ–¹æ¡ˆCã€‘å®Œæ•´é‡å¯ï¼ˆæœ€å¸¸ç”¨ï¼‰
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
docker-compose down
docker-compose up -d
sleep 30
curl http://localhost:8000/api/v1/status

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ã€éªŒè¯ä¿®å¤ã€‘
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â–¡ æµè§ˆå™¨æ‰“å¼€: https://jifenpay.cc/api/v1/status
    â†“ åº”è¿”å› JSONï¼ŒåŒ…å«ç³»ç»ŸçŠ¶æ€

â–¡ æ‰“å¼€ç®¡ç†åå°: https://jifenpay.cc/admin
    â†“ åº”èƒ½æ­£å¸¸ç™»å½•å’ŒåŠ è½½

â–¡ æŒ‰ F12 æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼ŒæŸ¥çœ‹ Network
    â†“ ä¸åº”æœ‰ 504 é”™è¯¯

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ã€æ·±åº¦è¯Šæ–­ã€‘ï¼ˆå¦‚æœå¿«é€Ÿä¿®å¤æ— æ•ˆï¼‰
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
git pull origin main
./scripts/diagnose_504.sh

æˆ–æŸ¥çœ‹è¯¦ç»†æ–‡æ¡£ï¼š
- URGENT_504_FIX.mdï¼ˆç´§æ€¥ä¿®å¤æŒ‡å—ï¼‰
- docs/03-å¼€å‘æ–‡æ¡£/504è¶…æ—¶é—®é¢˜è¯Šæ–­.mdï¼ˆå®Œæ•´æ–‡æ¡£ï¼‰

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ã€ç›‘æ§å‘½ä»¤ã€‘ï¼ˆåœ¨ä¿®å¤è¿‡ç¨‹ä¸­å®æ—¶æŸ¥çœ‹ï¼‰
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ç»ˆç«¯1: docker logs aicoin-backend -f
ç»ˆç«¯2: tail -f ./deploy/logs/error.log
ç»ˆç«¯3: watch -n 2 'docker stats --no-stream aicoin-backend'

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ä¿®å¤å®Œæˆåè®°å½•ï¼š
æ—¶é—´: __________
æ–¹æ¡ˆ: A / B / C
æ ¹å› : __________
å¤‡æ³¨: __________

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

